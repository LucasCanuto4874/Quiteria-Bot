"use strict";
var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __name = (target, value) => __defProp(target, "name", { value, configurable: true });
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);

// src/index.ts
var src_exports = {};
__export(src_exports, {
  AppleMusicExtractor: () => AppleMusicExtractor,
  AttachmentExtractor: () => AttachmentExtractor,
  DefaultExtractors: () => DefaultExtractors,
  Internal: () => internal_exports,
  ReverbnationExtractor: () => ReverbnationExtractor,
  SoundCloudExtractor: () => SoundCloudExtractor,
  SpotifyExtractor: () => SpotifyExtractor,
  VimeoExtractor: () => VimeoExtractor,
  lyricsExtractor: () => lyricsExtractor,
  version: () => version
});
module.exports = __toCommonJS(src_exports);

// src/extractors/SoundCloudExtractor.ts
var import_discord_player = require("discord-player");
var SoundCloud = __toESM(require("soundcloud.ts"));

// src/internal/helper.ts
var import_isomorphic_unfetch = __toESM(require("isomorphic-unfetch"));
var UA = "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36 Edg/109.0.1518.49";
var fetch = import_isomorphic_unfetch.default;
function filterSoundCloudPreviews(tracks) {
  const filtered = tracks.filter((t) => {
    if (typeof t.policy === "string") return t.policy.toUpperCase() === "ALLOW";
    return !(t.duration === 3e4 && t.full_duration > 3e4);
  });
  const result = filtered.length > 0 ? filtered : tracks;
  return result;
}
__name(filterSoundCloudPreviews, "filterSoundCloudPreviews");

// src/extractors/SoundCloudExtractor.ts
var _SoundCloudExtractor = class _SoundCloudExtractor extends import_discord_player.BaseExtractor {
  constructor() {
    super(...arguments);
    __publicField(this, "internal", new SoundCloud.default({
      clientId: this.options.clientId,
      oauthToken: this.options.oauthToken,
      proxy: this.options.proxy
    }));
  }
  async activate() {
    this.protocols = ["scsearch", "soundcloud"];
    _SoundCloudExtractor.instance = this;
  }
  async deactivate() {
    this.protocols = [];
    _SoundCloudExtractor.instance = null;
  }
  async validate(query, type) {
    if (typeof query !== "string") return false;
    return [
      import_discord_player.QueryType.SOUNDCLOUD,
      import_discord_player.QueryType.SOUNDCLOUD_PLAYLIST,
      import_discord_player.QueryType.SOUNDCLOUD_SEARCH,
      import_discord_player.QueryType.SOUNDCLOUD_TRACK,
      import_discord_player.QueryType.AUTO,
      import_discord_player.QueryType.AUTO_SEARCH
    ].some((r) => r === type);
  }
  async getRelatedTracks(track, history) {
    if (track.queryType === import_discord_player.QueryType.SOUNDCLOUD_TRACK) {
      const data = await this.internal.tracks.relatedV2(track.url, 5);
      const unique = filterSoundCloudPreviews(data).filter(
        (t) => !history.tracks.some((h) => h.url === t.permalink_url)
      );
      return this.createResponse(
        null,
        (unique.length > 0 ? unique : data).map((trackInfo) => {
          const newTrack = new import_discord_player.Track(this.context.player, {
            title: trackInfo.title,
            url: trackInfo.permalink_url,
            duration: import_discord_player.Util.buildTimeCode(import_discord_player.Util.parseMS(trackInfo.duration)),
            description: trackInfo.description ?? "",
            thumbnail: trackInfo.artwork_url,
            views: trackInfo.playback_count,
            author: trackInfo.user.username,
            requestedBy: track.requestedBy,
            source: "soundcloud",
            engine: trackInfo,
            queryType: import_discord_player.QueryType.SOUNDCLOUD_TRACK,
            metadata: trackInfo,
            requestMetadata: /* @__PURE__ */ __name(async () => {
              return trackInfo;
            }, "requestMetadata"),
            cleanTitle: trackInfo.title
          });
          newTrack.extractor = this;
          return newTrack;
        })
      );
    }
    return this.createResponse();
  }
  async handle(query, context) {
    if (context.protocol === "scsearch") context.type = import_discord_player.QueryType.SOUNDCLOUD_SEARCH;
    switch (context.type) {
      case import_discord_player.QueryType.SOUNDCLOUD_TRACK: {
        const trackInfo = await this.internal.tracks.getV2(query).catch(import_discord_player.Util.noop);
        if (!trackInfo) return this.emptyResponse();
        const track = new import_discord_player.Track(this.context.player, {
          title: trackInfo.title,
          url: trackInfo.permalink_url,
          duration: import_discord_player.Util.buildTimeCode(import_discord_player.Util.parseMS(trackInfo.duration)),
          description: trackInfo.description ?? "",
          thumbnail: trackInfo.artwork_url,
          views: trackInfo.playback_count,
          author: trackInfo.user.username,
          requestedBy: context.requestedBy,
          source: "soundcloud",
          engine: trackInfo,
          queryType: context.type,
          metadata: trackInfo,
          requestMetadata: /* @__PURE__ */ __name(async () => {
            return trackInfo;
          }, "requestMetadata"),
          cleanTitle: trackInfo.title
        });
        track.extractor = this;
        return { playlist: null, tracks: [track] };
      }
      case import_discord_player.QueryType.SOUNDCLOUD_PLAYLIST: {
        const data = await this.internal.playlists.getV2(query).catch(import_discord_player.Util.noop);
        if (!data) return { playlist: null, tracks: [] };
        const res = new import_discord_player.Playlist(this.context.player, {
          title: data.title,
          description: data.description ?? "",
          thumbnail: data.artwork_url ?? data.tracks[0].artwork_url,
          type: "playlist",
          source: "soundcloud",
          author: {
            name: data.user.username,
            url: data.user.permalink_url
          },
          tracks: [],
          id: `${data.id}`,
          url: data.permalink_url,
          rawPlaylist: data
        });
        for (const song of data.tracks) {
          const track = new import_discord_player.Track(this.context.player, {
            title: song.title,
            description: song.description ?? "",
            author: song.user.username,
            url: song.permalink_url,
            thumbnail: song.artwork_url,
            duration: import_discord_player.Util.buildTimeCode(import_discord_player.Util.parseMS(song.duration)),
            views: song.playback_count,
            requestedBy: context.requestedBy,
            playlist: res,
            source: "soundcloud",
            engine: song,
            queryType: context.type,
            metadata: song,
            requestMetadata: /* @__PURE__ */ __name(async () => {
              return song;
            }, "requestMetadata"),
            cleanTitle: song.title
          });
          track.extractor = this;
          track.playlist = res;
          res.tracks.push(track);
        }
        return { playlist: res, tracks: res.tracks };
      }
      default: {
        let tracks = await this.internal.tracks.searchV2({ q: query }).then((t) => t.collection).catch(import_discord_player.Util.noop);
        if (!tracks) tracks = await this.internal.tracks.searchAlt(query).catch(import_discord_player.Util.noop);
        if (!tracks || !tracks.length) return this.emptyResponse();
        tracks = filterSoundCloudPreviews(tracks);
        const resolvedTracks = [];
        for (const trackInfo of tracks) {
          if (!trackInfo.streamable) continue;
          const track = new import_discord_player.Track(this.context.player, {
            title: trackInfo.title,
            url: trackInfo.permalink_url,
            duration: import_discord_player.Util.buildTimeCode(import_discord_player.Util.parseMS(trackInfo.duration)),
            description: trackInfo.description ?? "",
            thumbnail: trackInfo.artwork_url,
            views: trackInfo.playback_count,
            author: trackInfo.user.username,
            requestedBy: context.requestedBy,
            source: "soundcloud",
            engine: trackInfo,
            queryType: "soundcloudTrack",
            metadata: trackInfo,
            requestMetadata: /* @__PURE__ */ __name(async () => {
              return trackInfo;
            }, "requestMetadata")
          });
          track.extractor = this;
          resolvedTracks.push(track);
        }
        return { playlist: null, tracks: resolvedTracks };
      }
    }
  }
  emptyResponse() {
    return { playlist: null, tracks: [] };
  }
  async stream(info) {
    const url = await this.internal.util.streamLink(info.url).catch(import_discord_player.Util.noop);
    if (!url) throw new Error("Could not extract stream from this track source");
    return url;
  }
  async bridge(track, sourceExtractor) {
    if (sourceExtractor?.identifier === this.identifier) {
      return this.stream(track);
    }
    const query = sourceExtractor?.createBridgeQuery(track) ?? `${track.author} - ${track.title}`;
    const info = await this.handle(query, {
      requestedBy: track.requestedBy,
      type: import_discord_player.QueryType.SOUNDCLOUD_SEARCH
    });
    if (!info.tracks.length) return null;
    const result = await this.stream(info.tracks[0]);
    if (result) {
      track.bridgedTrack = info.tracks[0];
      track.bridgedExtractor = this;
    }
    return result;
  }
};
__name(_SoundCloudExtractor, "SoundCloudExtractor");
__publicField(_SoundCloudExtractor, "identifier", "com.discord-player.soundcloudextractor");
__publicField(_SoundCloudExtractor, "instance", null);
var SoundCloudExtractor = _SoundCloudExtractor;

// src/extractors/LyricsExtractor.ts
function lyricsExtractor() {
  throw new Error(
    "Legacy lyrics extractor has been removed. Please use the new lyrics api from `player.lyrics` instead. It offers more accurate result and features like plain lyrics and synced lyrics."
  );
}
__name(lyricsExtractor, "lyricsExtractor");

// src/extractors/VimeoExtractor.ts
var import_discord_player2 = require("discord-player");

// src/internal/Vimeo.ts
var import_http = __toESM(require("http"));
var import_https = __toESM(require("https"));
var _Vimeo = class _Vimeo {
  constructor() {
    throw new Error(`The ${this.constructor.name} class may not be instantiated!`);
  }
  /**
   * @typedef {Readable} Readable
   */
  /**
   * Downloads from vimeo
   * @param {number} id Vimeo video id
   * @returns {Promise<Readable>}
   */
  static download(id) {
    return new Promise(async (resolve) => {
      const info = await _Vimeo.getInfo(id);
      if (!info) return null;
      const downloader = info.stream.startsWith("https://") ? import_https.default : import_http.default;
      downloader.get(info.stream, (res) => {
        resolve(res);
      });
    });
  }
  /**
   * Returns video info
   * @param {number} id Video id
   */
  static async getInfo(id) {
    if (!id) throw new Error("Invalid id");
    const url = `https://player.vimeo.com/video/${id}`;
    try {
      const res = await fetch(url);
      const data = await res.text();
      const json = JSON.parse(data.split("window.playerConfig =")[1].split(";")[0].trim());
      const obj = {
        id: json.video.id,
        duration: json.video.duration * 1e3,
        title: json.video.title,
        url: json.video.url,
        thumbnail: json.video.thumbs["1280"] || json.video.thumbs.base,
        stream: json.request.files.progressive[0].url,
        author: {
          id: json.video.owner.id,
          name: json.video.owner.name,
          url: json.video.owner.url,
          avatar: json.video.owner.img_2x || json.video.owner.img
        }
      };
      return obj;
    } catch {
      return null;
    }
  }
};
__name(_Vimeo, "Vimeo");
var Vimeo = _Vimeo;

// src/extractors/VimeoExtractor.ts
var _VimeoExtractor = class _VimeoExtractor extends import_discord_player2.BaseExtractor {
  async validate(query, type) {
    if (typeof query !== "string") return false;
    return [import_discord_player2.QueryType.VIMEO].some((r) => r === type);
  }
  async getRelatedTracks(track) {
    return this.createResponse();
  }
  async handle(query, context) {
    switch (context.type) {
      case import_discord_player2.QueryType.VIMEO: {
        const trackInfo = await Vimeo.getInfo(
          query.split("/").filter((x) => !!x).pop()
        ).catch(import_discord_player2.Util.noop);
        if (!trackInfo) return this.emptyResponse();
        const track = new import_discord_player2.Track(this.context.player, {
          title: trackInfo.title,
          url: trackInfo.url,
          duration: import_discord_player2.Util.buildTimeCode(import_discord_player2.Util.parseMS(trackInfo.duration || 0)),
          description: `${trackInfo.title} by ${trackInfo.author.name}`,
          thumbnail: trackInfo.thumbnail,
          views: 0,
          author: trackInfo.author.name,
          requestedBy: context.requestedBy,
          source: "arbitrary",
          engine: trackInfo.stream,
          queryType: context.type,
          metadata: trackInfo,
          async requestMetadata() {
            return trackInfo;
          }
        });
        track.extractor = this;
        return { playlist: null, tracks: [track] };
      }
      default:
        return this.emptyResponse();
    }
  }
  emptyResponse() {
    return { playlist: null, tracks: [] };
  }
  async stream(info) {
    const engine = info.raw.engine;
    if (engine) {
      return engine;
    }
    const track = await Vimeo.getInfo(info.url).catch(import_discord_player2.Util.noop);
    if (!track || !track.stream) throw new Error("Could not extract stream from this source");
    info.raw.engine = {
      streamURL: track.stream
    };
    return track.stream;
  }
};
__name(_VimeoExtractor, "VimeoExtractor");
__publicField(_VimeoExtractor, "identifier", "com.discord-player.vimeoextractor");
var VimeoExtractor = _VimeoExtractor;

// src/extractors/ReverbnationExtractor.ts
var import_discord_player3 = require("discord-player");
var import_reverbnation_scraper = __toESM(require("reverbnation-scraper"));
var _ReverbnationExtractor = class _ReverbnationExtractor extends import_discord_player3.BaseExtractor {
  async validate(query, type) {
    if (typeof query !== "string") return false;
    return [import_discord_player3.QueryType.REVERBNATION].some((r) => r === type);
  }
  async getRelatedTracks(track) {
    return this.createResponse();
  }
  async handle(query, context) {
    switch (context.type) {
      case import_discord_player3.QueryType.REVERBNATION: {
        const trackInfo = await import_reverbnation_scraper.default.getInfo(query).catch(import_discord_player3.Util.noop);
        if (!trackInfo) return this.emptyResponse();
        const track = new import_discord_player3.Track(this.context.player, {
          title: trackInfo.title,
          url: trackInfo.url,
          duration: import_discord_player3.Util.buildTimeCode(import_discord_player3.Util.parseMS(trackInfo.duration)),
          description: trackInfo.lyrics || `${trackInfo.title} by ${trackInfo.artist.name}`,
          thumbnail: trackInfo.thumbnail,
          views: 0,
          author: trackInfo.artist.name,
          requestedBy: context.requestedBy,
          source: "arbitrary",
          engine: trackInfo.streamURL,
          queryType: context.type,
          metadata: trackInfo,
          async requestMetadata() {
            return trackInfo;
          }
        });
        track.extractor = this;
        return { playlist: null, tracks: [track] };
      }
      default:
        return this.emptyResponse();
    }
  }
  emptyResponse() {
    return { playlist: null, tracks: [] };
  }
  async stream(info) {
    const engine = info.raw.engine;
    if (engine) {
      return engine;
    }
    const track = await import_reverbnation_scraper.default.getInfo(info.url).catch(import_discord_player3.Util.noop);
    if (!track || !track.streamURL) throw new Error("Could not extract stream from this source");
    info.raw.engine = {
      streamURL: track.streamURL
    };
    return track.streamURL;
  }
};
__name(_ReverbnationExtractor, "ReverbnationExtractor");
__publicField(_ReverbnationExtractor, "identifier", "com.discord-player.reverbnationextractor");
var ReverbnationExtractor = _ReverbnationExtractor;

// src/extractors/AttachmentExtractor.ts
var import_discord_player4 = require("discord-player");
var import_fs = require("fs");

// src/internal/downloader.ts
var import_http2 = __toESM(require("http"));
var import_https2 = __toESM(require("https"));
function downloadStream(url, opts = {}) {
  return new Promise((resolve, reject) => {
    const lib = url.startsWith("http://") ? import_http2.default : import_https2.default;
    lib.get(url, opts, (res) => resolve(res)).once("error", reject);
  });
}
__name(downloadStream, "downloadStream");

// src/extractors/AttachmentExtractor.ts
var fileType = __toESM(require("file-type"));
var import_path = __toESM(require("path"));
var import_promises = require("fs/promises");
var ATTACHMENT_HEADER = ["audio/", "video/", "application/ogg"];
var _AttachmentExtractor = class _AttachmentExtractor extends import_discord_player4.BaseExtractor {
  constructor() {
    super(...arguments);
    // use lowest priority to avoid conflict with other extractors
    __publicField(this, "priority", 0);
  }
  async validate(query, type) {
    if (typeof query !== "string") return false;
    return [import_discord_player4.QueryType.ARBITRARY, import_discord_player4.QueryType.FILE].some((r) => r === type);
  }
  async getRelatedTracks(track) {
    return this.createResponse();
  }
  async handle(query, context) {
    switch (context.type) {
      case import_discord_player4.QueryType.ARBITRARY: {
        const data = await downloadStream(query, context.requestOptions);
        if (!ATTACHMENT_HEADER.some((r) => !!data.headers["content-type"]?.startsWith(r))) return this.emptyResponse();
        const trackInfo = {
          title: (query.split("/").filter((x) => x.length).pop() ?? "Attachment").split("?")[0].trim(),
          duration: 0,
          thumbnail: "https://upload.wikimedia.org/wikipedia/commons/2/2a/ITunes_12.2_logo.png",
          engine: query,
          // eslint-disable-next-line
          author: data.client?.servername || "Attachment",
          // eslint-disable-next-line
          description: data.client?.servername || "Attachment",
          url: data.url || query
        };
        try {
          const mediaplex = require("mediaplex");
          const timeout = this.context.player.options.probeTimeout ?? 5e3;
          const { result, stream } = await Promise.race(
            [
              mediaplex.probeStream(data),
              new Promise((_, r) => {
                setTimeout(() => r(new Error("Timeout")), timeout);
              })
            ]
          );
          if (result) {
            trackInfo.duration = result.duration * 1e3;
            const metadata = mediaplex.readMetadata(result);
            if (metadata.author) trackInfo.author = metadata.author;
            if (metadata.title) trackInfo.title = metadata.title;
            trackInfo.description = `${trackInfo.title} by ${trackInfo.author}`;
          }
          stream.destroy();
        } catch {
        }
        const track = new import_discord_player4.Track(this.context.player, {
          title: trackInfo.title,
          url: trackInfo.url,
          duration: import_discord_player4.Util.buildTimeCode(import_discord_player4.Util.parseMS(trackInfo.duration)),
          description: trackInfo.description,
          thumbnail: trackInfo.thumbnail,
          views: 0,
          author: trackInfo.author,
          requestedBy: context.requestedBy,
          source: "arbitrary",
          engine: trackInfo.url,
          queryType: context.type,
          metadata: trackInfo,
          async requestMetadata() {
            return trackInfo;
          }
        });
        track.extractor = this;
        track.raw.isFile = false;
        return { playlist: null, tracks: [track] };
      }
      case import_discord_player4.QueryType.FILE: {
        if (!(0, import_fs.existsSync)(query)) return this.emptyResponse();
        const fstat = await (0, import_promises.stat)(query);
        if (!fstat.isFile()) return this.emptyResponse();
        const mime = await fileType.fromFile(query).catch(() => null);
        if (!mime || !ATTACHMENT_HEADER.some((r) => !!mime.mime.startsWith(r))) return this.emptyResponse();
        const trackInfo = {
          title: import_path.default.basename(query) || "Attachment",
          duration: 0,
          thumbnail: "https://upload.wikimedia.org/wikipedia/commons/2/2a/ITunes_12.2_logo.png",
          engine: query,
          author: "Attachment",
          description: "Attachment",
          url: query
        };
        try {
          const mediaplex = require("mediaplex");
          const timeout = this.context.player.options.probeTimeout ?? 5e3;
          const { result, stream } = await Promise.race(
            [
              mediaplex.probeStream(
                (0, import_fs.createReadStream)(query, {
                  start: 0,
                  end: 1024 * 1024 * 10
                })
              ),
              new Promise((_, r) => {
                setTimeout(() => r(new Error("Timeout")), timeout);
              })
            ]
          );
          if (result) {
            trackInfo.duration = result.duration * 1e3;
            const metadata = mediaplex.readMetadata(result);
            if (metadata.author) trackInfo.author = metadata.author;
            if (metadata.title) trackInfo.title = metadata.title;
            trackInfo.description = `${trackInfo.title} by ${trackInfo.author}`;
          }
          stream.destroy();
        } catch {
        }
        const track = new import_discord_player4.Track(this.context.player, {
          title: trackInfo.title,
          url: trackInfo.url,
          duration: import_discord_player4.Util.buildTimeCode(import_discord_player4.Util.parseMS(trackInfo.duration)),
          description: trackInfo.description,
          thumbnail: trackInfo.thumbnail,
          views: 0,
          author: trackInfo.author,
          requestedBy: context.requestedBy,
          source: "arbitrary",
          engine: trackInfo.url,
          queryType: context.type,
          metadata: trackInfo,
          async requestMetadata() {
            return trackInfo;
          }
        });
        track.extractor = this;
        track.raw.isFile = true;
        return { playlist: null, tracks: [track] };
      }
      default:
        return this.emptyResponse();
    }
  }
  emptyResponse() {
    return { playlist: null, tracks: [] };
  }
  async stream(info) {
    const engine = info.raw.engine;
    const isFile = info.raw.isFile;
    if (!engine) throw new Error("Could not find stream source");
    if (!isFile) {
      return engine;
    }
    return (0, import_fs.createReadStream)(engine);
  }
};
__name(_AttachmentExtractor, "AttachmentExtractor");
__publicField(_AttachmentExtractor, "identifier", "com.discord-player.attachmentextractor");
var AttachmentExtractor = _AttachmentExtractor;

// src/extractors/AppleMusicExtractor.ts
var import_discord_player6 = require("discord-player");

// src/internal/index.ts
var internal_exports = {};
__export(internal_exports, {
  AppleMusic: () => AppleMusic,
  SpotifyAPI: () => SpotifyAPI,
  Vimeo: () => Vimeo,
  downloadStream: () => downloadStream
});

// src/internal/AppleMusic.ts
var import_discord_player5 = require("discord-player");
var import_node_html_parser = require("node-html-parser");
function getHTML(link) {
  return fetch(link, {
    headers: {
      "User-Agent": UA
    }
  }).then((r) => r.text()).then(
    (txt) => (0, import_node_html_parser.parse)(txt),
    () => null
  );
}
__name(getHTML, "getHTML");
function makeImage({ height, url, width, ext = "jpg" }) {
  return url.replace("{w}", `${width}`).replace("{h}", `${height}`).replace("{f}", ext);
}
__name(makeImage, "makeImage");
function parseDuration(d) {
  const r = /* @__PURE__ */ __name((name, unit) => `((?<${name}>-?\\d*[\\.,]?\\d+)${unit})?`, "r");
  const regex = new RegExp(
    [
      "(?<negative>-)?P",
      r("years", "Y"),
      r("months", "M"),
      r("weeks", "W"),
      r("days", "D"),
      "(T",
      r("hours", "H"),
      r("minutes", "M"),
      r("seconds", "S"),
      ")?"
      // end optional time
    ].join("")
  );
  const test = regex.exec(d);
  if (!test || !test.groups) return "0:00";
  const dur = [
    test.groups.years,
    test.groups.months,
    test.groups.weeks,
    test.groups.days,
    test.groups.hours,
    test.groups.minutes,
    test.groups.seconds
  ];
  return dur.filter((r2, i, a) => !!r2 || i > a.length - 2).map((m, i) => {
    if (!m) m = "0";
    return i < 1 ? m : m.padStart(2, "0");
  }).join(":") || "0:00";
}
__name(parseDuration, "parseDuration");
var _AppleMusic = class _AppleMusic {
  constructor() {
    return _AppleMusic;
  }
  static async search(query) {
    try {
      const url = `https://music.apple.com/us/search?term=${encodeURIComponent(query)}`;
      const node = await getHTML(url);
      if (!node) return [];
      const rawData = node.getElementById("serialized-server-data");
      if (!rawData) return [];
      const data = JSON.parse(rawData.innerText)[0].data.sections;
      const tracks = data.find((s) => s.itemKind === "trackLockup")?.items;
      if (!tracks) return [];
      return tracks.map((track) => ({
        id: track.contentDescriptor.identifiers.storeAdamID,
        duration: track.duration || "0:00",
        title: track.title,
        url: track.contentDescriptor.url,
        thumbnail: track?.artwork?.dictionary ? makeImage({
          url: track.artwork.dictionary.url,
          height: track.artwork.dictionary.height,
          width: track.artwork.dictionary.width
        }) : "https://music.apple.com/assets/favicon/favicon-180.png",
        artist: {
          name: track.subtitleLinks?.[0]?.title ?? "Unknown Artist"
        }
      }));
    } catch {
      return [];
    }
  }
  static async getSongInfoFallback(res, name, id, link) {
    try {
      const metaTags = res.getElementsByTagName("meta");
      if (!metaTags.length) return null;
      const title = metaTags.find((r) => r.getAttribute("name") === "apple:title")?.getAttribute("content") || res.querySelector("title")?.innerText || name;
      const contentId = metaTags.find((r) => r.getAttribute("name") === "apple:content_id")?.getAttribute("content") || id;
      const durationRaw = metaTags.find((r) => r.getAttribute("property") === "music:song:duration")?.getAttribute("content");
      const song = {
        id: contentId,
        duration: durationRaw ? parseDuration(durationRaw) : metaTags.find((m) => m.getAttribute("name") === "apple:description")?.textContent.split("Duration: ")?.[1].split('"')?.[0] || "0:00",
        title,
        url: link,
        thumbnail: metaTags.find((r) => ["og:image:secure_url", "og:image"].includes(r.getAttribute("property")))?.getAttribute("content") || "https://music.apple.com/assets/favicon/favicon-180.png",
        artist: {
          name: res.querySelector(".song-subtitles__artists>a")?.textContent?.trim() || "Apple Music"
        }
      };
      return song;
    } catch {
      return null;
    }
  }
  static async getSongInfo(link) {
    if (!import_discord_player5.QueryResolver.regex.appleMusicSongRegex.test(link)) {
      return null;
    }
    const url = new URL(link);
    const id = url.searchParams.get("i");
    const name = url.pathname.split("album/")[1]?.split("/")[0];
    if (!id || !name) return null;
    const res = await getHTML(`https://music.apple.com/us/song/${name}/${id}`);
    if (!res) return null;
    try {
      const datasrc = res.getElementById("serialized-server-data")?.innerText || res.innerText.split('<script type="application/json" id="serialized-server-data">')?.[1]?.split("</script>")?.[0];
      if (!datasrc) throw "not found";
      const data = JSON.parse(datasrc)[0].data.seoData;
      const song = data.ogSongs[0]?.attributes;
      return {
        id: data.ogSongs[0]?.id || data.appleContentId || id,
        duration: song?.durationInMillis || "0:00",
        title: song?.name || data.appleTitle,
        url: song?.url || data.url || link,
        thumbnail: song?.artwork ? makeImage({
          url: song.artwork.url,
          height: song.artwork.height,
          width: song.artwork.width
        }) : data.artworkUrl ? makeImage({
          height: data.height,
          width: data.width,
          url: data.artworkUrl,
          ext: data.fileType || "jpg"
        }) : "https://music.apple.com/assets/favicon/favicon-180.png",
        artist: {
          name: song?.artistName || data.socialTitle || "Apple Music"
        }
      };
    } catch {
      return this.getSongInfoFallback(res, name, id, link);
    }
  }
  static async getPlaylistInfo(link) {
    if (!import_discord_player5.QueryResolver.regex.appleMusicPlaylistRegex.test(link)) {
      return null;
    }
    const res = await getHTML(link);
    if (!res) return null;
    try {
      const datasrc = res.getElementById("serialized-server-data")?.innerText || res.innerText.split('<script type="application/json" id="serialized-server-data">')?.[1]?.split("</script>")?.[0];
      if (!datasrc) throw "not found";
      const pl = JSON.parse(datasrc)[0].data.seoData;
      const thumbnail = pl.artworkUrl ? makeImage({
        height: pl.height,
        width: pl.width,
        url: pl.artworkUrl,
        ext: pl.fileType || "jpg"
      }) : "https://music.apple.com/assets/favicon/favicon-180.png";
      return {
        id: pl.appleContentId,
        title: pl.appleTitle,
        thumbnail,
        artist: {
          name: pl.ogSongs?.[0]?.attributes?.artistName || "Apple Music"
        },
        url: pl.url,
        tracks: (
          // eslint-disable-next-line
          pl.ogSongs?.map((m) => {
            const song = m.attributes;
            return {
              id: m.id,
              duration: song.durationInMillis || "0:00",
              title: song.name,
              url: song.url,
              thumbnail: song.artwork ? makeImage({
                url: song.artwork.url,
                height: song.artwork.height,
                width: song.artwork.width
              }) : thumbnail,
              artist: {
                name: song.artistName || "Apple Music"
              }
            };
          }) || []
        )
      };
    } catch {
      return null;
    }
  }
  static async getAlbumInfo(link) {
    if (!import_discord_player5.QueryResolver.regex.appleMusicAlbumRegex.test(link)) {
      return null;
    }
    const res = await getHTML(link);
    if (!res) return null;
    try {
      const datasrc = res.getElementById("serialized-server-data")?.innerText || res.innerText.split('<script type="application/json" id="serialized-server-data">')?.[1]?.split("</script>")?.[0];
      if (!datasrc) throw "not found";
      const pl = JSON.parse(datasrc)[0].data.seoData;
      const thumbnail = pl.artworkUrl ? makeImage({
        height: pl.height,
        width: pl.width,
        url: pl.artworkUrl,
        ext: pl.fileType || "jpg"
      }) : "https://music.apple.com/assets/favicon/favicon-180.png";
      return {
        id: pl.appleContentId,
        title: pl.appleTitle,
        thumbnail,
        artist: {
          name: pl.ogSongs?.[0]?.attributes?.artistName || "Apple Music"
        },
        url: pl.url,
        tracks: (
          // eslint-disable-next-line
          pl.ogSongs?.map((m) => {
            const song = m.attributes;
            return {
              id: m.id,
              duration: song.durationInMillis || "0:00",
              title: song.name,
              url: song.url,
              thumbnail: song.artwork ? makeImage({
                url: song.artwork.url,
                height: song.artwork.height,
                width: song.artwork.width
              }) : thumbnail,
              artist: {
                name: song.artistName || "Apple Music"
              }
            };
          }) || []
        )
      };
    } catch {
      return null;
    }
  }
};
__name(_AppleMusic, "AppleMusic");
var AppleMusic = _AppleMusic;

// src/internal/Spotify.ts
var SP_ANON_TOKEN_URL = "https://open.spotify.com/get_access_token?reason=transport&productType=embed";
var SP_ACCESS_TOKEN_URL = "https://accounts.spotify.com/api/token?grant_type=client_credentials";
var SP_BASE = "https://api.spotify.com/v1";
var _SpotifyAPI = class _SpotifyAPI {
  constructor(credentials = {
    clientId: null,
    clientSecret: null
  }) {
    this.credentials = credentials;
    __publicField(this, "accessToken", null);
  }
  get authorizationKey() {
    if (!this.credentials.clientId || !this.credentials.clientSecret) return null;
    return Buffer.from(`${this.credentials.clientId}:${this.credentials.clientSecret}`).toString("base64");
  }
  async requestToken() {
    const key = this.authorizationKey;
    if (!key) return await this.requestAnonymousToken();
    try {
      const res = await fetch(SP_ACCESS_TOKEN_URL, {
        method: "POST",
        headers: {
          "User-Agent": UA,
          Authorization: `Basic ${key}`,
          "Content-Type": "application/json"
        }
      });
      const body = await res.json();
      if (!body.access_token) throw "no token";
      const data = {
        token: body.access_token,
        expiresAfter: body.expires_in,
        type: "Bearer"
      };
      return this.accessToken = data;
    } catch {
      return await this.requestAnonymousToken();
    }
  }
  async requestAnonymousToken() {
    try {
      const res = await fetch(SP_ANON_TOKEN_URL, {
        headers: {
          "User-Agent": UA,
          "Content-Type": "application/json"
        }
      });
      if (!res.ok) throw "not_ok";
      const body = await res.json();
      if (!body.accessToken) throw "no_access_token";
      const data = {
        token: body.accessToken,
        expiresAfter: body.accessTokenExpirationTimestampMs,
        type: "Bearer"
      };
      return this.accessToken = data;
    } catch {
      return null;
    }
  }
  isTokenExpired() {
    if (!this.accessToken) return true;
    return Date.now() > this.accessToken.expiresAfter;
  }
  async search(query) {
    try {
      if (this.isTokenExpired()) await this.requestToken();
      if (!this.accessToken) return null;
      const res = await fetch(`${SP_BASE}/search/?q=${encodeURIComponent(query)}&type=track&market=US`, {
        headers: {
          "User-Agent": UA,
          Authorization: `${this.accessToken.type} ${this.accessToken.token}`,
          "Content-Type": "application/json"
        }
      });
      if (!res.ok) return null;
      const data = await res.json();
      return data.tracks.items.map((m) => ({
        title: m.name,
        duration: m.duration_ms,
        artist: m.artists.map((m2) => m2.name).join(", "),
        url: m.external_urls?.spotify || `https://open.spotify.com/track/${m.id}`,
        thumbnail: m.album.images?.[0]?.url || null
      }));
    } catch {
      return null;
    }
  }
  async getPlaylist(id) {
    try {
      if (this.isTokenExpired()) await this.requestToken();
      if (!this.accessToken) return null;
      const res = await fetch(`${SP_BASE}/playlists/${id}?market=US`, {
        headers: {
          "User-Agent": UA,
          Authorization: `${this.accessToken.type} ${this.accessToken.token}`,
          "Content-Type": "application/json"
        }
      });
      if (!res.ok) return null;
      const data = await res.json();
      if (!data.tracks.items.length) return null;
      const t = data.tracks.items;
      let next = data.tracks.next;
      while (typeof next === "string") {
        try {
          const res2 = await fetch(next, {
            headers: {
              "User-Agent": UA,
              Authorization: `${this.accessToken.type} ${this.accessToken.token}`,
              "Content-Type": "application/json"
            }
          });
          if (!res2.ok) break;
          const nextPage = await res2.json();
          t.push(...nextPage.items);
          next = nextPage.next;
          if (!next) break;
        } catch {
          break;
        }
      }
      const tracks = t.map(({ track: m }) => ({
        title: m.name,
        duration: m.duration_ms,
        artist: m.artists.map((m2) => m2.name).join(", "),
        url: m.external_urls?.spotify || `https://open.spotify.com/track/${m.id}`,
        thumbnail: m.album.images?.[0]?.url || null
      }));
      if (!tracks.length) return null;
      return {
        name: data.name,
        author: data.owner.display_name,
        thumbnail: data.images?.[0]?.url || null,
        id: data.id,
        url: data.external_urls.spotify || `https://open.spotify.com/playlist/${id}`,
        tracks
      };
    } catch {
      return null;
    }
  }
  async getAlbum(id) {
    try {
      if (this.isTokenExpired()) await this.requestToken();
      if (!this.accessToken) return null;
      const res = await fetch(`${SP_BASE}/albums/${id}?market=US`, {
        headers: {
          "User-Agent": UA,
          Authorization: `${this.accessToken.type} ${this.accessToken.token}`,
          "Content-Type": "application/json"
        }
      });
      if (!res.ok) return null;
      const data = await res.json();
      if (!data.tracks.items.length) return null;
      const t = data.tracks.items;
      let next = data.tracks.next;
      while (typeof next === "string") {
        try {
          const res2 = await fetch(next, {
            headers: {
              "User-Agent": UA,
              Authorization: `${this.accessToken.type} ${this.accessToken.token}`,
              "Content-Type": "application/json"
            }
          });
          if (!res2.ok) break;
          const nextPage = await res2.json();
          t.push(...nextPage.items);
          next = nextPage.next;
          if (!next) break;
        } catch {
          break;
        }
      }
      const tracks = t.map((m) => ({
        title: m.name,
        duration: m.duration_ms,
        artist: m.artists.map((m2) => m2.name).join(", "),
        url: m.external_urls?.spotify || `https://open.spotify.com/track/${m.id}`,
        thumbnail: data.images?.[0]?.url || null
      }));
      if (!tracks.length) return null;
      return {
        name: data.name,
        author: data.artists.map((m) => m.name).join(", "),
        thumbnail: data.images?.[0]?.url || null,
        id: data.id,
        url: data.external_urls.spotify || `https://open.spotify.com/album/${id}`,
        tracks
      };
    } catch {
      return null;
    }
  }
};
__name(_SpotifyAPI, "SpotifyAPI");
var SpotifyAPI = _SpotifyAPI;

// src/extractors/AppleMusicExtractor.ts
var _AppleMusicExtractor = class _AppleMusicExtractor extends import_discord_player6.BaseExtractor {
  constructor() {
    super(...arguments);
    __publicField(this, "_stream");
  }
  async activate() {
    this.protocols = ["amsearch", "applemusic"];
    const fn = this.options.createStream;
    if (typeof fn === "function") {
      this._stream = (q, t) => {
        return fn(this, q, t);
      };
    }
  }
  async deactivate() {
    this.protocols = [];
  }
  async validate(query, type) {
    return [
      import_discord_player6.QueryType.APPLE_MUSIC_ALBUM,
      import_discord_player6.QueryType.APPLE_MUSIC_PLAYLIST,
      import_discord_player6.QueryType.APPLE_MUSIC_SONG,
      import_discord_player6.QueryType.APPLE_MUSIC_SEARCH,
      import_discord_player6.QueryType.AUTO,
      import_discord_player6.QueryType.AUTO_SEARCH
    ].some((t) => t === type);
  }
  async getRelatedTracks(track, history) {
    if (track.queryType === import_discord_player6.QueryType.APPLE_MUSIC_SONG) {
      const data = await this.handle(track.author || track.title, {
        type: import_discord_player6.QueryType.APPLE_MUSIC_SEARCH,
        requestedBy: track.requestedBy
      });
      const unique = data.tracks.filter((t) => !history.tracks.some((h) => h.url === t.url));
      return unique.length > 0 ? this.createResponse(null, unique) : this.createResponse();
    }
    return this.createResponse();
  }
  async handle(query, context) {
    if (context.protocol === "amsearch") context.type = import_discord_player6.QueryType.APPLE_MUSIC_SEARCH;
    switch (context.type) {
      case import_discord_player6.QueryType.AUTO:
      case import_discord_player6.QueryType.AUTO_SEARCH:
      case import_discord_player6.QueryType.APPLE_MUSIC_SEARCH: {
        const data = await AppleMusic.search(query);
        if (!data || !data.length) return this.createResponse();
        const tracks = data.map(
          // eslint-disable-next-line @typescript-eslint/no-explicit-any
          (m) => {
            const track = new import_discord_player6.Track(this.context.player, {
              author: m.artist.name,
              description: m.title,
              duration: typeof m.duration === "number" ? import_discord_player6.Util.buildTimeCode(import_discord_player6.Util.parseMS(m.duration)) : m.duration,
              thumbnail: m.thumbnail,
              title: m.title,
              url: m.url,
              views: 0,
              source: "apple_music",
              requestedBy: context.requestedBy,
              queryType: "appleMusicSong",
              metadata: {
                source: m,
                bridge: null
              },
              requestMetadata: /* @__PURE__ */ __name(async () => {
                return {
                  source: m,
                  bridge: null
                };
              }, "requestMetadata")
            });
            track.extractor = this;
            return track;
          }
        );
        return this.createResponse(null, tracks);
      }
      case import_discord_player6.QueryType.APPLE_MUSIC_ALBUM: {
        const info = await AppleMusic.getAlbumInfo(query);
        if (!info) return this.createResponse();
        const playlist = new import_discord_player6.Playlist(this.context.player, {
          author: {
            name: info.artist.name,
            url: ""
          },
          description: info.title,
          id: info.id,
          source: "apple_music",
          thumbnail: info.thumbnail,
          title: info.title,
          tracks: [],
          type: "album",
          url: info.url,
          rawPlaylist: info
        });
        playlist.tracks = info.tracks.map(
          (m) => {
            const track = new import_discord_player6.Track(this.context.player, {
              author: m.artist.name,
              description: m.title,
              duration: typeof m.duration === "number" ? import_discord_player6.Util.buildTimeCode(import_discord_player6.Util.parseMS(m.duration)) : m.duration,
              thumbnail: m.thumbnail,
              title: m.title,
              url: m.url,
              views: 0,
              source: "apple_music",
              requestedBy: context.requestedBy,
              queryType: "appleMusicSong",
              metadata: {
                source: info,
                bridge: null
              },
              requestMetadata: /* @__PURE__ */ __name(async () => {
                return {
                  source: info,
                  bridge: null
                };
              }, "requestMetadata")
            });
            track.playlist = playlist;
            track.extractor = this;
            return track;
          }
        );
        return { playlist, tracks: playlist.tracks };
      }
      case import_discord_player6.QueryType.APPLE_MUSIC_PLAYLIST: {
        const info = await AppleMusic.getPlaylistInfo(query);
        if (!info) return this.createResponse();
        const playlist = new import_discord_player6.Playlist(this.context.player, {
          author: {
            name: info.artist.name,
            url: ""
          },
          description: info.title,
          id: info.id,
          source: "apple_music",
          thumbnail: info.thumbnail,
          title: info.title,
          tracks: [],
          type: "playlist",
          url: info.url,
          rawPlaylist: info
        });
        playlist.tracks = info.tracks.map(
          (m) => {
            const track = new import_discord_player6.Track(this.context.player, {
              author: m.artist.name,
              description: m.title,
              duration: typeof m.duration === "number" ? import_discord_player6.Util.buildTimeCode(import_discord_player6.Util.parseMS(m.duration)) : m.duration,
              thumbnail: m.thumbnail,
              title: m.title,
              url: m.url,
              views: 0,
              source: "apple_music",
              requestedBy: context.requestedBy,
              queryType: "appleMusicSong",
              metadata: {
                source: m,
                bridge: null
              },
              requestMetadata: /* @__PURE__ */ __name(async () => {
                return {
                  source: m,
                  bridge: null
                };
              }, "requestMetadata")
            });
            track.playlist = playlist;
            track.extractor = this;
            return track;
          }
        );
        return { playlist, tracks: playlist.tracks };
      }
      case import_discord_player6.QueryType.APPLE_MUSIC_SONG: {
        const info = await AppleMusic.getSongInfo(query);
        if (!info) return this.createResponse();
        const track = new import_discord_player6.Track(this.context.player, {
          author: info.artist.name,
          description: info.title,
          duration: typeof info.duration === "number" ? import_discord_player6.Util.buildTimeCode(import_discord_player6.Util.parseMS(info.duration)) : info.duration,
          thumbnail: info.thumbnail,
          title: info.title,
          url: info.url,
          views: 0,
          source: "apple_music",
          requestedBy: context.requestedBy,
          queryType: context.type,
          metadata: {
            source: info,
            bridge: null
          },
          requestMetadata: /* @__PURE__ */ __name(async () => {
            return {
              source: info,
              bridge: null
            };
          }, "requestMetadata")
        });
        track.extractor = this;
        return { playlist: null, tracks: [track] };
      }
      default:
        return { playlist: null, tracks: [] };
    }
  }
  async stream(info) {
    if (this._stream) {
      const stream = await this._stream(info.url, info);
      if (typeof stream === "string") return stream;
      return stream;
    }
    const result = await this.context.requestBridge(info, this);
    if (!result?.result) throw new Error("Could not bridge this track");
    return result.result;
  }
};
__name(_AppleMusicExtractor, "AppleMusicExtractor");
__publicField(_AppleMusicExtractor, "identifier", "com.discord-player.applemusicextractor");
var AppleMusicExtractor = _AppleMusicExtractor;

// src/extractors/SpotifyExtractor.ts
var import_discord_player7 = require("discord-player");
var import_spotify_url_info = __toESM(require("spotify-url-info"));
var re = /^(?:https:\/\/open\.spotify\.com\/(intl-([a-z]|[A-Z]){0,3}\/)?(?:user\/[A-Za-z0-9]+\/)?|spotify:)(album|playlist|track)(?:[/:])([A-Za-z0-9]+).*$/;
var _SpotifyExtractor = class _SpotifyExtractor extends import_discord_player7.BaseExtractor {
  constructor() {
    super(...arguments);
    __publicField(this, "_stream");
    __publicField(this, "_lib");
    __publicField(this, "_credentials", {
      clientId: this.options.clientId || process.env.DP_SPOTIFY_CLIENT_ID || null,
      clientSecret: this.options.clientSecret || process.env.DP_SPOTIFY_CLIENT_SECRET || null
    });
    __publicField(this, "internal", new SpotifyAPI(this._credentials));
  }
  async activate() {
    this.protocols = ["spsearch", "spotify"];
    this._lib = (0, import_spotify_url_info.default)(fetch);
    if (this.internal.isTokenExpired()) await this.internal.requestToken();
    const fn = this.options.createStream;
    if (typeof fn === "function") {
      this._stream = (q) => {
        return fn(this, q);
      };
    }
  }
  async deactivate() {
    this._stream = void 0;
    this._lib = void 0;
    this.protocols = [];
  }
  async validate(query, type) {
    return [
      import_discord_player7.QueryType.SPOTIFY_ALBUM,
      import_discord_player7.QueryType.SPOTIFY_PLAYLIST,
      import_discord_player7.QueryType.SPOTIFY_SONG,
      import_discord_player7.QueryType.SPOTIFY_SEARCH,
      import_discord_player7.QueryType.AUTO,
      import_discord_player7.QueryType.AUTO_SEARCH
    ].some((t) => t === type);
  }
  async getRelatedTracks(track) {
    return await this.handle(track.author || track.title, {
      type: import_discord_player7.QueryType.SPOTIFY_SEARCH,
      requestedBy: track.requestedBy
    });
  }
  async handle(query, context) {
    if (context.protocol === "spsearch") context.type = import_discord_player7.QueryType.SPOTIFY_SEARCH;
    switch (context.type) {
      case import_discord_player7.QueryType.AUTO:
      case import_discord_player7.QueryType.AUTO_SEARCH:
      case import_discord_player7.QueryType.SPOTIFY_SEARCH: {
        const data = await this.internal.search(query);
        if (!data) return this.createResponse();
        return this.createResponse(
          null,
          data.map((spotifyData) => {
            const track = new import_discord_player7.Track(this.context.player, {
              title: spotifyData.title,
              description: `${spotifyData.title} by ${spotifyData.artist}`,
              author: spotifyData.artist ?? "Unknown Artist",
              url: spotifyData.url,
              thumbnail: spotifyData.thumbnail || "https://www.scdn.co/i/_global/twitter_card-default.jpg",
              duration: import_discord_player7.Util.buildTimeCode(import_discord_player7.Util.parseMS(spotifyData.duration ?? 0)),
              views: 0,
              requestedBy: context.requestedBy,
              source: "spotify",
              queryType: import_discord_player7.QueryType.SPOTIFY_SONG,
              metadata: {
                source: spotifyData,
                bridge: null
              },
              requestMetadata: /* @__PURE__ */ __name(async () => {
                return {
                  source: spotifyData,
                  bridge: null
                };
              }, "requestMetadata")
            });
            track.extractor = this;
            return track;
          })
        );
      }
      case import_discord_player7.QueryType.SPOTIFY_SONG: {
        const spotifyData = await this._lib.getData(query, context.requestOptions).catch(import_discord_player7.Util.noop);
        if (!spotifyData) return { playlist: null, tracks: [] };
        const spotifyTrack = new import_discord_player7.Track(this.context.player, {
          title: spotifyData.title,
          description: `${spotifyData.name} by ${spotifyData.artists.map((m) => m.name).join(", ")}`,
          author: spotifyData.artists[0]?.name ?? "Unknown Artist",
          url: spotifyData.id ? `https://open.spotify.com/track/${spotifyData.id}` : query,
          thumbnail: spotifyData.coverArt?.sources?.[0]?.url || "https://www.scdn.co/i/_global/twitter_card-default.jpg",
          duration: import_discord_player7.Util.buildTimeCode(import_discord_player7.Util.parseMS(spotifyData.duration ?? spotifyData.maxDuration ?? 0)),
          views: 0,
          requestedBy: context.requestedBy,
          source: "spotify",
          queryType: context.type,
          metadata: {
            source: spotifyData,
            bridge: null
          },
          requestMetadata: /* @__PURE__ */ __name(async () => {
            return {
              source: spotifyData,
              bridge: null
            };
          }, "requestMetadata")
        });
        spotifyTrack.extractor = this;
        return { playlist: null, tracks: [spotifyTrack] };
      }
      case import_discord_player7.QueryType.SPOTIFY_PLAYLIST: {
        try {
          const { queryType, id } = this.parse(query);
          if (queryType !== "playlist") throw "err";
          const spotifyPlaylist = await this.internal.getPlaylist(id);
          if (!spotifyPlaylist) throw "err";
          const playlist = new import_discord_player7.Playlist(this.context.player, {
            title: spotifyPlaylist.name,
            description: spotifyPlaylist.name ?? "",
            thumbnail: spotifyPlaylist.thumbnail ?? "https://www.scdn.co/i/_global/twitter_card-default.jpg",
            type: "playlist",
            source: "spotify",
            author: {
              name: spotifyPlaylist.author ?? "Unknown Artist",
              url: null
            },
            tracks: [],
            id: spotifyPlaylist.id,
            url: spotifyPlaylist.url || query,
            rawPlaylist: spotifyPlaylist
          });
          playlist.tracks = spotifyPlaylist.tracks.map((spotifyData) => {
            const data = new import_discord_player7.Track(this.context.player, {
              title: spotifyData.title,
              description: `${spotifyData.title} by ${spotifyData.artist}`,
              author: spotifyData.artist ?? "Unknown Artist",
              url: spotifyData.url,
              thumbnail: spotifyData.thumbnail || "https://www.scdn.co/i/_global/twitter_card-default.jpg",
              duration: import_discord_player7.Util.buildTimeCode(import_discord_player7.Util.parseMS(spotifyData.duration ?? 0)),
              views: 0,
              requestedBy: context.requestedBy,
              source: "spotify",
              queryType: import_discord_player7.QueryType.SPOTIFY_SONG,
              metadata: {
                source: spotifyData,
                bridge: null
              },
              requestMetadata: /* @__PURE__ */ __name(async () => {
                return {
                  source: spotifyData,
                  bridge: null
                };
              }, "requestMetadata")
            });
            data.extractor = this;
            data.playlist = playlist;
            return data;
          });
          return { playlist, tracks: playlist.tracks };
        } catch {
          const spotifyPlaylist = await this._lib.getData(query, context.requestOptions).catch(import_discord_player7.Util.noop);
          if (!spotifyPlaylist) return { playlist: null, tracks: [] };
          const playlist = new import_discord_player7.Playlist(this.context.player, {
            title: spotifyPlaylist.name ?? spotifyPlaylist.title,
            description: spotifyPlaylist.title ?? "",
            thumbnail: spotifyPlaylist.coverArt?.sources?.[0]?.url ?? "https://www.scdn.co/i/_global/twitter_card-default.jpg",
            type: spotifyPlaylist.type,
            source: "spotify",
            author: {
              name: spotifyPlaylist.subtitle ?? "Unknown Artist",
              url: null
            },
            tracks: [],
            id: spotifyPlaylist.id,
            url: spotifyPlaylist.id ? `https://open.spotify.com/playlist/${spotifyPlaylist.id}` : query,
            rawPlaylist: spotifyPlaylist
          });
          playlist.tracks = spotifyPlaylist.trackList.map((m) => {
            const data = new import_discord_player7.Track(this.context.player, {
              title: m.title ?? "",
              description: m.title ?? "",
              author: m.subtitle ?? "Unknown Artist",
              url: m.uid ? `https://open.spotify.com/tracks/${m.uid}` : query,
              thumbnail: "https://www.scdn.co/i/_global/twitter_card-default.jpg",
              duration: import_discord_player7.Util.buildTimeCode(import_discord_player7.Util.parseMS(m.duration)),
              views: 0,
              requestedBy: context.requestedBy,
              playlist,
              source: "spotify",
              queryType: "spotifySong",
              metadata: {
                source: m,
                bridge: null
              },
              requestMetadata: /* @__PURE__ */ __name(async () => {
                return {
                  source: m,
                  bridge: null
                };
              }, "requestMetadata")
            });
            data.extractor = this;
            data.playlist = playlist;
            return data;
          });
          return { playlist, tracks: playlist.tracks };
        }
      }
      case import_discord_player7.QueryType.SPOTIFY_ALBUM: {
        try {
          const { queryType, id } = this.parse(query);
          if (queryType !== "album") throw "err";
          const spotifyAlbum = await this.internal.getAlbum(id);
          if (!spotifyAlbum) throw "err";
          const playlist = new import_discord_player7.Playlist(this.context.player, {
            title: spotifyAlbum.name,
            description: spotifyAlbum.name ?? "",
            thumbnail: spotifyAlbum.thumbnail ?? "https://www.scdn.co/i/_global/twitter_card-default.jpg",
            type: "album",
            source: "spotify",
            author: {
              name: spotifyAlbum.author ?? "Unknown Artist",
              url: null
            },
            tracks: [],
            id: spotifyAlbum.id,
            url: spotifyAlbum.url || query,
            rawPlaylist: spotifyAlbum
          });
          playlist.tracks = spotifyAlbum.tracks.map((spotifyData) => {
            const data = new import_discord_player7.Track(this.context.player, {
              title: spotifyData.title,
              description: `${spotifyData.title} by ${spotifyData.artist}`,
              author: spotifyData.artist ?? "Unknown Artist",
              url: spotifyData.url,
              thumbnail: spotifyData.thumbnail || "https://www.scdn.co/i/_global/twitter_card-default.jpg",
              duration: import_discord_player7.Util.buildTimeCode(import_discord_player7.Util.parseMS(spotifyData.duration ?? 0)),
              views: 0,
              requestedBy: context.requestedBy,
              source: "spotify",
              queryType: import_discord_player7.QueryType.SPOTIFY_SONG,
              metadata: {
                source: spotifyData,
                bridge: null
              },
              requestMetadata: /* @__PURE__ */ __name(async () => {
                return {
                  source: spotifyData,
                  bridge: null
                };
              }, "requestMetadata")
            });
            data.extractor = this;
            data.playlist = playlist;
            return data;
          });
          return { playlist, tracks: playlist.tracks };
        } catch {
          const album = await this._lib.getData(query, context.requestOptions).catch(import_discord_player7.Util.noop);
          if (!album) return { playlist: null, tracks: [] };
          const playlist = new import_discord_player7.Playlist(this.context.player, {
            title: album.name ?? album.title,
            description: album.title ?? "",
            thumbnail: album.coverArt?.sources?.[0]?.url ?? "https://www.scdn.co/i/_global/twitter_card-default.jpg",
            type: album.type,
            source: "spotify",
            author: {
              name: album.subtitle ?? "Unknown Artist",
              url: null
            },
            tracks: [],
            id: album.id,
            url: album.id ? `https://open.spotify.com/playlist/${album.id}` : query,
            rawPlaylist: album
          });
          playlist.tracks = album.trackList.map((m) => {
            const data = new import_discord_player7.Track(this.context.player, {
              title: m.title ?? "",
              description: m.title ?? "",
              author: m.subtitle ?? "Unknown Artist",
              url: m.uid ? `https://open.spotify.com/tracks/${m.uid}` : query,
              thumbnail: "https://www.scdn.co/i/_global/twitter_card-default.jpg",
              duration: import_discord_player7.Util.buildTimeCode(import_discord_player7.Util.parseMS(m.duration)),
              views: 0,
              requestedBy: context.requestedBy,
              playlist,
              source: "spotify",
              queryType: "spotifySong",
              metadata: {
                source: m,
                bridge: null
              },
              requestMetadata: /* @__PURE__ */ __name(async () => {
                return {
                  source: m,
                  bridge: null
                };
              }, "requestMetadata")
            });
            data.extractor = this;
            data.playlist = playlist;
            return data;
          });
          return { playlist, tracks: playlist.tracks };
        }
      }
      default:
        return { playlist: null, tracks: [] };
    }
  }
  async stream(info) {
    if (this._stream) {
      const stream = await this._stream(info.url, info);
      if (typeof stream === "string") return stream;
      return stream;
    }
    const result = await this.context.requestBridge(info, this);
    if (!result?.result) throw new Error("Could not bridge this track");
    return result.result;
  }
  parse(q) {
    const [, , , queryType, id] = re.exec(q) || [];
    return { queryType, id };
  }
};
__name(_SpotifyExtractor, "SpotifyExtractor");
__publicField(_SpotifyExtractor, "identifier", "com.discord-player.spotifyextractor");
var SpotifyExtractor = _SpotifyExtractor;

// src/version.ts
var version = (
  /* @__MACRO__ getVersion */
  "7.0.0"
);

// src/index.ts
var DefaultExtractors = [
  SoundCloudExtractor,
  AttachmentExtractor,
  VimeoExtractor,
  ReverbnationExtractor,
  AppleMusicExtractor,
  SpotifyExtractor
];
// Annotate the CommonJS export names for ESM import in node:
0 && (module.exports = {
  AppleMusicExtractor,
  AttachmentExtractor,
  DefaultExtractors,
  Internal,
  ReverbnationExtractor,
  SoundCloudExtractor,
  SpotifyExtractor,
  VimeoExtractor,
  lyricsExtractor,
  version
});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL2luZGV4LnRzIiwgIi4uL3NyYy9leHRyYWN0b3JzL1NvdW5kQ2xvdWRFeHRyYWN0b3IudHMiLCAiLi4vc3JjL2ludGVybmFsL2hlbHBlci50cyIsICIuLi9zcmMvZXh0cmFjdG9ycy9MeXJpY3NFeHRyYWN0b3IudHMiLCAiLi4vc3JjL2V4dHJhY3RvcnMvVmltZW9FeHRyYWN0b3IudHMiLCAiLi4vc3JjL2ludGVybmFsL1ZpbWVvLnRzIiwgIi4uL3NyYy9leHRyYWN0b3JzL1JldmVyYm5hdGlvbkV4dHJhY3Rvci50cyIsICIuLi9zcmMvZXh0cmFjdG9ycy9BdHRhY2htZW50RXh0cmFjdG9yLnRzIiwgIi4uL3NyYy9pbnRlcm5hbC9kb3dubG9hZGVyLnRzIiwgIi4uL3NyYy9leHRyYWN0b3JzL0FwcGxlTXVzaWNFeHRyYWN0b3IudHMiLCAiLi4vc3JjL2ludGVybmFsL2luZGV4LnRzIiwgIi4uL3NyYy9pbnRlcm5hbC9BcHBsZU11c2ljLnRzIiwgIi4uL3NyYy9pbnRlcm5hbC9TcG90aWZ5LnRzIiwgIi4uL3NyYy9leHRyYWN0b3JzL1Nwb3RpZnlFeHRyYWN0b3IudHMiLCAiLi4vc3JjL3ZlcnNpb24udHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7XG4gIEFwcGxlTXVzaWNFeHRyYWN0b3IsXG4gIEF0dGFjaG1lbnRFeHRyYWN0b3IsXG4gIFJldmVyYm5hdGlvbkV4dHJhY3RvcixcbiAgU291bmRDbG91ZEV4dHJhY3RvcixcbiAgU3BvdGlmeUV4dHJhY3RvcixcbiAgVmltZW9FeHRyYWN0b3IgfSBmcm9tXG4nLi9leHRyYWN0b3JzJztcblxuZXhwb3J0IGNvbnN0IERlZmF1bHRFeHRyYWN0b3JzID0gW1xuU291bmRDbG91ZEV4dHJhY3RvcixcbkF0dGFjaG1lbnRFeHRyYWN0b3IsXG5WaW1lb0V4dHJhY3RvcixcblJldmVyYm5hdGlvbkV4dHJhY3RvcixcbkFwcGxlTXVzaWNFeHRyYWN0b3IsXG5TcG90aWZ5RXh0cmFjdG9yXTtcblxuXG5leHBvcnQgKiBmcm9tICcuL2V4dHJhY3RvcnMnO1xuZXhwb3J0ICogYXMgSW50ZXJuYWwgZnJvbSAnLi9pbnRlcm5hbCc7XG5cbmV4cG9ydCB7IHZlcnNpb24gfSBmcm9tICcuL3ZlcnNpb24nOyIsICIvLyBwcmV0dGllci1pZ25vcmVcbmltcG9ydCB7XG4gIEJhc2VFeHRyYWN0b3IsXG4gIEV4dHJhY3RvckluZm8sXG4gIEV4dHJhY3RvclNlYXJjaENvbnRleHQsXG4gIEV4dHJhY3RvclN0cmVhbWFibGUsXG4gIHR5cGUgR3VpbGRRdWV1ZUhpc3RvcnksXG4gIFBsYXlsaXN0LFxuICBRdWVyeVR5cGUsXG4gIFNlYXJjaFF1ZXJ5VHlwZSxcbiAgVHJhY2ssXG4gIFV0aWwgfSBmcm9tXG4nZGlzY29yZC1wbGF5ZXInO1xuaW1wb3J0ICogYXMgU291bmRDbG91ZCBmcm9tICdzb3VuZGNsb3VkLnRzJztcbmltcG9ydCB7IGZpbHRlclNvdW5kQ2xvdWRQcmV2aWV3cyB9IGZyb20gJy4uL2ludGVybmFsL2hlbHBlcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU291bmRDbG91ZEV4dHJhY3RvckluaXQge1xuICBjbGllbnRJZD86IHN0cmluZztcbiAgb2F1dGhUb2tlbj86IHN0cmluZztcbiAgcHJveHk/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBTb3VuZENsb3VkRXh0cmFjdG9yIGV4dGVuZHMgQmFzZUV4dHJhY3RvcjxTb3VuZENsb3VkRXh0cmFjdG9ySW5pdD4ge1xuICBwdWJsaWMgc3RhdGljIGlkZW50aWZpZXIgPSAnY29tLmRpc2NvcmQtcGxheWVyLnNvdW5kY2xvdWRleHRyYWN0b3InIGFzIGNvbnN0O1xuICBwdWJsaWMgc3RhdGljIGluc3RhbmNlOiBTb3VuZENsb3VkRXh0cmFjdG9yIHwgbnVsbCA9IG51bGw7XG5cbiAgcHVibGljIGludGVybmFsID0gbmV3IFNvdW5kQ2xvdWQuZGVmYXVsdCh7XG4gICAgY2xpZW50SWQ6IHRoaXMub3B0aW9ucy5jbGllbnRJZCxcbiAgICBvYXV0aFRva2VuOiB0aGlzLm9wdGlvbnMub2F1dGhUb2tlbixcbiAgICBwcm94eTogdGhpcy5vcHRpb25zLnByb3h5XG4gIH0pO1xuXG4gIHB1YmxpYyBhc3luYyBhY3RpdmF0ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLnByb3RvY29scyA9IFsnc2NzZWFyY2gnLCAnc291bmRjbG91ZCddO1xuICAgIFNvdW5kQ2xvdWRFeHRyYWN0b3IuaW5zdGFuY2UgPSB0aGlzO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGRlYWN0aXZhdGUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5wcm90b2NvbHMgPSBbXTtcbiAgICBTb3VuZENsb3VkRXh0cmFjdG9yLmluc3RhbmNlID0gbnVsbDtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyB2YWxpZGF0ZShxdWVyeTogc3RyaW5nLCB0eXBlPzogU2VhcmNoUXVlcnlUeXBlIHwgbnVsbCB8IHVuZGVmaW5lZCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGlmICh0eXBlb2YgcXVlcnkgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2U7XG4gICAgLy8gcHJldHRpZXItaWdub3JlXG4gICAgcmV0dXJuIChbXG4gICAgUXVlcnlUeXBlLlNPVU5EQ0xPVUQsXG4gICAgUXVlcnlUeXBlLlNPVU5EQ0xPVURfUExBWUxJU1QsXG4gICAgUXVlcnlUeXBlLlNPVU5EQ0xPVURfU0VBUkNILFxuICAgIFF1ZXJ5VHlwZS5TT1VORENMT1VEX1RSQUNLLFxuICAgIFF1ZXJ5VHlwZS5BVVRPLFxuICAgIFF1ZXJ5VHlwZS5BVVRPX1NFQVJDSF0gYXNcbiAgICBTZWFyY2hRdWVyeVR5cGVbXSkuc29tZSgocikgPT4gciA9PT0gdHlwZSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0UmVsYXRlZFRyYWNrcyh0cmFjazogVHJhY2ssIGhpc3Rvcnk6IEd1aWxkUXVldWVIaXN0b3J5KSB7XG4gICAgaWYgKHRyYWNrLnF1ZXJ5VHlwZSA9PT0gUXVlcnlUeXBlLlNPVU5EQ0xPVURfVFJBQ0spIHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmludGVybmFsLnRyYWNrcy5yZWxhdGVkVjIodHJhY2sudXJsLCA1KTtcblxuICAgICAgY29uc3QgdW5pcXVlID0gZmlsdGVyU291bmRDbG91ZFByZXZpZXdzKGRhdGEpLmZpbHRlcihcbiAgICAgICAgKHQpID0+ICFoaXN0b3J5LnRyYWNrcy5zb21lKChoKSA9PiBoLnVybCA9PT0gdC5wZXJtYWxpbmtfdXJsKVxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlUmVzcG9uc2UoXG4gICAgICAgIG51bGwsXG4gICAgICAgICh1bmlxdWUubGVuZ3RoID4gMCA/IHVuaXF1ZSA6IGRhdGEpLm1hcCgodHJhY2tJbmZvKSA9PiB7XG4gICAgICAgICAgY29uc3QgbmV3VHJhY2sgPSBuZXcgVHJhY2sodGhpcy5jb250ZXh0LnBsYXllciwge1xuICAgICAgICAgICAgdGl0bGU6IHRyYWNrSW5mby50aXRsZSxcbiAgICAgICAgICAgIHVybDogdHJhY2tJbmZvLnBlcm1hbGlua191cmwsXG4gICAgICAgICAgICBkdXJhdGlvbjogVXRpbC5idWlsZFRpbWVDb2RlKFV0aWwucGFyc2VNUyh0cmFja0luZm8uZHVyYXRpb24pKSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0cmFja0luZm8uZGVzY3JpcHRpb24gPz8gJycsXG4gICAgICAgICAgICB0aHVtYm5haWw6IHRyYWNrSW5mby5hcnR3b3JrX3VybCxcbiAgICAgICAgICAgIHZpZXdzOiB0cmFja0luZm8ucGxheWJhY2tfY291bnQsXG4gICAgICAgICAgICBhdXRob3I6IHRyYWNrSW5mby51c2VyLnVzZXJuYW1lLFxuICAgICAgICAgICAgcmVxdWVzdGVkQnk6IHRyYWNrLnJlcXVlc3RlZEJ5LFxuICAgICAgICAgICAgc291cmNlOiAnc291bmRjbG91ZCcsXG4gICAgICAgICAgICBlbmdpbmU6IHRyYWNrSW5mbyxcbiAgICAgICAgICAgIHF1ZXJ5VHlwZTogUXVlcnlUeXBlLlNPVU5EQ0xPVURfVFJBQ0ssXG4gICAgICAgICAgICBtZXRhZGF0YTogdHJhY2tJbmZvLFxuICAgICAgICAgICAgcmVxdWVzdE1ldGFkYXRhOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIHJldHVybiB0cmFja0luZm87XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xlYW5UaXRsZTogdHJhY2tJbmZvLnRpdGxlXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBuZXdUcmFjay5leHRyYWN0b3IgPSB0aGlzO1xuXG4gICAgICAgICAgcmV0dXJuIG5ld1RyYWNrO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jcmVhdGVSZXNwb25zZSgpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGhhbmRsZShxdWVyeTogc3RyaW5nLCBjb250ZXh0OiBFeHRyYWN0b3JTZWFyY2hDb250ZXh0KTogUHJvbWlzZTxFeHRyYWN0b3JJbmZvPiB7XG4gICAgaWYgKGNvbnRleHQucHJvdG9jb2wgPT09ICdzY3NlYXJjaCcpIGNvbnRleHQudHlwZSA9IFF1ZXJ5VHlwZS5TT1VORENMT1VEX1NFQVJDSDtcbiAgICBzd2l0Y2ggKGNvbnRleHQudHlwZSkge1xuICAgICAgY2FzZSBRdWVyeVR5cGUuU09VTkRDTE9VRF9UUkFDSzp7XG4gICAgICAgICAgY29uc3QgdHJhY2tJbmZvID0gYXdhaXQgdGhpcy5pbnRlcm5hbC50cmFja3MuZ2V0VjIocXVlcnkpLmNhdGNoKFV0aWwubm9vcCk7XG5cbiAgICAgICAgICBpZiAoIXRyYWNrSW5mbykgcmV0dXJuIHRoaXMuZW1wdHlSZXNwb25zZSgpO1xuXG4gICAgICAgICAgY29uc3QgdHJhY2sgPSBuZXcgVHJhY2sodGhpcy5jb250ZXh0LnBsYXllciwge1xuICAgICAgICAgICAgdGl0bGU6IHRyYWNrSW5mby50aXRsZSxcbiAgICAgICAgICAgIHVybDogdHJhY2tJbmZvLnBlcm1hbGlua191cmwsXG4gICAgICAgICAgICBkdXJhdGlvbjogVXRpbC5idWlsZFRpbWVDb2RlKFV0aWwucGFyc2VNUyh0cmFja0luZm8uZHVyYXRpb24pKSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0cmFja0luZm8uZGVzY3JpcHRpb24gPz8gJycsXG4gICAgICAgICAgICB0aHVtYm5haWw6IHRyYWNrSW5mby5hcnR3b3JrX3VybCxcbiAgICAgICAgICAgIHZpZXdzOiB0cmFja0luZm8ucGxheWJhY2tfY291bnQsXG4gICAgICAgICAgICBhdXRob3I6IHRyYWNrSW5mby51c2VyLnVzZXJuYW1lLFxuICAgICAgICAgICAgcmVxdWVzdGVkQnk6IGNvbnRleHQucmVxdWVzdGVkQnksXG4gICAgICAgICAgICBzb3VyY2U6ICdzb3VuZGNsb3VkJyxcbiAgICAgICAgICAgIGVuZ2luZTogdHJhY2tJbmZvLFxuICAgICAgICAgICAgcXVlcnlUeXBlOiBjb250ZXh0LnR5cGUsXG4gICAgICAgICAgICBtZXRhZGF0YTogdHJhY2tJbmZvLFxuICAgICAgICAgICAgcmVxdWVzdE1ldGFkYXRhOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIHJldHVybiB0cmFja0luZm87XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xlYW5UaXRsZTogdHJhY2tJbmZvLnRpdGxlXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICB0cmFjay5leHRyYWN0b3IgPSB0aGlzO1xuXG4gICAgICAgICAgcmV0dXJuIHsgcGxheWxpc3Q6IG51bGwsIHRyYWNrczogW3RyYWNrXSB9O1xuICAgICAgICB9XG4gICAgICBjYXNlIFF1ZXJ5VHlwZS5TT1VORENMT1VEX1BMQVlMSVNUOntcbiAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5pbnRlcm5hbC5wbGF5bGlzdHMuZ2V0VjIocXVlcnkpLmNhdGNoKFV0aWwubm9vcCk7XG4gICAgICAgICAgaWYgKCFkYXRhKSByZXR1cm4geyBwbGF5bGlzdDogbnVsbCwgdHJhY2tzOiBbXSB9O1xuXG4gICAgICAgICAgY29uc3QgcmVzID0gbmV3IFBsYXlsaXN0KHRoaXMuY29udGV4dC5wbGF5ZXIsIHtcbiAgICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24gPz8gJycsXG4gICAgICAgICAgICB0aHVtYm5haWw6IGRhdGEuYXJ0d29ya191cmwgPz8gZGF0YS50cmFja3NbMF0uYXJ0d29ya191cmwsXG4gICAgICAgICAgICB0eXBlOiAncGxheWxpc3QnLFxuICAgICAgICAgICAgc291cmNlOiAnc291bmRjbG91ZCcsXG4gICAgICAgICAgICBhdXRob3I6IHtcbiAgICAgICAgICAgICAgbmFtZTogZGF0YS51c2VyLnVzZXJuYW1lLFxuICAgICAgICAgICAgICB1cmw6IGRhdGEudXNlci5wZXJtYWxpbmtfdXJsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdHJhY2tzOiBbXSxcbiAgICAgICAgICAgIGlkOiBgJHtkYXRhLmlkfWAsXG4gICAgICAgICAgICB1cmw6IGRhdGEucGVybWFsaW5rX3VybCxcbiAgICAgICAgICAgIHJhd1BsYXlsaXN0OiBkYXRhXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBmb3IgKGNvbnN0IHNvbmcgb2YgZGF0YS50cmFja3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHRyYWNrID0gbmV3IFRyYWNrKHRoaXMuY29udGV4dC5wbGF5ZXIsIHtcbiAgICAgICAgICAgICAgdGl0bGU6IHNvbmcudGl0bGUsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBzb25nLmRlc2NyaXB0aW9uID8/ICcnLFxuICAgICAgICAgICAgICBhdXRob3I6IHNvbmcudXNlci51c2VybmFtZSxcbiAgICAgICAgICAgICAgdXJsOiBzb25nLnBlcm1hbGlua191cmwsXG4gICAgICAgICAgICAgIHRodW1ibmFpbDogc29uZy5hcnR3b3JrX3VybCxcbiAgICAgICAgICAgICAgZHVyYXRpb246IFV0aWwuYnVpbGRUaW1lQ29kZShVdGlsLnBhcnNlTVMoc29uZy5kdXJhdGlvbikpLFxuICAgICAgICAgICAgICB2aWV3czogc29uZy5wbGF5YmFja19jb3VudCxcbiAgICAgICAgICAgICAgcmVxdWVzdGVkQnk6IGNvbnRleHQucmVxdWVzdGVkQnksXG4gICAgICAgICAgICAgIHBsYXlsaXN0OiByZXMsXG4gICAgICAgICAgICAgIHNvdXJjZTogJ3NvdW5kY2xvdWQnLFxuICAgICAgICAgICAgICBlbmdpbmU6IHNvbmcsXG4gICAgICAgICAgICAgIHF1ZXJ5VHlwZTogY29udGV4dC50eXBlLFxuICAgICAgICAgICAgICBtZXRhZGF0YTogc29uZyxcbiAgICAgICAgICAgICAgcmVxdWVzdE1ldGFkYXRhOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNvbmc7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGNsZWFuVGl0bGU6IHNvbmcudGl0bGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdHJhY2suZXh0cmFjdG9yID0gdGhpcztcbiAgICAgICAgICAgIHRyYWNrLnBsYXlsaXN0ID0gcmVzO1xuICAgICAgICAgICAgcmVzLnRyYWNrcy5wdXNoKHRyYWNrKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4geyBwbGF5bGlzdDogcmVzLCB0cmFja3M6IHJlcy50cmFja3MgfTtcbiAgICAgICAgfVxuICAgICAgZGVmYXVsdDp7XG4gICAgICAgICAgbGV0IHRyYWNrcyA9IGF3YWl0IHRoaXMuaW50ZXJuYWwudHJhY2tzLlxuICAgICAgICAgIHNlYXJjaFYyKHsgcTogcXVlcnkgfSkuXG4gICAgICAgICAgdGhlbigodCkgPT4gdC5jb2xsZWN0aW9uKS5cbiAgICAgICAgICBjYXRjaChVdGlsLm5vb3ApO1xuXG4gICAgICAgICAgaWYgKCF0cmFja3MpIHRyYWNrcyA9IGF3YWl0IHRoaXMuaW50ZXJuYWwudHJhY2tzLnNlYXJjaEFsdChxdWVyeSkuY2F0Y2goVXRpbC5ub29wKTtcblxuICAgICAgICAgIGlmICghdHJhY2tzIHx8ICF0cmFja3MubGVuZ3RoKSByZXR1cm4gdGhpcy5lbXB0eVJlc3BvbnNlKCk7XG5cbiAgICAgICAgICB0cmFja3MgPSBmaWx0ZXJTb3VuZENsb3VkUHJldmlld3ModHJhY2tzKTtcblxuICAgICAgICAgIGNvbnN0IHJlc29sdmVkVHJhY2tzOiBUcmFja1tdID0gW107XG5cbiAgICAgICAgICBmb3IgKGNvbnN0IHRyYWNrSW5mbyBvZiB0cmFja3MpIHtcbiAgICAgICAgICAgIGlmICghdHJhY2tJbmZvLnN0cmVhbWFibGUpIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29uc3QgdHJhY2sgPSBuZXcgVHJhY2sodGhpcy5jb250ZXh0LnBsYXllciwge1xuICAgICAgICAgICAgICB0aXRsZTogdHJhY2tJbmZvLnRpdGxlLFxuICAgICAgICAgICAgICB1cmw6IHRyYWNrSW5mby5wZXJtYWxpbmtfdXJsLFxuICAgICAgICAgICAgICBkdXJhdGlvbjogVXRpbC5idWlsZFRpbWVDb2RlKFV0aWwucGFyc2VNUyh0cmFja0luZm8uZHVyYXRpb24pKSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHRyYWNrSW5mby5kZXNjcmlwdGlvbiA/PyAnJyxcbiAgICAgICAgICAgICAgdGh1bWJuYWlsOiB0cmFja0luZm8uYXJ0d29ya191cmwsXG4gICAgICAgICAgICAgIHZpZXdzOiB0cmFja0luZm8ucGxheWJhY2tfY291bnQsXG4gICAgICAgICAgICAgIGF1dGhvcjogdHJhY2tJbmZvLnVzZXIudXNlcm5hbWUsXG4gICAgICAgICAgICAgIHJlcXVlc3RlZEJ5OiBjb250ZXh0LnJlcXVlc3RlZEJ5LFxuICAgICAgICAgICAgICBzb3VyY2U6ICdzb3VuZGNsb3VkJyxcbiAgICAgICAgICAgICAgZW5naW5lOiB0cmFja0luZm8sXG4gICAgICAgICAgICAgIHF1ZXJ5VHlwZTogJ3NvdW5kY2xvdWRUcmFjaycsXG4gICAgICAgICAgICAgIG1ldGFkYXRhOiB0cmFja0luZm8sXG4gICAgICAgICAgICAgIHJlcXVlc3RNZXRhZGF0YTogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cmFja0luZm87XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0cmFjay5leHRyYWN0b3IgPSB0aGlzO1xuXG4gICAgICAgICAgICByZXNvbHZlZFRyYWNrcy5wdXNoKHRyYWNrKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4geyBwbGF5bGlzdDogbnVsbCwgdHJhY2tzOiByZXNvbHZlZFRyYWNrcyB9O1xuICAgICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGVtcHR5UmVzcG9uc2UoKTogRXh0cmFjdG9ySW5mbyB7XG4gICAgcmV0dXJuIHsgcGxheWxpc3Q6IG51bGwsIHRyYWNrczogW10gfTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBzdHJlYW0oaW5mbzogVHJhY2spIHtcbiAgICBjb25zdCB1cmwgPSBhd2FpdCB0aGlzLmludGVybmFsLnV0aWwuc3RyZWFtTGluayhpbmZvLnVybCkuY2F0Y2goVXRpbC5ub29wKTtcbiAgICBpZiAoIXVybCkgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgZXh0cmFjdCBzdHJlYW0gZnJvbSB0aGlzIHRyYWNrIHNvdXJjZScpO1xuXG4gICAgcmV0dXJuIHVybDtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBicmlkZ2UodHJhY2s6IFRyYWNrLCBzb3VyY2VFeHRyYWN0b3I6IEJhc2VFeHRyYWN0b3IgfCBudWxsKTogUHJvbWlzZTxFeHRyYWN0b3JTdHJlYW1hYmxlIHwgbnVsbD4ge1xuICAgIGlmIChzb3VyY2VFeHRyYWN0b3I/LmlkZW50aWZpZXIgPT09IHRoaXMuaWRlbnRpZmllcikge1xuICAgICAgcmV0dXJuIHRoaXMuc3RyZWFtKHRyYWNrKTtcbiAgICB9XG5cbiAgICBjb25zdCBxdWVyeSA9IHNvdXJjZUV4dHJhY3Rvcj8uY3JlYXRlQnJpZGdlUXVlcnkodHJhY2spID8/IGAke3RyYWNrLmF1dGhvcn0gLSAke3RyYWNrLnRpdGxlfWA7XG5cbiAgICBjb25zdCBpbmZvID0gYXdhaXQgdGhpcy5oYW5kbGUocXVlcnksIHtcbiAgICAgIHJlcXVlc3RlZEJ5OiB0cmFjay5yZXF1ZXN0ZWRCeSxcbiAgICAgIHR5cGU6IFF1ZXJ5VHlwZS5TT1VORENMT1VEX1NFQVJDSFxuICAgIH0pO1xuXG4gICAgaWYgKCFpbmZvLnRyYWNrcy5sZW5ndGgpIHJldHVybiBudWxsO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5zdHJlYW0oaW5mby50cmFja3NbMF0pO1xuXG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgdHJhY2suYnJpZGdlZFRyYWNrID0gaW5mby50cmFja3NbMF07XG4gICAgICB0cmFjay5icmlkZ2VkRXh0cmFjdG9yID0gdGhpcztcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59IiwgImltcG9ydCB7IEJhc2VFeHRyYWN0b3IsIFRyYWNrIH0gZnJvbSAnZGlzY29yZC1wbGF5ZXInO1xuaW1wb3J0IHsgU291bmRDbG91ZEV4dHJhY3RvciB9IGZyb20gJy4uL2V4dHJhY3RvcnMvU291bmRDbG91ZEV4dHJhY3Rvcic7XG5pbXBvcnQgdW5mZXRjaCBmcm9tICdpc29tb3JwaGljLXVuZmV0Y2gnO1xuaW1wb3J0IHR5cGUgKiBhcyBTb3VuZENsb3VkIGZyb20gJ3NvdW5kY2xvdWQudHMnO1xuXG5leHBvcnQgY29uc3QgVUEgPVxuJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMDkuMC4wLjAgU2FmYXJpLzUzNy4zNiBFZGcvMTA5LjAuMTUxOC40OSc7XG5leHBvcnQgY29uc3QgZmV0Y2ggPSB1bmZldGNoO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWFrZVNDU2VhcmNoKHF1ZXJ5OiBzdHJpbmcpIHtcbiAgY29uc3QgeyBpbnN0YW5jZSB9ID0gU291bmRDbG91ZEV4dHJhY3RvcjtcbiAgaWYgKCFpbnN0YW5jZT8uaW50ZXJuYWwpIHJldHVybiBbXTtcblxuICBsZXQgZGF0YTogU291bmRDbG91ZC5Tb3VuZGNsb3VkVHJhY2tWMltdO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgaW5mbyA9IGF3YWl0IGluc3RhbmNlLmludGVybmFsLnRyYWNrcy5zZWFyY2hWMih7XG4gICAgICBxOiBxdWVyeSxcbiAgICAgIGxpbWl0OiA1XG4gICAgfSk7XG5cbiAgICBkYXRhID0gaW5mby5jb2xsZWN0aW9uO1xuICB9IGNhdGNoIHtcbiAgICAvLyBmYWxsYmFja1xuICAgIGNvbnN0IGluZm8gPSBhd2FpdCBpbnN0YW5jZS5pbnRlcm5hbC50cmFja3Muc2VhcmNoQWx0KHF1ZXJ5KTtcblxuICAgIGRhdGEgPSBpbmZvO1xuICB9XG5cbiAgcmV0dXJuIGZpbHRlclNvdW5kQ2xvdWRQcmV2aWV3cyhkYXRhKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHB1bGxTQ01ldGFkYXRhKGV4dDogQmFzZUV4dHJhY3RvciwgaW5mbzogVHJhY2spIHtcbiAgY29uc3QgbWV0YSA9IGF3YWl0IG1ha2VTQ1NlYXJjaChleHQuY3JlYXRlQnJpZGdlUXVlcnkoaW5mbykpLlxuICB0aGVuKChyKSA9PiByWzBdKS5cbiAgY2F0Y2goKCkgPT4gbnVsbCk7XG5cbiAgcmV0dXJuIG1ldGE7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJTb3VuZENsb3VkUHJldmlld3ModHJhY2tzOiBTb3VuZENsb3VkLlNvdW5kY2xvdWRUcmFja1YyW10pOiBTb3VuZENsb3VkLlNvdW5kY2xvdWRUcmFja1YyW10ge1xuICBjb25zdCBmaWx0ZXJlZCA9IHRyYWNrcy5maWx0ZXIoKHQpID0+IHtcbiAgICBpZiAodHlwZW9mIHQucG9saWN5ID09PSAnc3RyaW5nJykgcmV0dXJuIHQucG9saWN5LnRvVXBwZXJDYXNlKCkgPT09ICdBTExPVyc7XG4gICAgcmV0dXJuICEodC5kdXJhdGlvbiA9PT0gMzBfMDAwICYmIHQuZnVsbF9kdXJhdGlvbiA+IDMwXzAwMCk7XG4gIH0pO1xuXG4gIGNvbnN0IHJlc3VsdCA9IGZpbHRlcmVkLmxlbmd0aCA+IDAgPyBmaWx0ZXJlZCA6IHRyYWNrcztcblxuICByZXR1cm4gcmVzdWx0O1xufSIsICJleHBvcnQgZnVuY3Rpb24gbHlyaWNzRXh0cmFjdG9yKCkge1xuICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgJ0xlZ2FjeSBseXJpY3MgZXh0cmFjdG9yIGhhcyBiZWVuIHJlbW92ZWQuIFBsZWFzZSB1c2UgdGhlIG5ldyBseXJpY3MgYXBpIGZyb20gYHBsYXllci5seXJpY3NgIGluc3RlYWQuIEl0IG9mZmVycyBtb3JlIGFjY3VyYXRlIHJlc3VsdCBhbmQgZmVhdHVyZXMgbGlrZSBwbGFpbiBseXJpY3MgYW5kIHN5bmNlZCBseXJpY3MuJ1xuICApO1xufSIsICIvLyBwcmV0dGllci1pZ25vcmVcbmltcG9ydCB7XG4gIEJhc2VFeHRyYWN0b3IsXG4gIEV4dHJhY3RvckluZm8sXG4gIEV4dHJhY3RvclNlYXJjaENvbnRleHQsXG4gIFF1ZXJ5VHlwZSxcbiAgU2VhcmNoUXVlcnlUeXBlLFxuICBUcmFjayxcbiAgVXRpbCB9IGZyb21cbidkaXNjb3JkLXBsYXllcic7XG5pbXBvcnQgeyBWaW1lbyB9IGZyb20gJy4uL2ludGVybmFsL1ZpbWVvJztcblxuZXhwb3J0IGNsYXNzIFZpbWVvRXh0cmFjdG9yIGV4dGVuZHMgQmFzZUV4dHJhY3RvciB7XG4gIHB1YmxpYyBzdGF0aWMgaWRlbnRpZmllciA9ICdjb20uZGlzY29yZC1wbGF5ZXIudmltZW9leHRyYWN0b3InIGFzIGNvbnN0O1xuXG4gIHB1YmxpYyBhc3luYyB2YWxpZGF0ZShxdWVyeTogc3RyaW5nLCB0eXBlPzogU2VhcmNoUXVlcnlUeXBlIHwgbnVsbCB8IHVuZGVmaW5lZCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGlmICh0eXBlb2YgcXVlcnkgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIChbUXVlcnlUeXBlLlZJTUVPXSBhcyBTZWFyY2hRdWVyeVR5cGVbXSkuc29tZSgocikgPT4gciA9PT0gdHlwZSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0UmVsYXRlZFRyYWNrcyh0cmFjazogVHJhY2spIHtcbiAgICB2b2lkIHRyYWNrO1xuICAgIHJldHVybiB0aGlzLmNyZWF0ZVJlc3BvbnNlKCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgaGFuZGxlKHF1ZXJ5OiBzdHJpbmcsIGNvbnRleHQ6IEV4dHJhY3RvclNlYXJjaENvbnRleHQpOiBQcm9taXNlPEV4dHJhY3RvckluZm8+IHtcbiAgICBzd2l0Y2ggKGNvbnRleHQudHlwZSkge1xuICAgICAgY2FzZSBRdWVyeVR5cGUuVklNRU86e1xuICAgICAgICAgIGNvbnN0IHRyYWNrSW5mbyA9IGF3YWl0IFZpbWVvLmdldEluZm8oXG4gICAgICAgICAgICBxdWVyeS5cbiAgICAgICAgICAgIHNwbGl0KCcvJykuXG4gICAgICAgICAgICBmaWx0ZXIoKHgpID0+ICEheCkuXG4gICAgICAgICAgICBwb3AoKSFcbiAgICAgICAgICApLmNhdGNoKFV0aWwubm9vcCk7XG5cbiAgICAgICAgICBpZiAoIXRyYWNrSW5mbykgcmV0dXJuIHRoaXMuZW1wdHlSZXNwb25zZSgpO1xuXG4gICAgICAgICAgY29uc3QgdHJhY2sgPSBuZXcgVHJhY2sodGhpcy5jb250ZXh0LnBsYXllciwge1xuICAgICAgICAgICAgdGl0bGU6IHRyYWNrSW5mby50aXRsZSxcbiAgICAgICAgICAgIHVybDogdHJhY2tJbmZvLnVybCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBVdGlsLmJ1aWxkVGltZUNvZGUoVXRpbC5wYXJzZU1TKHRyYWNrSW5mby5kdXJhdGlvbiB8fCAwKSksXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogYCR7dHJhY2tJbmZvLnRpdGxlfSBieSAke3RyYWNrSW5mby5hdXRob3IubmFtZX1gLFxuICAgICAgICAgICAgdGh1bWJuYWlsOiB0cmFja0luZm8udGh1bWJuYWlsLFxuICAgICAgICAgICAgdmlld3M6IDAsXG4gICAgICAgICAgICBhdXRob3I6IHRyYWNrSW5mby5hdXRob3IubmFtZSxcbiAgICAgICAgICAgIHJlcXVlc3RlZEJ5OiBjb250ZXh0LnJlcXVlc3RlZEJ5LFxuICAgICAgICAgICAgc291cmNlOiAnYXJiaXRyYXJ5JyxcbiAgICAgICAgICAgIGVuZ2luZTogdHJhY2tJbmZvLnN0cmVhbSxcbiAgICAgICAgICAgIHF1ZXJ5VHlwZTogY29udGV4dC50eXBlLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHRyYWNrSW5mbyxcbiAgICAgICAgICAgIGFzeW5jIHJlcXVlc3RNZXRhZGF0YSgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRyYWNrSW5mbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHRyYWNrLmV4dHJhY3RvciA9IHRoaXM7XG5cbiAgICAgICAgICByZXR1cm4geyBwbGF5bGlzdDogbnVsbCwgdHJhY2tzOiBbdHJhY2tdIH07XG4gICAgICAgIH1cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB0aGlzLmVtcHR5UmVzcG9uc2UoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZW1wdHlSZXNwb25zZSgpOiBFeHRyYWN0b3JJbmZvIHtcbiAgICByZXR1cm4geyBwbGF5bGlzdDogbnVsbCwgdHJhY2tzOiBbXSB9O1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHN0cmVhbShpbmZvOiBUcmFjaykge1xuICAgIGNvbnN0IGVuZ2luZSA9IGluZm8ucmF3LmVuZ2luZSBhcyBzdHJpbmc7XG4gICAgaWYgKGVuZ2luZSkge1xuICAgICAgcmV0dXJuIGVuZ2luZTtcbiAgICB9XG5cbiAgICBjb25zdCB0cmFjayA9IGF3YWl0IFZpbWVvLmdldEluZm8oaW5mby51cmwpLmNhdGNoKFV0aWwubm9vcCk7XG4gICAgaWYgKCF0cmFjayB8fCAhdHJhY2suc3RyZWFtKSB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBleHRyYWN0IHN0cmVhbSBmcm9tIHRoaXMgc291cmNlJyk7XG5cbiAgICBpbmZvLnJhdy5lbmdpbmUgPSB7XG4gICAgICBzdHJlYW1VUkw6IHRyYWNrLnN0cmVhbVxuICAgIH07XG5cbiAgICByZXR1cm4gdHJhY2suc3RyZWFtO1xuICB9XG59IiwgImltcG9ydCB7IFJlYWRhYmxlIH0gZnJvbSAnc3RyZWFtJztcbmltcG9ydCBodHRwIGZyb20gJ2h0dHAnO1xuaW1wb3J0IGh0dHBzIGZyb20gJ2h0dHBzJztcbmltcG9ydCB7IGZldGNoIH0gZnJvbSAnLi9oZWxwZXInO1xuXG5jbGFzcyBWaW1lbyB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgVGhlICR7dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfSBjbGFzcyBtYXkgbm90IGJlIGluc3RhbnRpYXRlZCFgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZWRlZiB7UmVhZGFibGV9IFJlYWRhYmxlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBEb3dubG9hZHMgZnJvbSB2aW1lb1xuICAgKiBAcGFyYW0ge251bWJlcn0gaWQgVmltZW8gdmlkZW8gaWRcbiAgICogQHJldHVybnMge1Byb21pc2U8UmVhZGFibGU+fVxuICAgKi9cbiAgc3RhdGljIGRvd25sb2FkKGlkOiBudW1iZXIgfCBzdHJpbmcpOiBQcm9taXNlPFJlYWRhYmxlPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlKSA9PiB7XG4gICAgICBjb25zdCBpbmZvID0gYXdhaXQgVmltZW8uZ2V0SW5mbyhpZCk7XG4gICAgICBpZiAoIWluZm8pIHJldHVybiBudWxsO1xuXG4gICAgICBjb25zdCBkb3dubG9hZGVyID0gaW5mby5zdHJlYW0uc3RhcnRzV2l0aCgnaHR0cHM6Ly8nKSA/IGh0dHBzIDogaHR0cDtcblxuICAgICAgZG93bmxvYWRlci5nZXQoaW5mby5zdHJlYW0sIChyZXMpID0+IHtcbiAgICAgICAgcmVzb2x2ZShyZXMpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB2aWRlbyBpbmZvXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpZCBWaWRlbyBpZFxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGdldEluZm8oaWQ6IG51bWJlciB8IHN0cmluZyk6IFByb21pc2U8VmltZW9JbmZvIHwgbnVsbD4ge1xuICAgIGlmICghaWQpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBpZCcpO1xuICAgIGNvbnN0IHVybCA9IGBodHRwczovL3BsYXllci52aW1lby5jb20vdmlkZW8vJHtpZH1gO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLnRleHQoKTtcbiAgICAgIGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKGRhdGEuc3BsaXQoJ3dpbmRvdy5wbGF5ZXJDb25maWcgPScpWzFdLnNwbGl0KCc7JylbMF0udHJpbSgpKTtcblxuICAgICAgY29uc3Qgb2JqID0ge1xuICAgICAgICBpZDoganNvbi52aWRlby5pZCxcbiAgICAgICAgZHVyYXRpb246IGpzb24udmlkZW8uZHVyYXRpb24gKiAxMDAwLFxuICAgICAgICB0aXRsZToganNvbi52aWRlby50aXRsZSxcbiAgICAgICAgdXJsOiBqc29uLnZpZGVvLnVybCxcbiAgICAgICAgdGh1bWJuYWlsOiBqc29uLnZpZGVvLnRodW1ic1snMTI4MCddIHx8IGpzb24udmlkZW8udGh1bWJzLmJhc2UsXG4gICAgICAgIHN0cmVhbToganNvbi5yZXF1ZXN0LmZpbGVzLnByb2dyZXNzaXZlWzBdLnVybCxcbiAgICAgICAgYXV0aG9yOiB7XG4gICAgICAgICAgaWQ6IGpzb24udmlkZW8ub3duZXIuaWQsXG4gICAgICAgICAgbmFtZToganNvbi52aWRlby5vd25lci5uYW1lLFxuICAgICAgICAgIHVybDoganNvbi52aWRlby5vd25lci51cmwsXG4gICAgICAgICAgYXZhdGFyOiBqc29uLnZpZGVvLm93bmVyLmltZ18yeCB8fCBqc29uLnZpZGVvLm93bmVyLmltZ1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gb2JqO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmltZW9JbmZvIHtcbiAgaWQ6IG51bWJlcjtcbiAgZHVyYXRpb246IG51bWJlcjtcbiAgdGl0bGU6IHN0cmluZztcbiAgdXJsOiBzdHJpbmc7XG4gIHRodW1ibmFpbDogc3RyaW5nO1xuICBzdHJlYW06IHN0cmluZztcbiAgYXV0aG9yOiB7XG4gICAgaWQ6IG51bWJlcjtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgdXJsOiBzdHJpbmc7XG4gICAgYXZhdGFyOiBzdHJpbmc7XG4gIH07XG59XG5cbmV4cG9ydCB7IFZpbWVvIH07IiwgIi8vIHByZXR0aWVyLWlnbm9yZVxuaW1wb3J0IHtcbiAgQmFzZUV4dHJhY3RvcixcbiAgRXh0cmFjdG9ySW5mbyxcbiAgRXh0cmFjdG9yU2VhcmNoQ29udGV4dCxcbiAgUXVlcnlUeXBlLFxuICBTZWFyY2hRdWVyeVR5cGUsXG4gIFRyYWNrLFxuICBVdGlsIH0gZnJvbVxuJ2Rpc2NvcmQtcGxheWVyJztcbmltcG9ydCByZXZlcmJuYXRpb24gZnJvbSAncmV2ZXJibmF0aW9uLXNjcmFwZXInO1xuXG5leHBvcnQgY2xhc3MgUmV2ZXJibmF0aW9uRXh0cmFjdG9yIGV4dGVuZHMgQmFzZUV4dHJhY3RvciB7XG4gIHB1YmxpYyBzdGF0aWMgaWRlbnRpZmllciA9ICdjb20uZGlzY29yZC1wbGF5ZXIucmV2ZXJibmF0aW9uZXh0cmFjdG9yJyBhcyBjb25zdDtcblxuICBwdWJsaWMgYXN5bmMgdmFsaWRhdGUocXVlcnk6IHN0cmluZywgdHlwZT86IFNlYXJjaFF1ZXJ5VHlwZSB8IG51bGwgfCB1bmRlZmluZWQpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBpZiAodHlwZW9mIHF1ZXJ5ICE9PSAnc3RyaW5nJykgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiAoW1F1ZXJ5VHlwZS5SRVZFUkJOQVRJT05dIGFzIFNlYXJjaFF1ZXJ5VHlwZVtdKS5zb21lKChyKSA9PiByID09PSB0eXBlKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRSZWxhdGVkVHJhY2tzKHRyYWNrOiBUcmFjaykge1xuICAgIHZvaWQgdHJhY2s7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlUmVzcG9uc2UoKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBoYW5kbGUocXVlcnk6IHN0cmluZywgY29udGV4dDogRXh0cmFjdG9yU2VhcmNoQ29udGV4dCk6IFByb21pc2U8RXh0cmFjdG9ySW5mbz4ge1xuICAgIHN3aXRjaCAoY29udGV4dC50eXBlKSB7XG4gICAgICBjYXNlIFF1ZXJ5VHlwZS5SRVZFUkJOQVRJT046e1xuICAgICAgICAgIGNvbnN0IHRyYWNrSW5mbyA9IGF3YWl0IHJldmVyYm5hdGlvbi5nZXRJbmZvKHF1ZXJ5KS5jYXRjaChVdGlsLm5vb3ApO1xuXG4gICAgICAgICAgaWYgKCF0cmFja0luZm8pIHJldHVybiB0aGlzLmVtcHR5UmVzcG9uc2UoKTtcblxuICAgICAgICAgIGNvbnN0IHRyYWNrID0gbmV3IFRyYWNrKHRoaXMuY29udGV4dC5wbGF5ZXIsIHtcbiAgICAgICAgICAgIHRpdGxlOiB0cmFja0luZm8udGl0bGUsXG4gICAgICAgICAgICB1cmw6IHRyYWNrSW5mby51cmwsXG4gICAgICAgICAgICBkdXJhdGlvbjogVXRpbC5idWlsZFRpbWVDb2RlKFV0aWwucGFyc2VNUyh0cmFja0luZm8uZHVyYXRpb24pKSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0cmFja0luZm8ubHlyaWNzIHx8IGAke3RyYWNrSW5mby50aXRsZX0gYnkgJHt0cmFja0luZm8uYXJ0aXN0Lm5hbWV9YCxcbiAgICAgICAgICAgIHRodW1ibmFpbDogdHJhY2tJbmZvLnRodW1ibmFpbCxcbiAgICAgICAgICAgIHZpZXdzOiAwLFxuICAgICAgICAgICAgYXV0aG9yOiB0cmFja0luZm8uYXJ0aXN0Lm5hbWUsXG4gICAgICAgICAgICByZXF1ZXN0ZWRCeTogY29udGV4dC5yZXF1ZXN0ZWRCeSxcbiAgICAgICAgICAgIHNvdXJjZTogJ2FyYml0cmFyeScsXG4gICAgICAgICAgICBlbmdpbmU6IHRyYWNrSW5mby5zdHJlYW1VUkwsXG4gICAgICAgICAgICBxdWVyeVR5cGU6IGNvbnRleHQudHlwZSxcbiAgICAgICAgICAgIG1ldGFkYXRhOiB0cmFja0luZm8sXG4gICAgICAgICAgICBhc3luYyByZXF1ZXN0TWV0YWRhdGEoKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0cmFja0luZm87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICB0cmFjay5leHRyYWN0b3IgPSB0aGlzO1xuXG4gICAgICAgICAgcmV0dXJuIHsgcGxheWxpc3Q6IG51bGwsIHRyYWNrczogW3RyYWNrXSB9O1xuICAgICAgICB9XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdGhpcy5lbXB0eVJlc3BvbnNlKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGVtcHR5UmVzcG9uc2UoKTogRXh0cmFjdG9ySW5mbyB7XG4gICAgcmV0dXJuIHsgcGxheWxpc3Q6IG51bGwsIHRyYWNrczogW10gfTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBzdHJlYW0oaW5mbzogVHJhY2spIHtcbiAgICBjb25zdCBlbmdpbmUgPSBpbmZvLnJhdy5lbmdpbmUgYXMgc3RyaW5nO1xuICAgIGlmIChlbmdpbmUpIHtcbiAgICAgIHJldHVybiBlbmdpbmU7XG4gICAgfVxuXG4gICAgY29uc3QgdHJhY2sgPSBhd2FpdCByZXZlcmJuYXRpb24uZ2V0SW5mbyhpbmZvLnVybCkuY2F0Y2goVXRpbC5ub29wKTtcbiAgICBpZiAoIXRyYWNrIHx8ICF0cmFjay5zdHJlYW1VUkwpIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGV4dHJhY3Qgc3RyZWFtIGZyb20gdGhpcyBzb3VyY2UnKTtcblxuICAgIGluZm8ucmF3LmVuZ2luZSA9IHtcbiAgICAgIHN0cmVhbVVSTDogdHJhY2suc3RyZWFtVVJMXG4gICAgfTtcblxuICAgIHJldHVybiB0cmFjay5zdHJlYW1VUkw7XG4gIH1cbn0iLCAiLy8gcHJldHRpZXItaWdub3JlXG5pbXBvcnQge1xuICBCYXNlRXh0cmFjdG9yLFxuICBFeHRyYWN0b3JJbmZvLFxuICBFeHRyYWN0b3JTZWFyY2hDb250ZXh0LFxuICBRdWVyeVR5cGUsXG4gIFNlYXJjaFF1ZXJ5VHlwZSxcbiAgVHJhY2ssXG4gIFV0aWwgfSBmcm9tXG4nZGlzY29yZC1wbGF5ZXInO1xuaW1wb3J0IHR5cGUgeyBJbmNvbWluZ01lc3NhZ2UgfSBmcm9tICdodHRwJztcbmltcG9ydCB7IGNyZWF0ZVJlYWRTdHJlYW0sIGV4aXN0c1N5bmMgfSBmcm9tICdmcyc7XG5pbXBvcnQgeyBkb3dubG9hZFN0cmVhbSB9IGZyb20gJy4uL2ludGVybmFsL2Rvd25sb2FkZXInO1xuaW1wb3J0ICogYXMgZmlsZVR5cGUgZnJvbSAnZmlsZS10eXBlJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgc3RhdCB9IGZyb20gJ2ZzL3Byb21pc2VzJztcblxuY29uc3QgQVRUQUNITUVOVF9IRUFERVIgPSBbJ2F1ZGlvLycsICd2aWRlby8nLCAnYXBwbGljYXRpb24vb2dnJ10gYXMgY29uc3Q7XG5cbmV4cG9ydCBjbGFzcyBBdHRhY2htZW50RXh0cmFjdG9yIGV4dGVuZHMgQmFzZUV4dHJhY3RvciB7XG4gIHB1YmxpYyBzdGF0aWMgaWRlbnRpZmllciA9ICdjb20uZGlzY29yZC1wbGF5ZXIuYXR0YWNobWVudGV4dHJhY3RvcicgYXMgY29uc3Q7XG5cbiAgLy8gdXNlIGxvd2VzdCBwcmlvcml0eSB0byBhdm9pZCBjb25mbGljdCB3aXRoIG90aGVyIGV4dHJhY3RvcnNcbiAgcHVibGljIHByaW9yaXR5ID0gMDtcblxuICBwdWJsaWMgYXN5bmMgdmFsaWRhdGUocXVlcnk6IHN0cmluZywgdHlwZT86IFNlYXJjaFF1ZXJ5VHlwZSB8IG51bGwgfCB1bmRlZmluZWQpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBpZiAodHlwZW9mIHF1ZXJ5ICE9PSAnc3RyaW5nJykgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiAoW1F1ZXJ5VHlwZS5BUkJJVFJBUlksIFF1ZXJ5VHlwZS5GSUxFXSBhcyBTZWFyY2hRdWVyeVR5cGVbXSkuc29tZSgocikgPT4gciA9PT0gdHlwZSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0UmVsYXRlZFRyYWNrcyh0cmFjazogVHJhY2spIHtcbiAgICB2b2lkIHRyYWNrO1xuICAgIHJldHVybiB0aGlzLmNyZWF0ZVJlc3BvbnNlKCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgaGFuZGxlKHF1ZXJ5OiBzdHJpbmcsIGNvbnRleHQ6IEV4dHJhY3RvclNlYXJjaENvbnRleHQpOiBQcm9taXNlPEV4dHJhY3RvckluZm8+IHtcbiAgICBzd2l0Y2ggKGNvbnRleHQudHlwZSkge1xuICAgICAgY2FzZSBRdWVyeVR5cGUuQVJCSVRSQVJZOntcbiAgICAgICAgICBjb25zdCBkYXRhID0gKGF3YWl0IGRvd25sb2FkU3RyZWFtKHF1ZXJ5LCBjb250ZXh0LnJlcXVlc3RPcHRpb25zKSkgYXMgSW5jb21pbmdNZXNzYWdlO1xuICAgICAgICAgIGlmICghQVRUQUNITUVOVF9IRUFERVIuc29tZSgocikgPT4gISFkYXRhLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddPy5zdGFydHNXaXRoKHIpKSkgcmV0dXJuIHRoaXMuZW1wdHlSZXNwb25zZSgpO1xuXG4gICAgICAgICAgY29uc3QgdHJhY2tJbmZvID0ge1xuICAgICAgICAgICAgdGl0bGU6IChcbiAgICAgICAgICAgIHF1ZXJ5LlxuICAgICAgICAgICAgc3BsaXQoJy8nKS5cbiAgICAgICAgICAgIGZpbHRlcigoeCkgPT4geC5sZW5ndGgpLlxuICAgICAgICAgICAgcG9wKCkgPz8gJ0F0dGFjaG1lbnQnKS5cblxuICAgICAgICAgICAgc3BsaXQoJz8nKVswXS5cbiAgICAgICAgICAgIHRyaW0oKSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgICAgdGh1bWJuYWlsOiAnaHR0cHM6Ly91cGxvYWQud2lraW1lZGlhLm9yZy93aWtpcGVkaWEvY29tbW9ucy8yLzJhL0lUdW5lc18xMi4yX2xvZ28ucG5nJyxcbiAgICAgICAgICAgIGVuZ2luZTogcXVlcnksXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgICAgIGF1dGhvcjogKGRhdGEgYXMgYW55KS5jbGllbnQ/LnNlcnZlcm5hbWUgYXMgc3RyaW5nIHx8ICdBdHRhY2htZW50JyxcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICAgICAgZGVzY3JpcHRpb246IChkYXRhIGFzIGFueSkuY2xpZW50Py5zZXJ2ZXJuYW1lIGFzIHN0cmluZyB8fCAnQXR0YWNobWVudCcsXG4gICAgICAgICAgICB1cmw6IGRhdGEudXJsIHx8IHF1ZXJ5XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgICAgIGNvbnN0IG1lZGlhcGxleCA9IHJlcXVpcmUoJ21lZGlhcGxleCcpIGFzIHR5cGVvZiBpbXBvcnQoJ21lZGlhcGxleCcpO1xuICAgICAgICAgICAgY29uc3QgdGltZW91dCA9IHRoaXMuY29udGV4dC5wbGF5ZXIub3B0aW9ucy5wcm9iZVRpbWVvdXQgPz8gNTAwMDtcblxuICAgICAgICAgICAgY29uc3QgeyByZXN1bHQsIHN0cmVhbSB9ID0gKGF3YWl0IFByb21pc2UucmFjZShbXG4gICAgICAgICAgICBtZWRpYXBsZXgucHJvYmVTdHJlYW0oZGF0YSksXG4gICAgICAgICAgICBuZXcgUHJvbWlzZSgoXywgcikgPT4ge1xuICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHIobmV3IEVycm9yKCdUaW1lb3V0JykpLCB0aW1lb3V0KTtcbiAgICAgICAgICAgIH0pXVxuICAgICAgICAgICAgKSkgYXMgQXdhaXRlZDxSZXR1cm5UeXBlPHR5cGVvZiBtZWRpYXBsZXgucHJvYmVTdHJlYW0+PjtcblxuICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICB0cmFja0luZm8uZHVyYXRpb24gPSByZXN1bHQuZHVyYXRpb24gKiAxMDAwO1xuXG4gICAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gbWVkaWFwbGV4LnJlYWRNZXRhZGF0YShyZXN1bHQpO1xuICAgICAgICAgICAgICBpZiAobWV0YWRhdGEuYXV0aG9yKSB0cmFja0luZm8uYXV0aG9yID0gbWV0YWRhdGEuYXV0aG9yO1xuICAgICAgICAgICAgICBpZiAobWV0YWRhdGEudGl0bGUpIHRyYWNrSW5mby50aXRsZSA9IG1ldGFkYXRhLnRpdGxlO1xuXG4gICAgICAgICAgICAgIHRyYWNrSW5mby5kZXNjcmlwdGlvbiA9IGAke3RyYWNrSW5mby50aXRsZX0gYnkgJHt0cmFja0luZm8uYXV0aG9yfWA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN0cmVhbS5kZXN0cm95KCk7XG4gICAgICAgICAgfSBjYXRjaCB7XG5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHRyYWNrID0gbmV3IFRyYWNrKHRoaXMuY29udGV4dC5wbGF5ZXIsIHtcbiAgICAgICAgICAgIHRpdGxlOiB0cmFja0luZm8udGl0bGUsXG4gICAgICAgICAgICB1cmw6IHRyYWNrSW5mby51cmwsXG4gICAgICAgICAgICBkdXJhdGlvbjogVXRpbC5idWlsZFRpbWVDb2RlKFV0aWwucGFyc2VNUyh0cmFja0luZm8uZHVyYXRpb24pKSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0cmFja0luZm8uZGVzY3JpcHRpb24sXG4gICAgICAgICAgICB0aHVtYm5haWw6IHRyYWNrSW5mby50aHVtYm5haWwsXG4gICAgICAgICAgICB2aWV3czogMCxcbiAgICAgICAgICAgIGF1dGhvcjogdHJhY2tJbmZvLmF1dGhvcixcbiAgICAgICAgICAgIHJlcXVlc3RlZEJ5OiBjb250ZXh0LnJlcXVlc3RlZEJ5LFxuICAgICAgICAgICAgc291cmNlOiAnYXJiaXRyYXJ5JyxcbiAgICAgICAgICAgIGVuZ2luZTogdHJhY2tJbmZvLnVybCxcbiAgICAgICAgICAgIHF1ZXJ5VHlwZTogY29udGV4dC50eXBlLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHRyYWNrSW5mbyxcbiAgICAgICAgICAgIGFzeW5jIHJlcXVlc3RNZXRhZGF0YSgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRyYWNrSW5mbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHRyYWNrLmV4dHJhY3RvciA9IHRoaXM7XG5cbiAgICAgICAgICB0cmFjay5yYXcuaXNGaWxlID0gZmFsc2U7XG5cbiAgICAgICAgICByZXR1cm4geyBwbGF5bGlzdDogbnVsbCwgdHJhY2tzOiBbdHJhY2tdIH07XG4gICAgICAgIH1cbiAgICAgIGNhc2UgUXVlcnlUeXBlLkZJTEU6e1xuICAgICAgICAgIGlmICghZXhpc3RzU3luYyhxdWVyeSkpIHJldHVybiB0aGlzLmVtcHR5UmVzcG9uc2UoKTtcbiAgICAgICAgICBjb25zdCBmc3RhdCA9IGF3YWl0IHN0YXQocXVlcnkpO1xuICAgICAgICAgIGlmICghZnN0YXQuaXNGaWxlKCkpIHJldHVybiB0aGlzLmVtcHR5UmVzcG9uc2UoKTtcbiAgICAgICAgICBjb25zdCBtaW1lID0gYXdhaXQgZmlsZVR5cGUuZnJvbUZpbGUocXVlcnkpLmNhdGNoKCgpID0+IG51bGwpO1xuICAgICAgICAgIGlmICghbWltZSB8fCAhQVRUQUNITUVOVF9IRUFERVIuc29tZSgocikgPT4gISFtaW1lLm1pbWUuc3RhcnRzV2l0aChyKSkpIHJldHVybiB0aGlzLmVtcHR5UmVzcG9uc2UoKTtcblxuICAgICAgICAgIGNvbnN0IHRyYWNrSW5mbyA9IHtcbiAgICAgICAgICAgIHRpdGxlOiBwYXRoLmJhc2VuYW1lKHF1ZXJ5KSB8fCAnQXR0YWNobWVudCcsXG4gICAgICAgICAgICBkdXJhdGlvbjogMCxcbiAgICAgICAgICAgIHRodW1ibmFpbDogJ2h0dHBzOi8vdXBsb2FkLndpa2ltZWRpYS5vcmcvd2lraXBlZGlhL2NvbW1vbnMvMi8yYS9JVHVuZXNfMTIuMl9sb2dvLnBuZycsXG4gICAgICAgICAgICBlbmdpbmU6IHF1ZXJ5LFxuICAgICAgICAgICAgYXV0aG9yOiAnQXR0YWNobWVudCcsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0F0dGFjaG1lbnQnLFxuICAgICAgICAgICAgdXJsOiBxdWVyeVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgICAgICBjb25zdCBtZWRpYXBsZXggPSByZXF1aXJlKCdtZWRpYXBsZXgnKSBhcyB0eXBlb2YgaW1wb3J0KCdtZWRpYXBsZXgnKTtcblxuICAgICAgICAgICAgY29uc3QgdGltZW91dCA9IHRoaXMuY29udGV4dC5wbGF5ZXIub3B0aW9ucy5wcm9iZVRpbWVvdXQgPz8gNTAwMDtcblxuICAgICAgICAgICAgY29uc3QgeyByZXN1bHQsIHN0cmVhbSB9ID0gKGF3YWl0IFByb21pc2UucmFjZShbXG4gICAgICAgICAgICBtZWRpYXBsZXgucHJvYmVTdHJlYW0oXG4gICAgICAgICAgICAgIGNyZWF0ZVJlYWRTdHJlYW0ocXVlcnksIHtcbiAgICAgICAgICAgICAgICBzdGFydDogMCxcbiAgICAgICAgICAgICAgICBlbmQ6IDEwMjQgKiAxMDI0ICogMTBcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBuZXcgUHJvbWlzZSgoXywgcikgPT4ge1xuICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHIobmV3IEVycm9yKCdUaW1lb3V0JykpLCB0aW1lb3V0KTtcbiAgICAgICAgICAgIH0pXVxuICAgICAgICAgICAgKSkgYXMgQXdhaXRlZDxSZXR1cm5UeXBlPHR5cGVvZiBtZWRpYXBsZXgucHJvYmVTdHJlYW0+PjtcblxuICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICB0cmFja0luZm8uZHVyYXRpb24gPSByZXN1bHQuZHVyYXRpb24gKiAxMDAwO1xuXG4gICAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gbWVkaWFwbGV4LnJlYWRNZXRhZGF0YShyZXN1bHQpO1xuICAgICAgICAgICAgICBpZiAobWV0YWRhdGEuYXV0aG9yKSB0cmFja0luZm8uYXV0aG9yID0gbWV0YWRhdGEuYXV0aG9yO1xuICAgICAgICAgICAgICBpZiAobWV0YWRhdGEudGl0bGUpIHRyYWNrSW5mby50aXRsZSA9IG1ldGFkYXRhLnRpdGxlO1xuXG4gICAgICAgICAgICAgIHRyYWNrSW5mby5kZXNjcmlwdGlvbiA9IGAke3RyYWNrSW5mby50aXRsZX0gYnkgJHt0cmFja0luZm8uYXV0aG9yfWA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN0cmVhbS5kZXN0cm95KCk7XG4gICAgICAgICAgfSBjYXRjaCB7XG5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHRyYWNrID0gbmV3IFRyYWNrKHRoaXMuY29udGV4dC5wbGF5ZXIsIHtcbiAgICAgICAgICAgIHRpdGxlOiB0cmFja0luZm8udGl0bGUsXG4gICAgICAgICAgICB1cmw6IHRyYWNrSW5mby51cmwsXG4gICAgICAgICAgICBkdXJhdGlvbjogVXRpbC5idWlsZFRpbWVDb2RlKFV0aWwucGFyc2VNUyh0cmFja0luZm8uZHVyYXRpb24pKSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0cmFja0luZm8uZGVzY3JpcHRpb24sXG4gICAgICAgICAgICB0aHVtYm5haWw6IHRyYWNrSW5mby50aHVtYm5haWwsXG4gICAgICAgICAgICB2aWV3czogMCxcbiAgICAgICAgICAgIGF1dGhvcjogdHJhY2tJbmZvLmF1dGhvcixcbiAgICAgICAgICAgIHJlcXVlc3RlZEJ5OiBjb250ZXh0LnJlcXVlc3RlZEJ5LFxuICAgICAgICAgICAgc291cmNlOiAnYXJiaXRyYXJ5JyxcbiAgICAgICAgICAgIGVuZ2luZTogdHJhY2tJbmZvLnVybCxcbiAgICAgICAgICAgIHF1ZXJ5VHlwZTogY29udGV4dC50eXBlLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHRyYWNrSW5mbyxcbiAgICAgICAgICAgIGFzeW5jIHJlcXVlc3RNZXRhZGF0YSgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRyYWNrSW5mbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHRyYWNrLmV4dHJhY3RvciA9IHRoaXM7XG5cbiAgICAgICAgICB0cmFjay5yYXcuaXNGaWxlID0gdHJ1ZTtcblxuICAgICAgICAgIHJldHVybiB7IHBsYXlsaXN0OiBudWxsLCB0cmFja3M6IFt0cmFja10gfTtcbiAgICAgICAgfVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHRoaXMuZW1wdHlSZXNwb25zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBlbXB0eVJlc3BvbnNlKCk6IEV4dHJhY3RvckluZm8ge1xuICAgIHJldHVybiB7IHBsYXlsaXN0OiBudWxsLCB0cmFja3M6IFtdIH07XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgc3RyZWFtKGluZm86IFRyYWNrKSB7XG4gICAgY29uc3QgZW5naW5lID0gaW5mby5yYXcuZW5naW5lIGFzIHN0cmluZztcblxuICAgIGNvbnN0IGlzRmlsZSA9IGluZm8ucmF3LmlzRmlsZSBhcyBib29sZWFuO1xuXG4gICAgaWYgKCFlbmdpbmUpIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGZpbmQgc3RyZWFtIHNvdXJjZScpO1xuXG4gICAgaWYgKCFpc0ZpbGUpIHtcbiAgICAgIHJldHVybiBlbmdpbmU7XG4gICAgICAvLyByZXR1cm4gYXdhaXQgZG93bmxvYWRTdHJlYW0oZW5naW5lKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY3JlYXRlUmVhZFN0cmVhbShlbmdpbmUpO1xuICB9XG59IiwgImltcG9ydCBodHRwLCB7IFJlcXVlc3RPcHRpb25zIH0gZnJvbSAnaHR0cCc7XG5pbXBvcnQgaHR0cHMgZnJvbSAnaHR0cHMnO1xuaW1wb3J0IHsgUmVhZGFibGUgfSBmcm9tICdzdHJlYW0nO1xuXG5leHBvcnQgZnVuY3Rpb24gZG93bmxvYWRTdHJlYW0odXJsOiBzdHJpbmcsIG9wdHM6IFJlcXVlc3RPcHRpb25zID0ge30pIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlPFJlYWRhYmxlPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgbGliID0gdXJsLnN0YXJ0c1dpdGgoJ2h0dHA6Ly8nKSA/IGh0dHAgOiBodHRwcztcblxuICAgIGxpYi5nZXQodXJsLCBvcHRzLCAocmVzKSA9PiByZXNvbHZlKHJlcykpLm9uY2UoJ2Vycm9yJywgcmVqZWN0KTtcbiAgfSk7XG59IiwgImltcG9ydCB7XG4gIEV4dHJhY3RvckluZm8sXG4gIEV4dHJhY3RvclNlYXJjaENvbnRleHQsXG4gIEV4dHJhY3RvclN0cmVhbWFibGUsXG4gIEd1aWxkUXVldWVIaXN0b3J5LFxuICBQbGF5bGlzdCxcbiAgUXVlcnlUeXBlLFxuICBTZWFyY2hRdWVyeVR5cGUsXG4gIFRyYWNrLFxuICBVdGlsLFxuICBCYXNlRXh0cmFjdG9yIH0gZnJvbVxuJ2Rpc2NvcmQtcGxheWVyJztcbmltcG9ydCB7IEFwcGxlTXVzaWMgfSBmcm9tICcuLi9pbnRlcm5hbCc7XG5pbXBvcnQgeyBSZWFkYWJsZSB9IGZyb20gJ3N0cmVhbSc7XG5pbXBvcnQgeyBTdHJlYW1GTiB9IGZyb20gJy4uL3R5cGVzL2NvbW1vbic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBwbGVNdXNpY0V4dHJhY3RvckluaXQge1xuICBjcmVhdGVTdHJlYW0/OiAoZXh0OiBBcHBsZU11c2ljRXh0cmFjdG9yLCB1cmw6IHN0cmluZywgdHJhY2s6IFRyYWNrKSA9PiBQcm9taXNlPFJlYWRhYmxlIHwgc3RyaW5nPjtcbn1cblxuZXhwb3J0IGNsYXNzIEFwcGxlTXVzaWNFeHRyYWN0b3IgZXh0ZW5kcyBCYXNlRXh0cmFjdG9yPEFwcGxlTXVzaWNFeHRyYWN0b3JJbml0PiB7XG4gIHB1YmxpYyBzdGF0aWMgaWRlbnRpZmllciA9ICdjb20uZGlzY29yZC1wbGF5ZXIuYXBwbGVtdXNpY2V4dHJhY3RvcicgYXMgY29uc3Q7XG4gIHByaXZhdGUgX3N0cmVhbSE6IFN0cmVhbUZOO1xuXG4gIHB1YmxpYyBhc3luYyBhY3RpdmF0ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLnByb3RvY29scyA9IFsnYW1zZWFyY2gnLCAnYXBwbGVtdXNpYyddO1xuICAgIGNvbnN0IGZuID0gdGhpcy5vcHRpb25zLmNyZWF0ZVN0cmVhbTtcblxuICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMuX3N0cmVhbSA9IChxOiBzdHJpbmcsIHQ6IFRyYWNrKSA9PiB7XG4gICAgICAgIHJldHVybiBmbih0aGlzLCBxLCB0KTtcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIGRlYWN0aXZhdGUoKSB7XG4gICAgdGhpcy5wcm90b2NvbHMgPSBbXTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyB2YWxpZGF0ZShxdWVyeTogc3RyaW5nLCB0eXBlPzogU2VhcmNoUXVlcnlUeXBlIHwgbnVsbCB8IHVuZGVmaW5lZCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIC8vIHByZXR0aWVyLWlnbm9yZVxuICAgIHJldHVybiAoPFNlYXJjaFF1ZXJ5VHlwZVtdPiBbXG4gICAgUXVlcnlUeXBlLkFQUExFX01VU0lDX0FMQlVNLFxuICAgIFF1ZXJ5VHlwZS5BUFBMRV9NVVNJQ19QTEFZTElTVCxcbiAgICBRdWVyeVR5cGUuQVBQTEVfTVVTSUNfU09ORyxcbiAgICBRdWVyeVR5cGUuQVBQTEVfTVVTSUNfU0VBUkNILFxuICAgIFF1ZXJ5VHlwZS5BVVRPLFxuICAgIFF1ZXJ5VHlwZS5BVVRPX1NFQVJDSF0pLlxuICAgIHNvbWUoKHQpID0+IHQgPT09IHR5cGUpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldFJlbGF0ZWRUcmFja3ModHJhY2s6IFRyYWNrLCBoaXN0b3J5OiBHdWlsZFF1ZXVlSGlzdG9yeSkge1xuICAgIGlmICh0cmFjay5xdWVyeVR5cGUgPT09IFF1ZXJ5VHlwZS5BUFBMRV9NVVNJQ19TT05HKSB7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5oYW5kbGUodHJhY2suYXV0aG9yIHx8IHRyYWNrLnRpdGxlLCB7XG4gICAgICAgIHR5cGU6IFF1ZXJ5VHlwZS5BUFBMRV9NVVNJQ19TRUFSQ0gsXG4gICAgICAgIHJlcXVlc3RlZEJ5OiB0cmFjay5yZXF1ZXN0ZWRCeVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHVuaXF1ZSA9IGRhdGEudHJhY2tzLmZpbHRlcigodCkgPT4gIWhpc3RvcnkudHJhY2tzLnNvbWUoKGgpID0+IGgudXJsID09PSB0LnVybCkpO1xuICAgICAgcmV0dXJuIHVuaXF1ZS5sZW5ndGggPiAwID8gdGhpcy5jcmVhdGVSZXNwb25zZShudWxsLCB1bmlxdWUpIDogdGhpcy5jcmVhdGVSZXNwb25zZSgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNyZWF0ZVJlc3BvbnNlKCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgaGFuZGxlKHF1ZXJ5OiBzdHJpbmcsIGNvbnRleHQ6IEV4dHJhY3RvclNlYXJjaENvbnRleHQpOiBQcm9taXNlPEV4dHJhY3RvckluZm8+IHtcbiAgICBpZiAoY29udGV4dC5wcm90b2NvbCA9PT0gJ2Ftc2VhcmNoJykgY29udGV4dC50eXBlID0gUXVlcnlUeXBlLkFQUExFX01VU0lDX1NFQVJDSDtcblxuICAgIHN3aXRjaCAoY29udGV4dC50eXBlKSB7XG4gICAgICBjYXNlIFF1ZXJ5VHlwZS5BVVRPOlxuICAgICAgY2FzZSBRdWVyeVR5cGUuQVVUT19TRUFSQ0g6XG4gICAgICBjYXNlIFF1ZXJ5VHlwZS5BUFBMRV9NVVNJQ19TRUFSQ0g6e1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBBcHBsZU11c2ljLnNlYXJjaChxdWVyeSk7XG4gICAgICAgICAgaWYgKCFkYXRhIHx8ICFkYXRhLmxlbmd0aCkgcmV0dXJuIHRoaXMuY3JlYXRlUmVzcG9uc2UoKTtcbiAgICAgICAgICBjb25zdCB0cmFja3MgPSBkYXRhLm1hcChcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAobTogYW55KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHRyYWNrOiBUcmFjayA9IG5ldyBUcmFjayh0aGlzLmNvbnRleHQucGxheWVyLCB7XG4gICAgICAgICAgICAgICAgYXV0aG9yOiBtLmFydGlzdC5uYW1lLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBtLnRpdGxlLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiB0eXBlb2YgbS5kdXJhdGlvbiA9PT0gJ251bWJlcicgPyBVdGlsLmJ1aWxkVGltZUNvZGUoVXRpbC5wYXJzZU1TKG0uZHVyYXRpb24pKSA6IG0uZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgdGh1bWJuYWlsOiBtLnRodW1ibmFpbCxcbiAgICAgICAgICAgICAgICB0aXRsZTogbS50aXRsZSxcbiAgICAgICAgICAgICAgICB1cmw6IG0udXJsLFxuICAgICAgICAgICAgICAgIHZpZXdzOiAwLFxuICAgICAgICAgICAgICAgIHNvdXJjZTogJ2FwcGxlX211c2ljJyxcbiAgICAgICAgICAgICAgICByZXF1ZXN0ZWRCeTogY29udGV4dC5yZXF1ZXN0ZWRCeSxcbiAgICAgICAgICAgICAgICBxdWVyeVR5cGU6ICdhcHBsZU11c2ljU29uZycsXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgIHNvdXJjZTogbSxcbiAgICAgICAgICAgICAgICAgIGJyaWRnZTogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWVzdE1ldGFkYXRhOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IG0sXG4gICAgICAgICAgICAgICAgICAgIGJyaWRnZTogbnVsbFxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIHRyYWNrLmV4dHJhY3RvciA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgcmV0dXJuIHRyYWNrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVSZXNwb25zZShudWxsLCB0cmFja3MpO1xuICAgICAgICB9XG4gICAgICBjYXNlIFF1ZXJ5VHlwZS5BUFBMRV9NVVNJQ19BTEJVTTp7XG4gICAgICAgICAgY29uc3QgaW5mbyA9IGF3YWl0IEFwcGxlTXVzaWMuZ2V0QWxidW1JbmZvKHF1ZXJ5KTtcbiAgICAgICAgICBpZiAoIWluZm8pIHJldHVybiB0aGlzLmNyZWF0ZVJlc3BvbnNlKCk7XG5cbiAgICAgICAgICBjb25zdCBwbGF5bGlzdCA9IG5ldyBQbGF5bGlzdCh0aGlzLmNvbnRleHQucGxheWVyLCB7XG4gICAgICAgICAgICBhdXRob3I6IHtcbiAgICAgICAgICAgICAgbmFtZTogaW5mby5hcnRpc3QubmFtZSxcbiAgICAgICAgICAgICAgdXJsOiAnJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBpbmZvLnRpdGxlLFxuICAgICAgICAgICAgaWQ6IGluZm8uaWQsXG4gICAgICAgICAgICBzb3VyY2U6ICdhcHBsZV9tdXNpYycsXG4gICAgICAgICAgICB0aHVtYm5haWw6IGluZm8udGh1bWJuYWlsLFxuICAgICAgICAgICAgdGl0bGU6IGluZm8udGl0bGUsXG4gICAgICAgICAgICB0cmFja3M6IFtdLFxuICAgICAgICAgICAgdHlwZTogJ2FsYnVtJyxcbiAgICAgICAgICAgIHVybDogaW5mby51cmwsXG4gICAgICAgICAgICByYXdQbGF5bGlzdDogaW5mb1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcGxheWxpc3QudHJhY2tzID0gaW5mby50cmFja3MubWFwKFxuICAgICAgICAgICAgKFxuICAgICAgICAgICAgbSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICAgICAgICA6IGFueSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCB0cmFjazogVHJhY2sgPSBuZXcgVHJhY2sodGhpcy5jb250ZXh0LnBsYXllciwge1xuICAgICAgICAgICAgICAgIGF1dGhvcjogbS5hcnRpc3QubmFtZSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbS50aXRsZSxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogdHlwZW9mIG0uZHVyYXRpb24gPT09ICdudW1iZXInID8gVXRpbC5idWlsZFRpbWVDb2RlKFV0aWwucGFyc2VNUyhtLmR1cmF0aW9uKSkgOiBtLmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIHRodW1ibmFpbDogbS50aHVtYm5haWwsXG4gICAgICAgICAgICAgICAgdGl0bGU6IG0udGl0bGUsXG4gICAgICAgICAgICAgICAgdXJsOiBtLnVybCxcbiAgICAgICAgICAgICAgICB2aWV3czogMCxcbiAgICAgICAgICAgICAgICBzb3VyY2U6ICdhcHBsZV9tdXNpYycsXG4gICAgICAgICAgICAgICAgcmVxdWVzdGVkQnk6IGNvbnRleHQucmVxdWVzdGVkQnksXG4gICAgICAgICAgICAgICAgcXVlcnlUeXBlOiAnYXBwbGVNdXNpY1NvbmcnLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICBzb3VyY2U6IGluZm8sXG4gICAgICAgICAgICAgICAgICBicmlkZ2U6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVlc3RNZXRhZGF0YTogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBpbmZvLFxuICAgICAgICAgICAgICAgICAgICBicmlkZ2U6IG51bGxcbiAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgdHJhY2sucGxheWxpc3QgPSBwbGF5bGlzdDtcbiAgICAgICAgICAgICAgdHJhY2suZXh0cmFjdG9yID0gdGhpcztcbiAgICAgICAgICAgICAgcmV0dXJuIHRyYWNrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICByZXR1cm4geyBwbGF5bGlzdCwgdHJhY2tzOiBwbGF5bGlzdC50cmFja3MgfTtcbiAgICAgICAgfVxuICAgICAgY2FzZSBRdWVyeVR5cGUuQVBQTEVfTVVTSUNfUExBWUxJU1Q6e1xuICAgICAgICAgIGNvbnN0IGluZm8gPSBhd2FpdCBBcHBsZU11c2ljLmdldFBsYXlsaXN0SW5mbyhxdWVyeSk7XG4gICAgICAgICAgaWYgKCFpbmZvKSByZXR1cm4gdGhpcy5jcmVhdGVSZXNwb25zZSgpO1xuXG4gICAgICAgICAgY29uc3QgcGxheWxpc3QgPSBuZXcgUGxheWxpc3QodGhpcy5jb250ZXh0LnBsYXllciwge1xuICAgICAgICAgICAgYXV0aG9yOiB7XG4gICAgICAgICAgICAgIG5hbWU6IGluZm8uYXJ0aXN0Lm5hbWUsXG4gICAgICAgICAgICAgIHVybDogJydcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogaW5mby50aXRsZSxcbiAgICAgICAgICAgIGlkOiBpbmZvLmlkLFxuICAgICAgICAgICAgc291cmNlOiAnYXBwbGVfbXVzaWMnLFxuICAgICAgICAgICAgdGh1bWJuYWlsOiBpbmZvLnRodW1ibmFpbCxcbiAgICAgICAgICAgIHRpdGxlOiBpbmZvLnRpdGxlLFxuICAgICAgICAgICAgdHJhY2tzOiBbXSxcbiAgICAgICAgICAgIHR5cGU6ICdwbGF5bGlzdCcsXG4gICAgICAgICAgICB1cmw6IGluZm8udXJsLFxuICAgICAgICAgICAgcmF3UGxheWxpc3Q6IGluZm9cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHBsYXlsaXN0LnRyYWNrcyA9IGluZm8udHJhY2tzLm1hcChcbiAgICAgICAgICAgIChcbiAgICAgICAgICAgIG0gLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgICAgICAgOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgdHJhY2s6IFRyYWNrID0gbmV3IFRyYWNrKHRoaXMuY29udGV4dC5wbGF5ZXIsIHtcbiAgICAgICAgICAgICAgICBhdXRob3I6IG0uYXJ0aXN0Lm5hbWUsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG0udGl0bGUsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IHR5cGVvZiBtLmR1cmF0aW9uID09PSAnbnVtYmVyJyA/IFV0aWwuYnVpbGRUaW1lQ29kZShVdGlsLnBhcnNlTVMobS5kdXJhdGlvbikpIDogbS5kdXJhdGlvbixcbiAgICAgICAgICAgICAgICB0aHVtYm5haWw6IG0udGh1bWJuYWlsLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBtLnRpdGxlLFxuICAgICAgICAgICAgICAgIHVybDogbS51cmwsXG4gICAgICAgICAgICAgICAgdmlld3M6IDAsXG4gICAgICAgICAgICAgICAgc291cmNlOiAnYXBwbGVfbXVzaWMnLFxuICAgICAgICAgICAgICAgIHJlcXVlc3RlZEJ5OiBjb250ZXh0LnJlcXVlc3RlZEJ5LFxuICAgICAgICAgICAgICAgIHF1ZXJ5VHlwZTogJ2FwcGxlTXVzaWNTb25nJyxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgc291cmNlOiBtLFxuICAgICAgICAgICAgICAgICAgYnJpZGdlOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1ZXN0TWV0YWRhdGE6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogbSxcbiAgICAgICAgICAgICAgICAgICAgYnJpZGdlOiBudWxsXG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgdHJhY2sucGxheWxpc3QgPSBwbGF5bGlzdDtcbiAgICAgICAgICAgICAgdHJhY2suZXh0cmFjdG9yID0gdGhpcztcblxuICAgICAgICAgICAgICByZXR1cm4gdHJhY2s7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcblxuICAgICAgICAgIHJldHVybiB7IHBsYXlsaXN0LCB0cmFja3M6IHBsYXlsaXN0LnRyYWNrcyB9O1xuICAgICAgICB9XG4gICAgICBjYXNlIFF1ZXJ5VHlwZS5BUFBMRV9NVVNJQ19TT05HOntcbiAgICAgICAgICBjb25zdCBpbmZvID0gYXdhaXQgQXBwbGVNdXNpYy5nZXRTb25nSW5mbyhxdWVyeSk7XG4gICAgICAgICAgaWYgKCFpbmZvKSByZXR1cm4gdGhpcy5jcmVhdGVSZXNwb25zZSgpO1xuXG4gICAgICAgICAgY29uc3QgdHJhY2s6IFRyYWNrID0gbmV3IFRyYWNrKHRoaXMuY29udGV4dC5wbGF5ZXIsIHtcbiAgICAgICAgICAgIGF1dGhvcjogaW5mby5hcnRpc3QubmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBpbmZvLnRpdGxlLFxuICAgICAgICAgICAgZHVyYXRpb246IHR5cGVvZiBpbmZvLmR1cmF0aW9uID09PSAnbnVtYmVyJyA/IFV0aWwuYnVpbGRUaW1lQ29kZShVdGlsLnBhcnNlTVMoaW5mby5kdXJhdGlvbikpIDogaW5mby5kdXJhdGlvbixcbiAgICAgICAgICAgIHRodW1ibmFpbDogaW5mby50aHVtYm5haWwsXG4gICAgICAgICAgICB0aXRsZTogaW5mby50aXRsZSxcbiAgICAgICAgICAgIHVybDogaW5mby51cmwsXG4gICAgICAgICAgICB2aWV3czogMCxcbiAgICAgICAgICAgIHNvdXJjZTogJ2FwcGxlX211c2ljJyxcbiAgICAgICAgICAgIHJlcXVlc3RlZEJ5OiBjb250ZXh0LnJlcXVlc3RlZEJ5LFxuICAgICAgICAgICAgcXVlcnlUeXBlOiBjb250ZXh0LnR5cGUsXG4gICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICBzb3VyY2U6IGluZm8sXG4gICAgICAgICAgICAgIGJyaWRnZTogbnVsbFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlcXVlc3RNZXRhZGF0YTogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHNvdXJjZTogaW5mbyxcbiAgICAgICAgICAgICAgICBicmlkZ2U6IG51bGxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHRyYWNrLmV4dHJhY3RvciA9IHRoaXM7XG5cbiAgICAgICAgICByZXR1cm4geyBwbGF5bGlzdDogbnVsbCwgdHJhY2tzOiBbdHJhY2tdIH07XG4gICAgICAgIH1cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB7IHBsYXlsaXN0OiBudWxsLCB0cmFja3M6IFtdIH07XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIHN0cmVhbShpbmZvOiBUcmFjayk6IFByb21pc2U8RXh0cmFjdG9yU3RyZWFtYWJsZT4ge1xuICAgIGlmICh0aGlzLl9zdHJlYW0pIHtcbiAgICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IHRoaXMuX3N0cmVhbShpbmZvLnVybCwgaW5mbyk7XG4gICAgICBpZiAodHlwZW9mIHN0cmVhbSA9PT0gJ3N0cmluZycpIHJldHVybiBzdHJlYW07XG4gICAgICByZXR1cm4gc3RyZWFtO1xuICAgIH1cblxuICAgIC8vIG5ldyBhcGlcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmNvbnRleHQucmVxdWVzdEJyaWRnZShpbmZvLCB0aGlzKTtcblxuICAgIGlmICghcmVzdWx0Py5yZXN1bHQpIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGJyaWRnZSB0aGlzIHRyYWNrJyk7XG5cbiAgICByZXR1cm4gcmVzdWx0LnJlc3VsdDtcbiAgfVxufSIsICJleHBvcnQgKiBmcm9tICcuL0FwcGxlTXVzaWMnO1xuZXhwb3J0ICogZnJvbSAnLi9WaW1lbyc7XG5leHBvcnQgKiBmcm9tICcuL2Rvd25sb2FkZXInO1xuZXhwb3J0ICogZnJvbSAnLi9TcG90aWZ5JzsiLCAiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xuaW1wb3J0IHsgUXVlcnlSZXNvbHZlciB9IGZyb20gJ2Rpc2NvcmQtcGxheWVyJztcbmltcG9ydCB7IHBhcnNlLCBIVE1MRWxlbWVudCB9IGZyb20gJ25vZGUtaHRtbC1wYXJzZXInO1xuaW1wb3J0IHsgVUEsIGZldGNoIH0gZnJvbSAnLi9oZWxwZXInO1xuXG5mdW5jdGlvbiBnZXRIVE1MKGxpbms6IHN0cmluZyk6IFByb21pc2U8SFRNTEVsZW1lbnQgfCBudWxsPiB7XG4gIHJldHVybiBmZXRjaChsaW5rLCB7XG4gICAgaGVhZGVyczoge1xuICAgICAgJ1VzZXItQWdlbnQnOiBVQVxuICAgIH1cbiAgfSkuXG4gIHRoZW4oKHIpID0+IHIudGV4dCgpKS5cbiAgdGhlbihcbiAgICAodHh0KSA9PiBwYXJzZSh0eHQpLFxuICAgICgpID0+IG51bGxcbiAgKTtcbn1cblxuZnVuY3Rpb24gbWFrZUltYWdlKHsgaGVpZ2h0LCB1cmwsIHdpZHRoLCBleHQgPSAnanBnJyB9OiB7dXJsOiBzdHJpbmc7d2lkdGg6IG51bWJlcjtoZWlnaHQ6IG51bWJlcjtleHQ/OiBzdHJpbmc7fSkge1xuICByZXR1cm4gdXJsLnJlcGxhY2UoJ3t3fScsIGAke3dpZHRofWApLnJlcGxhY2UoJ3tofScsIGAke2hlaWdodH1gKS5yZXBsYWNlKCd7Zn0nLCBleHQpO1xufVxuXG5mdW5jdGlvbiBwYXJzZUR1cmF0aW9uKGQ6IHN0cmluZykge1xuICBjb25zdCByID0gKG5hbWU6IHN0cmluZywgdW5pdDogc3RyaW5nKSA9PiBgKCg/PCR7bmFtZX0+LT9cXFxcZCpbXFxcXC4sXT9cXFxcZCspJHt1bml0fSk/YDtcbiAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKFxuICAgIFtcbiAgICAnKD88bmVnYXRpdmU+LSk/UCcsXG4gICAgcigneWVhcnMnLCAnWScpLFxuICAgIHIoJ21vbnRocycsICdNJyksXG4gICAgcignd2Vla3MnLCAnVycpLFxuICAgIHIoJ2RheXMnLCAnRCcpLFxuICAgICcoVCcsXG4gICAgcignaG91cnMnLCAnSCcpLFxuICAgIHIoJ21pbnV0ZXMnLCAnTScpLFxuICAgIHIoJ3NlY29uZHMnLCAnUycpLFxuICAgICcpPycgLy8gZW5kIG9wdGlvbmFsIHRpbWVcbiAgICBdLmpvaW4oJycpXG4gICk7XG4gIGNvbnN0IHRlc3QgPSByZWdleC5leGVjKGQpO1xuICBpZiAoIXRlc3QgfHwgIXRlc3QuZ3JvdXBzKSByZXR1cm4gJzA6MDAnO1xuXG4gIGNvbnN0IGR1ciA9IFtcbiAgdGVzdC5ncm91cHMueWVhcnMsXG4gIHRlc3QuZ3JvdXBzLm1vbnRocyxcbiAgdGVzdC5ncm91cHMud2Vla3MsXG4gIHRlc3QuZ3JvdXBzLmRheXMsXG4gIHRlc3QuZ3JvdXBzLmhvdXJzLFxuICB0ZXN0Lmdyb3Vwcy5taW51dGVzLFxuICB0ZXN0Lmdyb3Vwcy5zZWNvbmRzXTtcblxuXG4gIHJldHVybiAoXG4gICAgZHVyLlxuICAgIGZpbHRlcigociwgaSwgYSkgPT4gISFyIHx8IGkgPiBhLmxlbmd0aCAtIDIpLlxuICAgIG1hcCgobSwgaSkgPT4ge1xuICAgICAgaWYgKCFtKSBtID0gJzAnO1xuICAgICAgcmV0dXJuIGkgPCAxID8gbSA6IG0ucGFkU3RhcnQoMiwgJzAnKTtcbiAgICB9KS5cbiAgICBqb2luKCc6JykgfHwgJzA6MDAnKTtcblxufVxuXG5leHBvcnQgY2xhc3MgQXBwbGVNdXNpYyB7XG4gIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcbiAgICByZXR1cm4gQXBwbGVNdXNpYztcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgc2VhcmNoKHF1ZXJ5OiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXJsID0gYGh0dHBzOi8vbXVzaWMuYXBwbGUuY29tL3VzL3NlYXJjaD90ZXJtPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHF1ZXJ5KX1gO1xuICAgICAgY29uc3Qgbm9kZSA9IGF3YWl0IGdldEhUTUwodXJsKTtcbiAgICAgIGlmICghbm9kZSkgcmV0dXJuIFtdO1xuXG4gICAgICBjb25zdCByYXdEYXRhID0gbm9kZS5nZXRFbGVtZW50QnlJZCgnc2VyaWFsaXplZC1zZXJ2ZXItZGF0YScpO1xuICAgICAgaWYgKCFyYXdEYXRhKSByZXR1cm4gW107XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHJhd0RhdGEuaW5uZXJUZXh0KVswXS5kYXRhLnNlY3Rpb25zO1xuICAgICAgY29uc3QgdHJhY2tzID0gZGF0YS5maW5kKChzOiBhbnkpID0+IHMuaXRlbUtpbmQgPT09ICd0cmFja0xvY2t1cCcpPy5pdGVtcztcbiAgICAgIGlmICghdHJhY2tzKSByZXR1cm4gW107XG5cbiAgICAgIHJldHVybiB0cmFja3MubWFwKCh0cmFjazogYW55KSA9PiAoe1xuICAgICAgICBpZDogdHJhY2suY29udGVudERlc2NyaXB0b3IuaWRlbnRpZmllcnMuc3RvcmVBZGFtSUQsXG4gICAgICAgIGR1cmF0aW9uOiB0cmFjay5kdXJhdGlvbiB8fCAnMDowMCcsXG4gICAgICAgIHRpdGxlOiB0cmFjay50aXRsZSxcbiAgICAgICAgdXJsOiB0cmFjay5jb250ZW50RGVzY3JpcHRvci51cmwsXG4gICAgICAgIHRodW1ibmFpbDogdHJhY2s/LmFydHdvcms/LmRpY3Rpb25hcnkgP1xuICAgICAgICBtYWtlSW1hZ2Uoe1xuICAgICAgICAgIHVybDogdHJhY2suYXJ0d29yay5kaWN0aW9uYXJ5LnVybCxcbiAgICAgICAgICBoZWlnaHQ6IHRyYWNrLmFydHdvcmsuZGljdGlvbmFyeS5oZWlnaHQsXG4gICAgICAgICAgd2lkdGg6IHRyYWNrLmFydHdvcmsuZGljdGlvbmFyeS53aWR0aFxuICAgICAgICB9KSA6XG4gICAgICAgICdodHRwczovL211c2ljLmFwcGxlLmNvbS9hc3NldHMvZmF2aWNvbi9mYXZpY29uLTE4MC5wbmcnLFxuICAgICAgICBhcnRpc3Q6IHtcbiAgICAgICAgICBuYW1lOiB0cmFjay5zdWJ0aXRsZUxpbmtzPy5bMF0/LnRpdGxlID8/ICdVbmtub3duIEFydGlzdCdcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0U29uZ0luZm9GYWxsYmFjayhyZXM6IEhUTUxFbGVtZW50LCBuYW1lOiBzdHJpbmcsIGlkOiBzdHJpbmcsIGxpbms6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBtZXRhVGFncyA9IHJlcy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnbWV0YScpO1xuICAgICAgaWYgKCFtZXRhVGFncy5sZW5ndGgpIHJldHVybiBudWxsO1xuXG4gICAgICBjb25zdCB0aXRsZSA9XG4gICAgICBtZXRhVGFncy5maW5kKChyKSA9PiByLmdldEF0dHJpYnV0ZSgnbmFtZScpID09PSAnYXBwbGU6dGl0bGUnKT8uZ2V0QXR0cmlidXRlKCdjb250ZW50JykgfHxcbiAgICAgIHJlcy5xdWVyeVNlbGVjdG9yKCd0aXRsZScpPy5pbm5lclRleHQgfHxcbiAgICAgIG5hbWU7XG4gICAgICBjb25zdCBjb250ZW50SWQgPVxuICAgICAgbWV0YVRhZ3MuZmluZCgocikgPT4gci5nZXRBdHRyaWJ1dGUoJ25hbWUnKSA9PT0gJ2FwcGxlOmNvbnRlbnRfaWQnKT8uZ2V0QXR0cmlidXRlKCdjb250ZW50JykgfHwgaWQ7XG4gICAgICBjb25zdCBkdXJhdGlvblJhdyA9IG1ldGFUYWdzLlxuICAgICAgZmluZCgocikgPT4gci5nZXRBdHRyaWJ1dGUoJ3Byb3BlcnR5JykgPT09ICdtdXNpYzpzb25nOmR1cmF0aW9uJyk/LlxuICAgICAgZ2V0QXR0cmlidXRlKCdjb250ZW50Jyk7XG5cbiAgICAgIGNvbnN0IHNvbmcgPSB7XG4gICAgICAgIGlkOiBjb250ZW50SWQsXG4gICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvblJhdyA/XG4gICAgICAgIHBhcnNlRHVyYXRpb24oZHVyYXRpb25SYXcpIDpcbiAgICAgICAgbWV0YVRhZ3MuXG4gICAgICAgIGZpbmQoKG0pID0+IG0uZ2V0QXR0cmlidXRlKCduYW1lJykgPT09ICdhcHBsZTpkZXNjcmlwdGlvbicpPy5cbiAgICAgICAgdGV4dENvbnRlbnQuc3BsaXQoJ0R1cmF0aW9uOiAnKT8uWzFdLlxuICAgICAgICBzcGxpdCgnXCInKT8uWzBdIHx8ICcwOjAwJyxcbiAgICAgICAgdGl0bGUsXG4gICAgICAgIHVybDogbGluayxcbiAgICAgICAgdGh1bWJuYWlsOlxuICAgICAgICBtZXRhVGFncy5cbiAgICAgICAgZmluZCgocikgPT4gWydvZzppbWFnZTpzZWN1cmVfdXJsJywgJ29nOmltYWdlJ10uaW5jbHVkZXMoci5nZXRBdHRyaWJ1dGUoJ3Byb3BlcnR5JykhKSk/LlxuICAgICAgICBnZXRBdHRyaWJ1dGUoJ2NvbnRlbnQnKSB8fCAnaHR0cHM6Ly9tdXNpYy5hcHBsZS5jb20vYXNzZXRzL2Zhdmljb24vZmF2aWNvbi0xODAucG5nJyxcbiAgICAgICAgYXJ0aXN0OiB7XG4gICAgICAgICAgbmFtZTogcmVzLnF1ZXJ5U2VsZWN0b3IoJy5zb25nLXN1YnRpdGxlc19fYXJ0aXN0cz5hJyk/LnRleHRDb250ZW50Py50cmltKCkgfHwgJ0FwcGxlIE11c2ljJ1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gc29uZztcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0U29uZ0luZm8obGluazogc3RyaW5nKSB7XG4gICAgaWYgKCFRdWVyeVJlc29sdmVyLnJlZ2V4LmFwcGxlTXVzaWNTb25nUmVnZXgudGVzdChsaW5rKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChsaW5rKTtcbiAgICBjb25zdCBpZCA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdpJyk7XG4gICAgY29uc3QgbmFtZSA9IHVybC5wYXRobmFtZS5zcGxpdCgnYWxidW0vJylbMV0/LnNwbGl0KCcvJylbMF07XG5cbiAgICBpZiAoIWlkIHx8ICFuYW1lKSByZXR1cm4gbnVsbDtcblxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGdldEhUTUwoYGh0dHBzOi8vbXVzaWMuYXBwbGUuY29tL3VzL3NvbmcvJHtuYW1lfS8ke2lkfWApO1xuICAgIGlmICghcmVzKSByZXR1cm4gbnVsbDtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhc3JjID1cbiAgICAgIHJlcy5nZXRFbGVtZW50QnlJZCgnc2VyaWFsaXplZC1zZXJ2ZXItZGF0YScpPy5pbm5lclRleHQgfHxcbiAgICAgIHJlcy5pbm5lclRleHQuXG4gICAgICBzcGxpdCgnPHNjcmlwdCB0eXBlPVwiYXBwbGljYXRpb24vanNvblwiIGlkPVwic2VyaWFsaXplZC1zZXJ2ZXItZGF0YVwiPicpPy5bMV0/LlxuICAgICAgc3BsaXQoJzwvc2NyaXB0PicpPy5bMF07XG4gICAgICBpZiAoIWRhdGFzcmMpIHRocm93ICdub3QgZm91bmQnO1xuICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZGF0YXNyYylbMF0uZGF0YS5zZW9EYXRhO1xuICAgICAgY29uc3Qgc29uZyA9IGRhdGEub2dTb25nc1swXT8uYXR0cmlidXRlcztcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IGRhdGEub2dTb25nc1swXT8uaWQgfHwgZGF0YS5hcHBsZUNvbnRlbnRJZCB8fCBpZCxcbiAgICAgICAgZHVyYXRpb246IHNvbmc/LmR1cmF0aW9uSW5NaWxsaXMgfHwgJzA6MDAnLFxuICAgICAgICB0aXRsZTogc29uZz8ubmFtZSB8fCBkYXRhLmFwcGxlVGl0bGUsXG4gICAgICAgIHVybDogc29uZz8udXJsIHx8IGRhdGEudXJsIHx8IGxpbmssXG4gICAgICAgIHRodW1ibmFpbDogc29uZz8uYXJ0d29yayA/XG4gICAgICAgIG1ha2VJbWFnZSh7XG4gICAgICAgICAgdXJsOiBzb25nLmFydHdvcmsudXJsLFxuICAgICAgICAgIGhlaWdodDogc29uZy5hcnR3b3JrLmhlaWdodCxcbiAgICAgICAgICB3aWR0aDogc29uZy5hcnR3b3JrLndpZHRoXG4gICAgICAgIH0pIDpcbiAgICAgICAgZGF0YS5hcnR3b3JrVXJsID9cbiAgICAgICAgbWFrZUltYWdlKHtcbiAgICAgICAgICBoZWlnaHQ6IGRhdGEuaGVpZ2h0LFxuICAgICAgICAgIHdpZHRoOiBkYXRhLndpZHRoLFxuICAgICAgICAgIHVybDogZGF0YS5hcnR3b3JrVXJsLFxuICAgICAgICAgIGV4dDogZGF0YS5maWxlVHlwZSB8fCAnanBnJ1xuICAgICAgICB9KSA6XG4gICAgICAgICdodHRwczovL211c2ljLmFwcGxlLmNvbS9hc3NldHMvZmF2aWNvbi9mYXZpY29uLTE4MC5wbmcnLFxuICAgICAgICBhcnRpc3Q6IHtcbiAgICAgICAgICBuYW1lOiBzb25nPy5hcnRpc3ROYW1lIHx8IGRhdGEuc29jaWFsVGl0bGUgfHwgJ0FwcGxlIE11c2ljJ1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0U29uZ0luZm9GYWxsYmFjayhyZXMsIG5hbWUsIGlkLCBsaW5rKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldFBsYXlsaXN0SW5mbyhsaW5rOiBzdHJpbmcpIHtcbiAgICBpZiAoIVF1ZXJ5UmVzb2x2ZXIucmVnZXguYXBwbGVNdXNpY1BsYXlsaXN0UmVnZXgudGVzdChsaW5rKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZ2V0SFRNTChsaW5rKTtcbiAgICBpZiAoIXJlcykgcmV0dXJuIG51bGw7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgZGF0YXNyYyA9XG4gICAgICByZXMuZ2V0RWxlbWVudEJ5SWQoJ3NlcmlhbGl6ZWQtc2VydmVyLWRhdGEnKT8uaW5uZXJUZXh0IHx8XG4gICAgICByZXMuaW5uZXJUZXh0LlxuICAgICAgc3BsaXQoJzxzY3JpcHQgdHlwZT1cImFwcGxpY2F0aW9uL2pzb25cIiBpZD1cInNlcmlhbGl6ZWQtc2VydmVyLWRhdGFcIj4nKT8uWzFdPy5cbiAgICAgIHNwbGl0KCc8L3NjcmlwdD4nKT8uWzBdO1xuICAgICAgaWYgKCFkYXRhc3JjKSB0aHJvdyAnbm90IGZvdW5kJztcbiAgICAgIGNvbnN0IHBsID0gSlNPTi5wYXJzZShkYXRhc3JjKVswXS5kYXRhLnNlb0RhdGE7XG4gICAgICBjb25zdCB0aHVtYm5haWwgPSBwbC5hcnR3b3JrVXJsID9cbiAgICAgIG1ha2VJbWFnZSh7XG4gICAgICAgIGhlaWdodDogcGwuaGVpZ2h0LFxuICAgICAgICB3aWR0aDogcGwud2lkdGgsXG4gICAgICAgIHVybDogcGwuYXJ0d29ya1VybCxcbiAgICAgICAgZXh0OiBwbC5maWxlVHlwZSB8fCAnanBnJ1xuICAgICAgfSkgOlxuICAgICAgJ2h0dHBzOi8vbXVzaWMuYXBwbGUuY29tL2Fzc2V0cy9mYXZpY29uL2Zhdmljb24tMTgwLnBuZyc7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogcGwuYXBwbGVDb250ZW50SWQsXG4gICAgICAgIHRpdGxlOiBwbC5hcHBsZVRpdGxlLFxuICAgICAgICB0aHVtYm5haWwsXG4gICAgICAgIGFydGlzdDoge1xuICAgICAgICAgIG5hbWU6IHBsLm9nU29uZ3M/LlswXT8uYXR0cmlidXRlcz8uYXJ0aXN0TmFtZSB8fCAnQXBwbGUgTXVzaWMnXG4gICAgICAgIH0sXG4gICAgICAgIHVybDogcGwudXJsLFxuICAgICAgICB0cmFja3M6XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICBwbC5vZ1NvbmdzPy5tYXAoKG06IGFueSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHNvbmcgPSBtLmF0dHJpYnV0ZXM7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiBtLmlkLFxuICAgICAgICAgICAgZHVyYXRpb246IHNvbmcuZHVyYXRpb25Jbk1pbGxpcyB8fCAnMDowMCcsXG4gICAgICAgICAgICB0aXRsZTogc29uZy5uYW1lLFxuICAgICAgICAgICAgdXJsOiBzb25nLnVybCxcbiAgICAgICAgICAgIHRodW1ibmFpbDogc29uZy5hcnR3b3JrID9cbiAgICAgICAgICAgIG1ha2VJbWFnZSh7XG4gICAgICAgICAgICAgIHVybDogc29uZy5hcnR3b3JrLnVybCxcbiAgICAgICAgICAgICAgaGVpZ2h0OiBzb25nLmFydHdvcmsuaGVpZ2h0LFxuICAgICAgICAgICAgICB3aWR0aDogc29uZy5hcnR3b3JrLndpZHRoXG4gICAgICAgICAgICB9KSA6XG4gICAgICAgICAgICB0aHVtYm5haWwsXG4gICAgICAgICAgICBhcnRpc3Q6IHtcbiAgICAgICAgICAgICAgbmFtZTogc29uZy5hcnRpc3ROYW1lIHx8ICdBcHBsZSBNdXNpYydcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9KSB8fCBbXVxuICAgICAgfTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0QWxidW1JbmZvKGxpbms6IHN0cmluZykge1xuICAgIGlmICghUXVlcnlSZXNvbHZlci5yZWdleC5hcHBsZU11c2ljQWxidW1SZWdleC50ZXN0KGxpbmspKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCByZXMgPSBhd2FpdCBnZXRIVE1MKGxpbmspO1xuICAgIGlmICghcmVzKSByZXR1cm4gbnVsbDtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhc3JjID1cbiAgICAgIHJlcy5nZXRFbGVtZW50QnlJZCgnc2VyaWFsaXplZC1zZXJ2ZXItZGF0YScpPy5pbm5lclRleHQgfHxcbiAgICAgIHJlcy5pbm5lclRleHQuXG4gICAgICBzcGxpdCgnPHNjcmlwdCB0eXBlPVwiYXBwbGljYXRpb24vanNvblwiIGlkPVwic2VyaWFsaXplZC1zZXJ2ZXItZGF0YVwiPicpPy5bMV0/LlxuICAgICAgc3BsaXQoJzwvc2NyaXB0PicpPy5bMF07XG4gICAgICBpZiAoIWRhdGFzcmMpIHRocm93ICdub3QgZm91bmQnO1xuICAgICAgY29uc3QgcGwgPSBKU09OLnBhcnNlKGRhdGFzcmMpWzBdLmRhdGEuc2VvRGF0YTtcbiAgICAgIGNvbnN0IHRodW1ibmFpbCA9IHBsLmFydHdvcmtVcmwgP1xuICAgICAgbWFrZUltYWdlKHtcbiAgICAgICAgaGVpZ2h0OiBwbC5oZWlnaHQsXG4gICAgICAgIHdpZHRoOiBwbC53aWR0aCxcbiAgICAgICAgdXJsOiBwbC5hcnR3b3JrVXJsLFxuICAgICAgICBleHQ6IHBsLmZpbGVUeXBlIHx8ICdqcGcnXG4gICAgICB9KSA6XG4gICAgICAnaHR0cHM6Ly9tdXNpYy5hcHBsZS5jb20vYXNzZXRzL2Zhdmljb24vZmF2aWNvbi0xODAucG5nJztcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBwbC5hcHBsZUNvbnRlbnRJZCxcbiAgICAgICAgdGl0bGU6IHBsLmFwcGxlVGl0bGUsXG4gICAgICAgIHRodW1ibmFpbCxcbiAgICAgICAgYXJ0aXN0OiB7XG4gICAgICAgICAgbmFtZTogcGwub2dTb25ncz8uWzBdPy5hdHRyaWJ1dGVzPy5hcnRpc3ROYW1lIHx8ICdBcHBsZSBNdXNpYydcbiAgICAgICAgfSxcbiAgICAgICAgdXJsOiBwbC51cmwsXG4gICAgICAgIHRyYWNrczpcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgIHBsLm9nU29uZ3M/Lm1hcCgobTogYW55KSA9PiB7XG4gICAgICAgICAgY29uc3Qgc29uZyA9IG0uYXR0cmlidXRlcztcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IG0uaWQsXG4gICAgICAgICAgICBkdXJhdGlvbjogc29uZy5kdXJhdGlvbkluTWlsbGlzIHx8ICcwOjAwJyxcbiAgICAgICAgICAgIHRpdGxlOiBzb25nLm5hbWUsXG4gICAgICAgICAgICB1cmw6IHNvbmcudXJsLFxuICAgICAgICAgICAgdGh1bWJuYWlsOiBzb25nLmFydHdvcmsgP1xuICAgICAgICAgICAgbWFrZUltYWdlKHtcbiAgICAgICAgICAgICAgdXJsOiBzb25nLmFydHdvcmsudXJsLFxuICAgICAgICAgICAgICBoZWlnaHQ6IHNvbmcuYXJ0d29yay5oZWlnaHQsXG4gICAgICAgICAgICAgIHdpZHRoOiBzb25nLmFydHdvcmsud2lkdGhcbiAgICAgICAgICAgIH0pIDpcbiAgICAgICAgICAgIHRodW1ibmFpbCxcbiAgICAgICAgICAgIGFydGlzdDoge1xuICAgICAgICAgICAgICBuYW1lOiBzb25nLmFydGlzdE5hbWUgfHwgJ0FwcGxlIE11c2ljJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIH0pIHx8IFtdXG4gICAgICB9O1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG59IiwgImltcG9ydCB7IGZldGNoLCBVQSB9IGZyb20gJy4vaGVscGVyJztcblxuY29uc3QgU1BfQU5PTl9UT0tFTl9VUkwgPSAnaHR0cHM6Ly9vcGVuLnNwb3RpZnkuY29tL2dldF9hY2Nlc3NfdG9rZW4/cmVhc29uPXRyYW5zcG9ydCZwcm9kdWN0VHlwZT1lbWJlZCc7XG5jb25zdCBTUF9BQ0NFU1NfVE9LRU5fVVJMID0gJ2h0dHBzOi8vYWNjb3VudHMuc3BvdGlmeS5jb20vYXBpL3Rva2VuP2dyYW50X3R5cGU9Y2xpZW50X2NyZWRlbnRpYWxzJztcbmNvbnN0IFNQX0JBU0UgPSAnaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEnO1xuXG5pbnRlcmZhY2UgU1BfQUNDRVNTX1RPS0VOIHtcbiAgdG9rZW46IHN0cmluZztcbiAgZXhwaXJlc0FmdGVyOiBudW1iZXI7XG4gIHR5cGU6ICdCZWFyZXInO1xufVxuXG5leHBvcnQgY2xhc3MgU3BvdGlmeUFQSSB7XG4gIHB1YmxpYyBhY2Nlc3NUb2tlbjogU1BfQUNDRVNTX1RPS0VOIHwgbnVsbCA9IG51bGw7XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKFxuICBwdWJsaWMgY3JlZGVudGlhbHM6IHtjbGllbnRJZDogc3RyaW5nIHwgbnVsbDtjbGllbnRTZWNyZXQ6IHN0cmluZyB8IG51bGw7fSA9IHtcbiAgICBjbGllbnRJZDogbnVsbCxcbiAgICBjbGllbnRTZWNyZXQ6IG51bGxcbiAgfSlcbiAge31cblxuICBwdWJsaWMgZ2V0IGF1dGhvcml6YXRpb25LZXkoKSB7XG4gICAgaWYgKCF0aGlzLmNyZWRlbnRpYWxzLmNsaWVudElkIHx8ICF0aGlzLmNyZWRlbnRpYWxzLmNsaWVudFNlY3JldCkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIEJ1ZmZlci5mcm9tKGAke3RoaXMuY3JlZGVudGlhbHMuY2xpZW50SWR9OiR7dGhpcy5jcmVkZW50aWFscy5jbGllbnRTZWNyZXR9YCkudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHJlcXVlc3RUb2tlbigpIHtcbiAgICBjb25zdCBrZXkgPSB0aGlzLmF1dGhvcml6YXRpb25LZXk7XG5cbiAgICBpZiAoIWtleSkgcmV0dXJuIGF3YWl0IHRoaXMucmVxdWVzdEFub255bW91c1Rva2VuKCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goU1BfQUNDRVNTX1RPS0VOX1VSTCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdVc2VyLUFnZW50JzogVUEsXG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJhc2ljICR7a2V5fWAsXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcy5qc29uKCk7XG5cbiAgICAgIGlmICghYm9keS5hY2Nlc3NfdG9rZW4pIHRocm93ICdubyB0b2tlbic7XG5cbiAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgIHRva2VuOiBib2R5LmFjY2Vzc190b2tlbiBhcyBzdHJpbmcsXG4gICAgICAgIGV4cGlyZXNBZnRlcjogYm9keS5leHBpcmVzX2luIGFzIG51bWJlcixcbiAgICAgICAgdHlwZTogJ0JlYXJlcicgYXMgY29uc3RcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiB0aGlzLmFjY2Vzc1Rva2VuID0gZGF0YTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnJlcXVlc3RBbm9ueW1vdXNUb2tlbigpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyByZXF1ZXN0QW5vbnltb3VzVG9rZW4oKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFNQX0FOT05fVE9LRU5fVVJMLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnVXNlci1BZ2VudCc6IFVBLFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzLm9rKSB0aHJvdyAnbm90X29rJztcblxuICAgICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcy5qc29uKCk7XG5cbiAgICAgIGlmICghYm9keS5hY2Nlc3NUb2tlbikgdGhyb3cgJ25vX2FjY2Vzc190b2tlbic7XG5cbiAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgIHRva2VuOiBib2R5LmFjY2Vzc1Rva2VuIGFzIHN0cmluZyxcbiAgICAgICAgZXhwaXJlc0FmdGVyOiBib2R5LmFjY2Vzc1Rva2VuRXhwaXJhdGlvblRpbWVzdGFtcE1zIGFzIG51bWJlcixcbiAgICAgICAgdHlwZTogJ0JlYXJlcicgYXMgY29uc3RcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiB0aGlzLmFjY2Vzc1Rva2VuID0gZGF0YTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBpc1Rva2VuRXhwaXJlZCgpIHtcbiAgICBpZiAoIXRoaXMuYWNjZXNzVG9rZW4pIHJldHVybiB0cnVlO1xuICAgIHJldHVybiBEYXRlLm5vdygpID4gdGhpcy5hY2Nlc3NUb2tlbi5leHBpcmVzQWZ0ZXI7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgc2VhcmNoKHF1ZXJ5OiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgLy8gcmVxXG4gICAgICBpZiAodGhpcy5pc1Rva2VuRXhwaXJlZCgpKSBhd2FpdCB0aGlzLnJlcXVlc3RUb2tlbigpO1xuICAgICAgLy8gZmFpbGVkXG4gICAgICBpZiAoIXRoaXMuYWNjZXNzVG9rZW4pIHJldHVybiBudWxsO1xuXG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtTUF9CQVNFfS9zZWFyY2gvP3E9JHtlbmNvZGVVUklDb21wb25lbnQocXVlcnkpfSZ0eXBlPXRyYWNrJm1hcmtldD1VU2AsIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdVc2VyLUFnZW50JzogVUEsXG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogYCR7dGhpcy5hY2Nlc3NUb2tlbi50eXBlfSAke3RoaXMuYWNjZXNzVG9rZW4udG9rZW59YCxcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlcy5vaykgcmV0dXJuIG51bGw7XG5cbiAgICAgIGNvbnN0IGRhdGE6IHt0cmFja3M6IHtpdGVtczogU3BvdGlmeVRyYWNrW107fTt9ID0gYXdhaXQgcmVzLmpzb24oKTtcblxuICAgICAgcmV0dXJuIGRhdGEudHJhY2tzLml0ZW1zLm1hcCgobSkgPT4gKHtcbiAgICAgICAgdGl0bGU6IG0ubmFtZSxcbiAgICAgICAgZHVyYXRpb246IG0uZHVyYXRpb25fbXMsXG4gICAgICAgIGFydGlzdDogbS5hcnRpc3RzLm1hcCgobSkgPT4gbS5uYW1lKS5qb2luKCcsICcpLFxuICAgICAgICB1cmw6IG0uZXh0ZXJuYWxfdXJscz8uc3BvdGlmeSB8fCBgaHR0cHM6Ly9vcGVuLnNwb3RpZnkuY29tL3RyYWNrLyR7bS5pZH1gLFxuICAgICAgICB0aHVtYm5haWw6IG0uYWxidW0uaW1hZ2VzPy5bMF0/LnVybCB8fCBudWxsXG4gICAgICB9KSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0UGxheWxpc3QoaWQ6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICAvLyByZXFcbiAgICAgIGlmICh0aGlzLmlzVG9rZW5FeHBpcmVkKCkpIGF3YWl0IHRoaXMucmVxdWVzdFRva2VuKCk7XG4gICAgICAvLyBmYWlsZWRcbiAgICAgIGlmICghdGhpcy5hY2Nlc3NUb2tlbikgcmV0dXJuIG51bGw7XG5cbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke1NQX0JBU0V9L3BsYXlsaXN0cy8ke2lkfT9tYXJrZXQ9VVNgLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnVXNlci1BZ2VudCc6IFVBLFxuICAgICAgICAgIEF1dGhvcml6YXRpb246IGAke3RoaXMuYWNjZXNzVG9rZW4udHlwZX0gJHt0aGlzLmFjY2Vzc1Rva2VuLnRva2VufWAsXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmICghcmVzLm9rKSByZXR1cm4gbnVsbDtcblxuICAgICAgY29uc3QgZGF0YToge1xuICAgICAgICBleHRlcm5hbF91cmxzOiB7c3BvdGlmeTogc3RyaW5nO307XG4gICAgICAgIG93bmVyOiB7ZGlzcGxheV9uYW1lOiBzdHJpbmc7fTtcbiAgICAgICAgaWQ6IHN0cmluZztcbiAgICAgICAgbmFtZTogc3RyaW5nO1xuICAgICAgICBpbWFnZXM6IHt1cmw6IHN0cmluZzt9W107XG4gICAgICAgIHRyYWNrczoge1xuICAgICAgICAgIGl0ZW1zOiB7dHJhY2s6IFNwb3RpZnlUcmFjazt9W107XG4gICAgICAgICAgbmV4dD86IHN0cmluZztcbiAgICAgICAgfTtcbiAgICAgIH0gPSBhd2FpdCByZXMuanNvbigpO1xuXG4gICAgICBpZiAoIWRhdGEudHJhY2tzLml0ZW1zLmxlbmd0aCkgcmV0dXJuIG51bGw7XG5cbiAgICAgIGNvbnN0IHQ6IHt0cmFjazogU3BvdGlmeVRyYWNrO31bXSA9IGRhdGEudHJhY2tzLml0ZW1zO1xuXG4gICAgICBsZXQgbmV4dDogc3RyaW5nIHwgdW5kZWZpbmVkID0gZGF0YS50cmFja3MubmV4dDtcblxuICAgICAgd2hpbGUgKHR5cGVvZiBuZXh0ID09PSAnc3RyaW5nJykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKG5leHQsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgJ1VzZXItQWdlbnQnOiBVQSxcbiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYCR7dGhpcy5hY2Nlc3NUb2tlbi50eXBlfSAke3RoaXMuYWNjZXNzVG9rZW4udG9rZW59YCxcbiAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmICghcmVzLm9rKSBicmVhaztcbiAgICAgICAgICBjb25zdCBuZXh0UGFnZToge2l0ZW1zOiB7dHJhY2s6IFNwb3RpZnlUcmFjazt9W107bmV4dD86IHN0cmluZzt9ID0gYXdhaXQgcmVzLmpzb24oKTtcblxuICAgICAgICAgIHQucHVzaCguLi5uZXh0UGFnZS5pdGVtcyk7XG4gICAgICAgICAgbmV4dCA9IG5leHRQYWdlLm5leHQ7XG5cbiAgICAgICAgICBpZiAoIW5leHQpIGJyZWFrO1xuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCB0cmFja3MgPSB0Lm1hcCgoeyB0cmFjazogbSB9KSA9PiAoe1xuICAgICAgICB0aXRsZTogbS5uYW1lLFxuICAgICAgICBkdXJhdGlvbjogbS5kdXJhdGlvbl9tcyxcbiAgICAgICAgYXJ0aXN0OiBtLmFydGlzdHMubWFwKChtKSA9PiBtLm5hbWUpLmpvaW4oJywgJyksXG4gICAgICAgIHVybDogbS5leHRlcm5hbF91cmxzPy5zcG90aWZ5IHx8IGBodHRwczovL29wZW4uc3BvdGlmeS5jb20vdHJhY2svJHttLmlkfWAsXG4gICAgICAgIHRodW1ibmFpbDogbS5hbGJ1bS5pbWFnZXM/LlswXT8udXJsIHx8IG51bGxcbiAgICAgIH0pKTtcblxuICAgICAgaWYgKCF0cmFja3MubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgICAgYXV0aG9yOiBkYXRhLm93bmVyLmRpc3BsYXlfbmFtZSxcbiAgICAgICAgdGh1bWJuYWlsOiBkYXRhLmltYWdlcz8uWzBdPy51cmwgfHwgbnVsbCxcbiAgICAgICAgaWQ6IGRhdGEuaWQsXG4gICAgICAgIHVybDogZGF0YS5leHRlcm5hbF91cmxzLnNwb3RpZnkgfHwgYGh0dHBzOi8vb3Blbi5zcG90aWZ5LmNvbS9wbGF5bGlzdC8ke2lkfWAsXG4gICAgICAgIHRyYWNrc1xuICAgICAgfTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRBbGJ1bShpZDogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIHJlcVxuICAgICAgaWYgKHRoaXMuaXNUb2tlbkV4cGlyZWQoKSkgYXdhaXQgdGhpcy5yZXF1ZXN0VG9rZW4oKTtcbiAgICAgIC8vIGZhaWxlZFxuICAgICAgaWYgKCF0aGlzLmFjY2Vzc1Rva2VuKSByZXR1cm4gbnVsbDtcblxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7U1BfQkFTRX0vYWxidW1zLyR7aWR9P21hcmtldD1VU2AsIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdVc2VyLUFnZW50JzogVUEsXG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogYCR7dGhpcy5hY2Nlc3NUb2tlbi50eXBlfSAke3RoaXMuYWNjZXNzVG9rZW4udG9rZW59YCxcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKCFyZXMub2spIHJldHVybiBudWxsO1xuXG4gICAgICBjb25zdCBkYXRhOiB7XG4gICAgICAgIGV4dGVybmFsX3VybHM6IHtzcG90aWZ5OiBzdHJpbmc7fTtcbiAgICAgICAgYXJ0aXN0czoge25hbWU6IHN0cmluZzt9W107XG4gICAgICAgIGlkOiBzdHJpbmc7XG4gICAgICAgIG5hbWU6IHN0cmluZztcbiAgICAgICAgaW1hZ2VzOiB7dXJsOiBzdHJpbmc7fVtdO1xuICAgICAgICB0cmFja3M6IHtcbiAgICAgICAgICBpdGVtczogU3BvdGlmeVRyYWNrW107XG4gICAgICAgICAgbmV4dD86IHN0cmluZztcbiAgICAgICAgfTtcbiAgICAgIH0gPSBhd2FpdCByZXMuanNvbigpO1xuXG4gICAgICBpZiAoIWRhdGEudHJhY2tzLml0ZW1zLmxlbmd0aCkgcmV0dXJuIG51bGw7XG5cbiAgICAgIGNvbnN0IHQ6IFNwb3RpZnlUcmFja1tdID0gZGF0YS50cmFja3MuaXRlbXM7XG5cbiAgICAgIGxldCBuZXh0OiBzdHJpbmcgfCB1bmRlZmluZWQgPSBkYXRhLnRyYWNrcy5uZXh0O1xuXG4gICAgICB3aGlsZSAodHlwZW9mIG5leHQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2gobmV4dCwge1xuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAnVXNlci1BZ2VudCc6IFVBLFxuICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgJHt0aGlzLmFjY2Vzc1Rva2VuLnR5cGV9ICR7dGhpcy5hY2Nlc3NUb2tlbi50b2tlbn1gLFxuICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKCFyZXMub2spIGJyZWFrO1xuICAgICAgICAgIGNvbnN0IG5leHRQYWdlOiB7aXRlbXM6IFNwb3RpZnlUcmFja1tdO25leHQ/OiBzdHJpbmc7fSA9IGF3YWl0IHJlcy5qc29uKCk7XG5cbiAgICAgICAgICB0LnB1c2goLi4ubmV4dFBhZ2UuaXRlbXMpO1xuICAgICAgICAgIG5leHQgPSBuZXh0UGFnZS5uZXh0O1xuXG4gICAgICAgICAgaWYgKCFuZXh0KSBicmVhaztcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgdHJhY2tzID0gdC5tYXAoKG0pID0+ICh7XG4gICAgICAgIHRpdGxlOiBtLm5hbWUsXG4gICAgICAgIGR1cmF0aW9uOiBtLmR1cmF0aW9uX21zLFxuICAgICAgICBhcnRpc3Q6IG0uYXJ0aXN0cy5tYXAoKG0pID0+IG0ubmFtZSkuam9pbignLCAnKSxcbiAgICAgICAgdXJsOiBtLmV4dGVybmFsX3VybHM/LnNwb3RpZnkgfHwgYGh0dHBzOi8vb3Blbi5zcG90aWZ5LmNvbS90cmFjay8ke20uaWR9YCxcbiAgICAgICAgdGh1bWJuYWlsOiBkYXRhLmltYWdlcz8uWzBdPy51cmwgfHwgbnVsbFxuICAgICAgfSkpO1xuXG4gICAgICBpZiAoIXRyYWNrcy5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICBhdXRob3I6IGRhdGEuYXJ0aXN0cy5tYXAoKG0pID0+IG0ubmFtZSkuam9pbignLCAnKSxcbiAgICAgICAgdGh1bWJuYWlsOiBkYXRhLmltYWdlcz8uWzBdPy51cmwgfHwgbnVsbCxcbiAgICAgICAgaWQ6IGRhdGEuaWQsXG4gICAgICAgIHVybDogZGF0YS5leHRlcm5hbF91cmxzLnNwb3RpZnkgfHwgYGh0dHBzOi8vb3Blbi5zcG90aWZ5LmNvbS9hbGJ1bS8ke2lkfWAsXG4gICAgICAgIHRyYWNrc1xuICAgICAgfTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNwb3RpZnlUcmFjayB7XG4gIGFsYnVtOiB7XG4gICAgaW1hZ2VzOiB7XG4gICAgICBoZWlnaHQ6IG51bWJlcjtcbiAgICAgIHVybDogc3RyaW5nO1xuICAgICAgd2lkdGg6IG51bWJlcjtcbiAgICB9W107XG4gIH07XG4gIGFydGlzdHM6IHtcbiAgICBpZDogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgfVtdO1xuICBkdXJhdGlvbl9tczogbnVtYmVyO1xuICBleHBsaWNpdDogYm9vbGVhbjtcbiAgZXh0ZXJuYWxfdXJsczoge3Nwb3RpZnk6IHN0cmluZzt9O1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG59IiwgImltcG9ydCB7XG4gIEJhc2VFeHRyYWN0b3IsXG4gIEV4dHJhY3RvckluZm8sXG4gIEV4dHJhY3RvclNlYXJjaENvbnRleHQsXG4gIEV4dHJhY3RvclN0cmVhbWFibGUsXG4gIFBsYXlsaXN0LFxuICBRdWVyeVR5cGUsXG4gIFNlYXJjaFF1ZXJ5VHlwZSxcbiAgVHJhY2ssXG4gIFV0aWwgfSBmcm9tXG4nZGlzY29yZC1wbGF5ZXInO1xuaW1wb3J0IHR5cGUgeyBSZWFkYWJsZSB9IGZyb20gJ3N0cmVhbSc7XG5pbXBvcnQgeyBmZXRjaCB9IGZyb20gJy4uL2ludGVybmFsL2hlbHBlcic7XG5pbXBvcnQgc3BvdGlmeSwgeyBTcG90aWZ5LCBTcG90aWZ5QWxidW0sIFNwb3RpZnlQbGF5bGlzdCwgU3BvdGlmeVNvbmcgfSBmcm9tICdzcG90aWZ5LXVybC1pbmZvJztcbmltcG9ydCB7IFNwb3RpZnlBUEkgfSBmcm9tICcuLi9pbnRlcm5hbCc7XG5pbXBvcnQgeyBTdHJlYW1GTiB9IGZyb20gJy4uL3R5cGVzL2NvbW1vbic7XG5cbmNvbnN0IHJlID1cbi9eKD86aHR0cHM6XFwvXFwvb3BlblxcLnNwb3RpZnlcXC5jb21cXC8oaW50bC0oW2Etel18W0EtWl0pezAsM31cXC8pPyg/OnVzZXJcXC9bQS1aYS16MC05XStcXC8pP3xzcG90aWZ5OikoYWxidW18cGxheWxpc3R8dHJhY2spKD86Wy86XSkoW0EtWmEtejAtOV0rKS4qJC87XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3BvdGlmeUV4dHJhY3RvckluaXQge1xuICBjbGllbnRJZD86IHN0cmluZyB8IG51bGw7XG4gIGNsaWVudFNlY3JldD86IHN0cmluZyB8IG51bGw7XG4gIGNyZWF0ZVN0cmVhbT86IChleHQ6IFNwb3RpZnlFeHRyYWN0b3IsIHVybDogc3RyaW5nKSA9PiBQcm9taXNlPFJlYWRhYmxlIHwgc3RyaW5nPjtcbn1cblxuZXhwb3J0IGNsYXNzIFNwb3RpZnlFeHRyYWN0b3IgZXh0ZW5kcyBCYXNlRXh0cmFjdG9yPFNwb3RpZnlFeHRyYWN0b3JJbml0PiB7XG4gIHB1YmxpYyBzdGF0aWMgaWRlbnRpZmllciA9ICdjb20uZGlzY29yZC1wbGF5ZXIuc3BvdGlmeWV4dHJhY3RvcicgYXMgY29uc3Q7XG4gIHByaXZhdGUgX3N0cmVhbSE6IFN0cmVhbUZOO1xuICBwcml2YXRlIF9saWIhOiBTcG90aWZ5O1xuICBwcml2YXRlIF9jcmVkZW50aWFscyA9IHtcbiAgICBjbGllbnRJZDogdGhpcy5vcHRpb25zLmNsaWVudElkIHx8IHByb2Nlc3MuZW52LkRQX1NQT1RJRllfQ0xJRU5UX0lEIHx8IG51bGwsXG4gICAgY2xpZW50U2VjcmV0OiB0aGlzLm9wdGlvbnMuY2xpZW50U2VjcmV0IHx8IHByb2Nlc3MuZW52LkRQX1NQT1RJRllfQ0xJRU5UX1NFQ1JFVCB8fCBudWxsXG4gIH07XG4gIHB1YmxpYyBpbnRlcm5hbCA9IG5ldyBTcG90aWZ5QVBJKHRoaXMuX2NyZWRlbnRpYWxzKTtcblxuICBwdWJsaWMgYXN5bmMgYWN0aXZhdGUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5wcm90b2NvbHMgPSBbJ3Nwc2VhcmNoJywgJ3Nwb3RpZnknXTtcbiAgICB0aGlzLl9saWIgPSBzcG90aWZ5KGZldGNoKTtcbiAgICBpZiAodGhpcy5pbnRlcm5hbC5pc1Rva2VuRXhwaXJlZCgpKSBhd2FpdCB0aGlzLmludGVybmFsLnJlcXVlc3RUb2tlbigpO1xuXG4gICAgY29uc3QgZm4gPSB0aGlzLm9wdGlvbnMuY3JlYXRlU3RyZWFtO1xuICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMuX3N0cmVhbSA9IChxOiBzdHJpbmcpID0+IHtcbiAgICAgICAgcmV0dXJuIGZuKHRoaXMsIHEpO1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZGVhY3RpdmF0ZSgpIHtcbiAgICB0aGlzLl9zdHJlYW0gPSB1bmRlZmluZWQgYXMgdW5rbm93biBhcyBTdHJlYW1GTjtcbiAgICB0aGlzLl9saWIgPSB1bmRlZmluZWQgYXMgdW5rbm93biBhcyBTcG90aWZ5O1xuICAgIHRoaXMucHJvdG9jb2xzID0gW107XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgdmFsaWRhdGUocXVlcnk6IHN0cmluZywgdHlwZT86IFNlYXJjaFF1ZXJ5VHlwZSB8IG51bGwgfCB1bmRlZmluZWQpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAvLyBwcmV0dGllci1pZ25vcmVcbiAgICByZXR1cm4gKDxTZWFyY2hRdWVyeVR5cGVbXT4gW1xuICAgIFF1ZXJ5VHlwZS5TUE9USUZZX0FMQlVNLFxuICAgIFF1ZXJ5VHlwZS5TUE9USUZZX1BMQVlMSVNULFxuICAgIFF1ZXJ5VHlwZS5TUE9USUZZX1NPTkcsXG4gICAgUXVlcnlUeXBlLlNQT1RJRllfU0VBUkNILFxuICAgIFF1ZXJ5VHlwZS5BVVRPLFxuICAgIFF1ZXJ5VHlwZS5BVVRPX1NFQVJDSF0pLlxuICAgIHNvbWUoKHQpID0+IHQgPT09IHR5cGUpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldFJlbGF0ZWRUcmFja3ModHJhY2s6IFRyYWNrKSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuaGFuZGxlKHRyYWNrLmF1dGhvciB8fCB0cmFjay50aXRsZSwge1xuICAgICAgdHlwZTogUXVlcnlUeXBlLlNQT1RJRllfU0VBUkNILFxuICAgICAgcmVxdWVzdGVkQnk6IHRyYWNrLnJlcXVlc3RlZEJ5XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgaGFuZGxlKHF1ZXJ5OiBzdHJpbmcsIGNvbnRleHQ6IEV4dHJhY3RvclNlYXJjaENvbnRleHQpOiBQcm9taXNlPEV4dHJhY3RvckluZm8+IHtcbiAgICBpZiAoY29udGV4dC5wcm90b2NvbCA9PT0gJ3Nwc2VhcmNoJykgY29udGV4dC50eXBlID0gUXVlcnlUeXBlLlNQT1RJRllfU0VBUkNIO1xuICAgIHN3aXRjaCAoY29udGV4dC50eXBlKSB7XG4gICAgICBjYXNlIFF1ZXJ5VHlwZS5BVVRPOlxuICAgICAgY2FzZSBRdWVyeVR5cGUuQVVUT19TRUFSQ0g6XG4gICAgICBjYXNlIFF1ZXJ5VHlwZS5TUE9USUZZX1NFQVJDSDp7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuaW50ZXJuYWwuc2VhcmNoKHF1ZXJ5KTtcbiAgICAgICAgICBpZiAoIWRhdGEpIHJldHVybiB0aGlzLmNyZWF0ZVJlc3BvbnNlKCk7XG5cbiAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVSZXNwb25zZShcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBkYXRhLm1hcCgoc3BvdGlmeURhdGEpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgdHJhY2s6IFRyYWNrID0gbmV3IFRyYWNrKHRoaXMuY29udGV4dC5wbGF5ZXIsIHtcbiAgICAgICAgICAgICAgICB0aXRsZTogc3BvdGlmeURhdGEudGl0bGUsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGAke3Nwb3RpZnlEYXRhLnRpdGxlfSBieSAke3Nwb3RpZnlEYXRhLmFydGlzdH1gLFxuICAgICAgICAgICAgICAgIGF1dGhvcjogc3BvdGlmeURhdGEuYXJ0aXN0ID8/ICdVbmtub3duIEFydGlzdCcsXG4gICAgICAgICAgICAgICAgdXJsOiBzcG90aWZ5RGF0YS51cmwsXG4gICAgICAgICAgICAgICAgdGh1bWJuYWlsOiBzcG90aWZ5RGF0YS50aHVtYm5haWwgfHwgJ2h0dHBzOi8vd3d3LnNjZG4uY28vaS9fZ2xvYmFsL3R3aXR0ZXJfY2FyZC1kZWZhdWx0LmpwZycsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IFV0aWwuYnVpbGRUaW1lQ29kZShVdGlsLnBhcnNlTVMoc3BvdGlmeURhdGEuZHVyYXRpb24gPz8gMCkpLFxuICAgICAgICAgICAgICAgIHZpZXdzOiAwLFxuICAgICAgICAgICAgICAgIHJlcXVlc3RlZEJ5OiBjb250ZXh0LnJlcXVlc3RlZEJ5LFxuICAgICAgICAgICAgICAgIHNvdXJjZTogJ3Nwb3RpZnknLFxuICAgICAgICAgICAgICAgIHF1ZXJ5VHlwZTogUXVlcnlUeXBlLlNQT1RJRllfU09ORyxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgc291cmNlOiBzcG90aWZ5RGF0YSxcbiAgICAgICAgICAgICAgICAgIGJyaWRnZTogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWVzdE1ldGFkYXRhOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IHNwb3RpZnlEYXRhLFxuICAgICAgICAgICAgICAgICAgICBicmlkZ2U6IG51bGxcbiAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICB0cmFjay5leHRyYWN0b3IgPSB0aGlzO1xuXG4gICAgICAgICAgICAgIHJldHVybiB0cmFjaztcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgY2FzZSBRdWVyeVR5cGUuU1BPVElGWV9TT05HOntcbiAgICAgICAgICBjb25zdCBzcG90aWZ5RGF0YTogU3BvdGlmeVNvbmcgfCB2b2lkID0gYXdhaXQgdGhpcy5fbGliLlxuICAgICAgICAgIGdldERhdGEocXVlcnksIGNvbnRleHQucmVxdWVzdE9wdGlvbnMgYXMgdW5rbm93biBhcyBSZXF1ZXN0SW5pdCkuXG4gICAgICAgICAgY2F0Y2goVXRpbC5ub29wKTtcbiAgICAgICAgICBpZiAoIXNwb3RpZnlEYXRhKSByZXR1cm4geyBwbGF5bGlzdDogbnVsbCwgdHJhY2tzOiBbXSB9O1xuICAgICAgICAgIGNvbnN0IHNwb3RpZnlUcmFjazogVHJhY2sgPSBuZXcgVHJhY2sodGhpcy5jb250ZXh0LnBsYXllciwge1xuICAgICAgICAgICAgdGl0bGU6IHNwb3RpZnlEYXRhLnRpdGxlLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGAke3Nwb3RpZnlEYXRhLm5hbWV9IGJ5ICR7c3BvdGlmeURhdGEuYXJ0aXN0cy5tYXAoKG0pID0+IG0ubmFtZSkuam9pbignLCAnKX1gLFxuICAgICAgICAgICAgYXV0aG9yOiBzcG90aWZ5RGF0YS5hcnRpc3RzWzBdPy5uYW1lID8/ICdVbmtub3duIEFydGlzdCcsXG4gICAgICAgICAgICB1cmw6IHNwb3RpZnlEYXRhLmlkID8gYGh0dHBzOi8vb3Blbi5zcG90aWZ5LmNvbS90cmFjay8ke3Nwb3RpZnlEYXRhLmlkfWAgOiBxdWVyeSxcbiAgICAgICAgICAgIHRodW1ibmFpbDpcbiAgICAgICAgICAgIHNwb3RpZnlEYXRhLmNvdmVyQXJ0Py5zb3VyY2VzPy5bMF0/LnVybCB8fCAnaHR0cHM6Ly93d3cuc2Nkbi5jby9pL19nbG9iYWwvdHdpdHRlcl9jYXJkLWRlZmF1bHQuanBnJyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBVdGlsLmJ1aWxkVGltZUNvZGUoVXRpbC5wYXJzZU1TKHNwb3RpZnlEYXRhLmR1cmF0aW9uID8/IHNwb3RpZnlEYXRhLm1heER1cmF0aW9uID8/IDApKSxcbiAgICAgICAgICAgIHZpZXdzOiAwLFxuICAgICAgICAgICAgcmVxdWVzdGVkQnk6IGNvbnRleHQucmVxdWVzdGVkQnksXG4gICAgICAgICAgICBzb3VyY2U6ICdzcG90aWZ5JyxcbiAgICAgICAgICAgIHF1ZXJ5VHlwZTogY29udGV4dC50eXBlLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgc291cmNlOiBzcG90aWZ5RGF0YSxcbiAgICAgICAgICAgICAgYnJpZGdlOiBudWxsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVxdWVzdE1ldGFkYXRhOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc291cmNlOiBzcG90aWZ5RGF0YSxcbiAgICAgICAgICAgICAgICBicmlkZ2U6IG51bGxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHNwb3RpZnlUcmFjay5leHRyYWN0b3IgPSB0aGlzO1xuXG4gICAgICAgICAgcmV0dXJuIHsgcGxheWxpc3Q6IG51bGwsIHRyYWNrczogW3Nwb3RpZnlUcmFja10gfTtcbiAgICAgICAgfVxuICAgICAgY2FzZSBRdWVyeVR5cGUuU1BPVElGWV9QTEFZTElTVDp7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgcXVlcnlUeXBlLCBpZCB9ID0gdGhpcy5wYXJzZShxdWVyeSk7XG4gICAgICAgICAgICBpZiAocXVlcnlUeXBlICE9PSAncGxheWxpc3QnKSB0aHJvdyAnZXJyJztcblxuICAgICAgICAgICAgY29uc3Qgc3BvdGlmeVBsYXlsaXN0ID0gYXdhaXQgdGhpcy5pbnRlcm5hbC5nZXRQbGF5bGlzdChpZCk7XG4gICAgICAgICAgICBpZiAoIXNwb3RpZnlQbGF5bGlzdCkgdGhyb3cgJ2Vycic7XG5cbiAgICAgICAgICAgIGNvbnN0IHBsYXlsaXN0ID0gbmV3IFBsYXlsaXN0KHRoaXMuY29udGV4dC5wbGF5ZXIsIHtcbiAgICAgICAgICAgICAgdGl0bGU6IHNwb3RpZnlQbGF5bGlzdC5uYW1lLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogc3BvdGlmeVBsYXlsaXN0Lm5hbWUgPz8gJycsXG4gICAgICAgICAgICAgIHRodW1ibmFpbDogc3BvdGlmeVBsYXlsaXN0LnRodW1ibmFpbCA/PyAnaHR0cHM6Ly93d3cuc2Nkbi5jby9pL19nbG9iYWwvdHdpdHRlcl9jYXJkLWRlZmF1bHQuanBnJyxcbiAgICAgICAgICAgICAgdHlwZTogJ3BsYXlsaXN0JyxcbiAgICAgICAgICAgICAgc291cmNlOiAnc3BvdGlmeScsXG4gICAgICAgICAgICAgIGF1dGhvcjoge1xuICAgICAgICAgICAgICAgIG5hbWU6IHNwb3RpZnlQbGF5bGlzdC5hdXRob3IgPz8gJ1Vua25vd24gQXJ0aXN0JyxcbiAgICAgICAgICAgICAgICB1cmw6IG51bGwgYXMgdW5rbm93biBhcyBzdHJpbmdcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgdHJhY2tzOiBbXSxcbiAgICAgICAgICAgICAgaWQ6IHNwb3RpZnlQbGF5bGlzdC5pZCxcbiAgICAgICAgICAgICAgdXJsOiBzcG90aWZ5UGxheWxpc3QudXJsIHx8IHF1ZXJ5LFxuICAgICAgICAgICAgICByYXdQbGF5bGlzdDogc3BvdGlmeVBsYXlsaXN0XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcGxheWxpc3QudHJhY2tzID0gc3BvdGlmeVBsYXlsaXN0LnRyYWNrcy5tYXAoKHNwb3RpZnlEYXRhKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGRhdGE6IFRyYWNrID0gbmV3IFRyYWNrKHRoaXMuY29udGV4dC5wbGF5ZXIsIHtcbiAgICAgICAgICAgICAgICB0aXRsZTogc3BvdGlmeURhdGEudGl0bGUsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGAke3Nwb3RpZnlEYXRhLnRpdGxlfSBieSAke3Nwb3RpZnlEYXRhLmFydGlzdH1gLFxuICAgICAgICAgICAgICAgIGF1dGhvcjogc3BvdGlmeURhdGEuYXJ0aXN0ID8/ICdVbmtub3duIEFydGlzdCcsXG4gICAgICAgICAgICAgICAgdXJsOiBzcG90aWZ5RGF0YS51cmwsXG4gICAgICAgICAgICAgICAgdGh1bWJuYWlsOiBzcG90aWZ5RGF0YS50aHVtYm5haWwgfHwgJ2h0dHBzOi8vd3d3LnNjZG4uY28vaS9fZ2xvYmFsL3R3aXR0ZXJfY2FyZC1kZWZhdWx0LmpwZycsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IFV0aWwuYnVpbGRUaW1lQ29kZShVdGlsLnBhcnNlTVMoc3BvdGlmeURhdGEuZHVyYXRpb24gPz8gMCkpLFxuICAgICAgICAgICAgICAgIHZpZXdzOiAwLFxuICAgICAgICAgICAgICAgIHJlcXVlc3RlZEJ5OiBjb250ZXh0LnJlcXVlc3RlZEJ5LFxuICAgICAgICAgICAgICAgIHNvdXJjZTogJ3Nwb3RpZnknLFxuICAgICAgICAgICAgICAgIHF1ZXJ5VHlwZTogUXVlcnlUeXBlLlNQT1RJRllfU09ORyxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgc291cmNlOiBzcG90aWZ5RGF0YSxcbiAgICAgICAgICAgICAgICAgIGJyaWRnZTogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWVzdE1ldGFkYXRhOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IHNwb3RpZnlEYXRhLFxuICAgICAgICAgICAgICAgICAgICBicmlkZ2U6IG51bGxcbiAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgZGF0YS5leHRyYWN0b3IgPSB0aGlzO1xuICAgICAgICAgICAgICBkYXRhLnBsYXlsaXN0ID0gcGxheWxpc3Q7XG4gICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICAgICAgfSkgYXMgVHJhY2tbXTtcblxuICAgICAgICAgICAgcmV0dXJuIHsgcGxheWxpc3QsIHRyYWNrczogcGxheWxpc3QudHJhY2tzIH07XG4gICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICBjb25zdCBzcG90aWZ5UGxheWxpc3Q6IFNwb3RpZnlQbGF5bGlzdCB8IHZvaWQgPSBhd2FpdCB0aGlzLl9saWIuXG4gICAgICAgICAgICBnZXREYXRhKHF1ZXJ5LCBjb250ZXh0LnJlcXVlc3RPcHRpb25zIGFzIHVua25vd24gYXMgUmVxdWVzdEluaXQpLlxuICAgICAgICAgICAgY2F0Y2goVXRpbC5ub29wKTtcbiAgICAgICAgICAgIGlmICghc3BvdGlmeVBsYXlsaXN0KSByZXR1cm4geyBwbGF5bGlzdDogbnVsbCwgdHJhY2tzOiBbXSB9O1xuXG4gICAgICAgICAgICBjb25zdCBwbGF5bGlzdCA9IG5ldyBQbGF5bGlzdCh0aGlzLmNvbnRleHQucGxheWVyLCB7XG4gICAgICAgICAgICAgIHRpdGxlOiBzcG90aWZ5UGxheWxpc3QubmFtZSA/PyBzcG90aWZ5UGxheWxpc3QudGl0bGUsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBzcG90aWZ5UGxheWxpc3QudGl0bGUgPz8gJycsXG4gICAgICAgICAgICAgIHRodW1ibmFpbDpcbiAgICAgICAgICAgICAgc3BvdGlmeVBsYXlsaXN0LmNvdmVyQXJ0Py5zb3VyY2VzPy5bMF0/LnVybCA/PyAnaHR0cHM6Ly93d3cuc2Nkbi5jby9pL19nbG9iYWwvdHdpdHRlcl9jYXJkLWRlZmF1bHQuanBnJyxcbiAgICAgICAgICAgICAgdHlwZTogc3BvdGlmeVBsYXlsaXN0LnR5cGUsXG4gICAgICAgICAgICAgIHNvdXJjZTogJ3Nwb3RpZnknLFxuICAgICAgICAgICAgICBhdXRob3I6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBzcG90aWZ5UGxheWxpc3Quc3VidGl0bGUgPz8gJ1Vua25vd24gQXJ0aXN0JyxcbiAgICAgICAgICAgICAgICB1cmw6IG51bGwgYXMgdW5rbm93biBhcyBzdHJpbmdcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgdHJhY2tzOiBbXSxcbiAgICAgICAgICAgICAgaWQ6IHNwb3RpZnlQbGF5bGlzdC5pZCxcbiAgICAgICAgICAgICAgdXJsOiBzcG90aWZ5UGxheWxpc3QuaWQgPyBgaHR0cHM6Ly9vcGVuLnNwb3RpZnkuY29tL3BsYXlsaXN0LyR7c3BvdGlmeVBsYXlsaXN0LmlkfWAgOiBxdWVyeSxcbiAgICAgICAgICAgICAgcmF3UGxheWxpc3Q6IHNwb3RpZnlQbGF5bGlzdFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHBsYXlsaXN0LnRyYWNrcyA9IHNwb3RpZnlQbGF5bGlzdC50cmFja0xpc3QubWFwKChtKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGRhdGE6IFRyYWNrID0gbmV3IFRyYWNrKHRoaXMuY29udGV4dC5wbGF5ZXIsIHtcbiAgICAgICAgICAgICAgICB0aXRsZTogbS50aXRsZSA/PyAnJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbS50aXRsZSA/PyAnJyxcbiAgICAgICAgICAgICAgICBhdXRob3I6IG0uc3VidGl0bGUgPz8gJ1Vua25vd24gQXJ0aXN0JyxcbiAgICAgICAgICAgICAgICB1cmw6IG0udWlkID8gYGh0dHBzOi8vb3Blbi5zcG90aWZ5LmNvbS90cmFja3MvJHttLnVpZH1gIDogcXVlcnksXG4gICAgICAgICAgICAgICAgdGh1bWJuYWlsOiAnaHR0cHM6Ly93d3cuc2Nkbi5jby9pL19nbG9iYWwvdHdpdHRlcl9jYXJkLWRlZmF1bHQuanBnJyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogVXRpbC5idWlsZFRpbWVDb2RlKFV0aWwucGFyc2VNUyhtLmR1cmF0aW9uKSksXG4gICAgICAgICAgICAgICAgdmlld3M6IDAsXG4gICAgICAgICAgICAgICAgcmVxdWVzdGVkQnk6IGNvbnRleHQucmVxdWVzdGVkQnksXG4gICAgICAgICAgICAgICAgcGxheWxpc3QsXG4gICAgICAgICAgICAgICAgc291cmNlOiAnc3BvdGlmeScsXG4gICAgICAgICAgICAgICAgcXVlcnlUeXBlOiAnc3BvdGlmeVNvbmcnLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICBzb3VyY2U6IG0sXG4gICAgICAgICAgICAgICAgICBicmlkZ2U6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVlc3RNZXRhZGF0YTogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBtLFxuICAgICAgICAgICAgICAgICAgICBicmlkZ2U6IG51bGxcbiAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgZGF0YS5leHRyYWN0b3IgPSB0aGlzO1xuICAgICAgICAgICAgICBkYXRhLnBsYXlsaXN0ID0gcGxheWxpc3Q7XG4gICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICAgICAgfSkgYXMgVHJhY2tbXTtcblxuICAgICAgICAgICAgcmV0dXJuIHsgcGxheWxpc3QsIHRyYWNrczogcGxheWxpc3QudHJhY2tzIH07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBjYXNlIFF1ZXJ5VHlwZS5TUE9USUZZX0FMQlVNOntcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgeyBxdWVyeVR5cGUsIGlkIH0gPSB0aGlzLnBhcnNlKHF1ZXJ5KTtcbiAgICAgICAgICAgIGlmIChxdWVyeVR5cGUgIT09ICdhbGJ1bScpIHRocm93ICdlcnInO1xuXG4gICAgICAgICAgICBjb25zdCBzcG90aWZ5QWxidW0gPSBhd2FpdCB0aGlzLmludGVybmFsLmdldEFsYnVtKGlkKTtcbiAgICAgICAgICAgIGlmICghc3BvdGlmeUFsYnVtKSB0aHJvdyAnZXJyJztcblxuICAgICAgICAgICAgY29uc3QgcGxheWxpc3QgPSBuZXcgUGxheWxpc3QodGhpcy5jb250ZXh0LnBsYXllciwge1xuICAgICAgICAgICAgICB0aXRsZTogc3BvdGlmeUFsYnVtLm5hbWUsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBzcG90aWZ5QWxidW0ubmFtZSA/PyAnJyxcbiAgICAgICAgICAgICAgdGh1bWJuYWlsOiBzcG90aWZ5QWxidW0udGh1bWJuYWlsID8/ICdodHRwczovL3d3dy5zY2RuLmNvL2kvX2dsb2JhbC90d2l0dGVyX2NhcmQtZGVmYXVsdC5qcGcnLFxuICAgICAgICAgICAgICB0eXBlOiAnYWxidW0nLFxuICAgICAgICAgICAgICBzb3VyY2U6ICdzcG90aWZ5JyxcbiAgICAgICAgICAgICAgYXV0aG9yOiB7XG4gICAgICAgICAgICAgICAgbmFtZTogc3BvdGlmeUFsYnVtLmF1dGhvciA/PyAnVW5rbm93biBBcnRpc3QnLFxuICAgICAgICAgICAgICAgIHVybDogbnVsbCBhcyB1bmtub3duIGFzIHN0cmluZ1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB0cmFja3M6IFtdLFxuICAgICAgICAgICAgICBpZDogc3BvdGlmeUFsYnVtLmlkLFxuICAgICAgICAgICAgICB1cmw6IHNwb3RpZnlBbGJ1bS51cmwgfHwgcXVlcnksXG4gICAgICAgICAgICAgIHJhd1BsYXlsaXN0OiBzcG90aWZ5QWxidW1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBwbGF5bGlzdC50cmFja3MgPSBzcG90aWZ5QWxidW0udHJhY2tzLm1hcCgoc3BvdGlmeURhdGEpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZGF0YTogVHJhY2sgPSBuZXcgVHJhY2sodGhpcy5jb250ZXh0LnBsYXllciwge1xuICAgICAgICAgICAgICAgIHRpdGxlOiBzcG90aWZ5RGF0YS50aXRsZSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYCR7c3BvdGlmeURhdGEudGl0bGV9IGJ5ICR7c3BvdGlmeURhdGEuYXJ0aXN0fWAsXG4gICAgICAgICAgICAgICAgYXV0aG9yOiBzcG90aWZ5RGF0YS5hcnRpc3QgPz8gJ1Vua25vd24gQXJ0aXN0JyxcbiAgICAgICAgICAgICAgICB1cmw6IHNwb3RpZnlEYXRhLnVybCxcbiAgICAgICAgICAgICAgICB0aHVtYm5haWw6IHNwb3RpZnlEYXRhLnRodW1ibmFpbCB8fCAnaHR0cHM6Ly93d3cuc2Nkbi5jby9pL19nbG9iYWwvdHdpdHRlcl9jYXJkLWRlZmF1bHQuanBnJyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogVXRpbC5idWlsZFRpbWVDb2RlKFV0aWwucGFyc2VNUyhzcG90aWZ5RGF0YS5kdXJhdGlvbiA/PyAwKSksXG4gICAgICAgICAgICAgICAgdmlld3M6IDAsXG4gICAgICAgICAgICAgICAgcmVxdWVzdGVkQnk6IGNvbnRleHQucmVxdWVzdGVkQnksXG4gICAgICAgICAgICAgICAgc291cmNlOiAnc3BvdGlmeScsXG4gICAgICAgICAgICAgICAgcXVlcnlUeXBlOiBRdWVyeVR5cGUuU1BPVElGWV9TT05HLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICBzb3VyY2U6IHNwb3RpZnlEYXRhLFxuICAgICAgICAgICAgICAgICAgYnJpZGdlOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1ZXN0TWV0YWRhdGE6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogc3BvdGlmeURhdGEsXG4gICAgICAgICAgICAgICAgICAgIGJyaWRnZTogbnVsbFxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBkYXRhLmV4dHJhY3RvciA9IHRoaXM7XG4gICAgICAgICAgICAgIGRhdGEucGxheWxpc3QgPSBwbGF5bGlzdDtcbiAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgICB9KSBhcyBUcmFja1tdO1xuXG4gICAgICAgICAgICByZXR1cm4geyBwbGF5bGlzdCwgdHJhY2tzOiBwbGF5bGlzdC50cmFja3MgfTtcbiAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIGNvbnN0IGFsYnVtOiBTcG90aWZ5QWxidW0gfCB2b2lkID0gYXdhaXQgdGhpcy5fbGliLlxuICAgICAgICAgICAgZ2V0RGF0YShxdWVyeSwgY29udGV4dC5yZXF1ZXN0T3B0aW9ucyBhcyB1bmtub3duIGFzIFJlcXVlc3RJbml0KS5cbiAgICAgICAgICAgIGNhdGNoKFV0aWwubm9vcCk7XG4gICAgICAgICAgICBpZiAoIWFsYnVtKSByZXR1cm4geyBwbGF5bGlzdDogbnVsbCwgdHJhY2tzOiBbXSB9O1xuXG4gICAgICAgICAgICBjb25zdCBwbGF5bGlzdCA9IG5ldyBQbGF5bGlzdCh0aGlzLmNvbnRleHQucGxheWVyLCB7XG4gICAgICAgICAgICAgIHRpdGxlOiBhbGJ1bS5uYW1lID8/IGFsYnVtLnRpdGxlLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYWxidW0udGl0bGUgPz8gJycsXG4gICAgICAgICAgICAgIHRodW1ibmFpbDogYWxidW0uY292ZXJBcnQ/LnNvdXJjZXM/LlswXT8udXJsID8/ICdodHRwczovL3d3dy5zY2RuLmNvL2kvX2dsb2JhbC90d2l0dGVyX2NhcmQtZGVmYXVsdC5qcGcnLFxuICAgICAgICAgICAgICB0eXBlOiBhbGJ1bS50eXBlLFxuICAgICAgICAgICAgICBzb3VyY2U6ICdzcG90aWZ5JyxcbiAgICAgICAgICAgICAgYXV0aG9yOiB7XG4gICAgICAgICAgICAgICAgbmFtZTogYWxidW0uc3VidGl0bGUgPz8gJ1Vua25vd24gQXJ0aXN0JyxcbiAgICAgICAgICAgICAgICB1cmw6IG51bGwgYXMgdW5rbm93biBhcyBzdHJpbmdcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgdHJhY2tzOiBbXSxcbiAgICAgICAgICAgICAgaWQ6IGFsYnVtLmlkLFxuICAgICAgICAgICAgICB1cmw6IGFsYnVtLmlkID8gYGh0dHBzOi8vb3Blbi5zcG90aWZ5LmNvbS9wbGF5bGlzdC8ke2FsYnVtLmlkfWAgOiBxdWVyeSxcbiAgICAgICAgICAgICAgcmF3UGxheWxpc3Q6IGFsYnVtXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcGxheWxpc3QudHJhY2tzID0gYWxidW0udHJhY2tMaXN0Lm1hcCgobSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBkYXRhOiBUcmFjayA9IG5ldyBUcmFjayh0aGlzLmNvbnRleHQucGxheWVyLCB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IG0udGl0bGUgPz8gJycsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG0udGl0bGUgPz8gJycsXG4gICAgICAgICAgICAgICAgYXV0aG9yOiBtLnN1YnRpdGxlID8/ICdVbmtub3duIEFydGlzdCcsXG4gICAgICAgICAgICAgICAgdXJsOiBtLnVpZCA/IGBodHRwczovL29wZW4uc3BvdGlmeS5jb20vdHJhY2tzLyR7bS51aWR9YCA6IHF1ZXJ5LFxuICAgICAgICAgICAgICAgIHRodW1ibmFpbDogJ2h0dHBzOi8vd3d3LnNjZG4uY28vaS9fZ2xvYmFsL3R3aXR0ZXJfY2FyZC1kZWZhdWx0LmpwZycsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IFV0aWwuYnVpbGRUaW1lQ29kZShVdGlsLnBhcnNlTVMobS5kdXJhdGlvbikpLFxuICAgICAgICAgICAgICAgIHZpZXdzOiAwLFxuICAgICAgICAgICAgICAgIHJlcXVlc3RlZEJ5OiBjb250ZXh0LnJlcXVlc3RlZEJ5LFxuICAgICAgICAgICAgICAgIHBsYXlsaXN0LFxuICAgICAgICAgICAgICAgIHNvdXJjZTogJ3Nwb3RpZnknLFxuICAgICAgICAgICAgICAgIHF1ZXJ5VHlwZTogJ3Nwb3RpZnlTb25nJyxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgc291cmNlOiBtLFxuICAgICAgICAgICAgICAgICAgYnJpZGdlOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1ZXN0TWV0YWRhdGE6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogbSxcbiAgICAgICAgICAgICAgICAgICAgYnJpZGdlOiBudWxsXG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGRhdGEuZXh0cmFjdG9yID0gdGhpcztcbiAgICAgICAgICAgICAgZGF0YS5wbGF5bGlzdCA9IHBsYXlsaXN0O1xuICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgICAgIH0pIGFzIFRyYWNrW107XG5cbiAgICAgICAgICAgIHJldHVybiB7IHBsYXlsaXN0LCB0cmFja3M6IHBsYXlsaXN0LnRyYWNrcyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHsgcGxheWxpc3Q6IG51bGwsIHRyYWNrczogW10gfTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgc3RyZWFtKGluZm86IFRyYWNrKTogUHJvbWlzZTxFeHRyYWN0b3JTdHJlYW1hYmxlPiB7XG4gICAgaWYgKHRoaXMuX3N0cmVhbSkge1xuICAgICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgdGhpcy5fc3RyZWFtKGluZm8udXJsLCBpbmZvKTtcbiAgICAgIGlmICh0eXBlb2Ygc3RyZWFtID09PSAnc3RyaW5nJykgcmV0dXJuIHN0cmVhbTtcbiAgICAgIHJldHVybiBzdHJlYW07XG4gICAgfVxuXG4gICAgLy8gbmV3IGFwaVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuY29udGV4dC5yZXF1ZXN0QnJpZGdlKGluZm8sIHRoaXMpO1xuXG4gICAgaWYgKCFyZXN1bHQ/LnJlc3VsdCkgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgYnJpZGdlIHRoaXMgdHJhY2snKTtcblxuICAgIHJldHVybiByZXN1bHQucmVzdWx0O1xuICB9XG5cbiAgcHVibGljIHBhcnNlKHE6IHN0cmluZykge1xuICAgIGNvbnN0IFssLCwgcXVlcnlUeXBlLCBpZF0gPSByZS5leGVjKHEpIHx8IFtdO1xuXG4gICAgcmV0dXJuIHsgcXVlcnlUeXBlLCBpZCB9O1xuICB9XG59IiwgIlxuXG5cblxuXG5cbmV4cG9ydCBjb25zdCB2ZXJzaW9uID0gLyogQF9fTUFDUk9fXyBnZXRWZXJzaW9uICovXCI3LjAuMFwiOyJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7OztBQ0NBLDRCQVdBO0FBQ0EsaUJBQTRCOzs7QUNYNUIsZ0NBQW9CO0FBR2IsSUFBTSxLQUNiO0FBQ08sSUFBTSxRQUFRLDBCQUFB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QVMsT0FBTztBQUFBLFFBQzdDO0FBQUEsTUFDRjtBQUFBLE1BQ0Y7QUFDRSxlQUFPLEVBQUUsVUFBVSxNQUFNLFFBQVEsQ0FBQyxFQUFFO0FBQUEsSUFDeEM7QUFBQSxFQUNGO0FBQUEsRUFFQSxNQUFhLE9BQU8sTUFBMkM7QUFDN0QsUUFBSSxLQUFLLFNBQVM7QUFDaEIsWUFBTSxTQUFTLE1BQU0sS0FBSyxRQUFRLEtBQUssS0FBSyxJQUFJO0FBQ2hELFVBQUksT0FBTyxXQUFXLFNBQVUsUUFBTztBQUN2QyxhQUFPO0FBQUEsSUFDVDtBQUdBLFVBQU0sU0FBUyxNQUFNLEtBQUssUUFBUSxjQUFjLE1BQU0sSUFBSTtBQUUxRCxRQUFJLENBQUMsUUFBUSxPQUFRLE9BQU0sSUFBSSxNQUFNLDZCQUE2QjtBQUVsRSxXQUFPLE9BQU87QUFBQSxFQUNoQjtBQUFBLEVBRU8sTUFBTSxHQUFXO0FBQ3RCLFVBQU0sQ0FBQyxFQUFDLEVBQUMsRUFBRSxXQUFXLEVBQUUsSUFBSSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7QUFFM0MsV0FBTyxFQUFFLFdBQVcsR0FBRztBQUFBLEVBQ3pCO0FBQ0Y7QUExVzBFO0FBQ3hFLGNBRFcsbUJBQ0csY0FBYTtBQUR0QixJQUFNLG1CQUFOOzs7QUNwQkEsSUFBTTtBQUFBO0FBQUEsRUFBcUM7QUFBQTs7O0FkRzNDLElBQU0sb0JBQW9CO0FBQUEsRUFDakM7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFnQjsiLAogICJuYW1lcyI6IFsidW5mZXRjaCIsICJpbXBvcnRfZGlzY29yZF9wbGF5ZXIiLCAiaHR0cHMiLCAiaHR0cCIsICJpbXBvcnRfZGlzY29yZF9wbGF5ZXIiLCAicmV2ZXJibmF0aW9uIiwgImltcG9ydF9kaXNjb3JkX3BsYXllciIsICJpbXBvcnRfaHR0cCIsICJpbXBvcnRfaHR0cHMiLCAiaHR0cCIsICJodHRwcyIsICJwYXRoIiwgImltcG9ydF9kaXNjb3JkX3BsYXllciIsICJpbXBvcnRfZGlzY29yZF9wbGF5ZXIiLCAiciIsICJtIiwgInJlcyIsICJpbXBvcnRfZGlzY29yZF9wbGF5ZXIiLCAic3BvdGlmeSJdCn0K