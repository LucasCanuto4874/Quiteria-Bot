var __defProp = Object.defineProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __name = (target, value) => __defProp(target, "name", { value, configurable: true });
var __require = /* @__PURE__ */ ((x) => typeof require !== "undefined" ? require : typeof Proxy !== "undefined" ? new Proxy(x, {
  get: (a, b) => (typeof require !== "undefined" ? require : a)[b]
}) : x)(function(x) {
  if (typeof require !== "undefined") return require.apply(this, arguments);
  throw Error('Dynamic require of "' + x + '" is not supported');
});
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);

// src/extractors/SoundCloudExtractor.ts
import {
  BaseExtractor,
  Playlist,
  QueryType,
  Track,
  Util
} from "discord-player";
import * as SoundCloud from "soundcloud.ts";

// src/internal/helper.ts
import unfetch from "isomorphic-unfetch";
var UA = "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36 Edg/109.0.1518.49";
var fetch = unfetch;
function filterSoundCloudPreviews(tracks) {
  const filtered = tracks.filter((t) => {
    if (typeof t.policy === "string") return t.policy.toUpperCase() === "ALLOW";
    return !(t.duration === 3e4 && t.full_duration > 3e4);
  });
  const result = filtered.length > 0 ? filtered : tracks;
  return result;
}
__name(filterSoundCloudPreviews, "filterSoundCloudPreviews");

// src/extractors/SoundCloudExtractor.ts
var _SoundCloudExtractor = class _SoundCloudExtractor extends BaseExtractor {
  constructor() {
    super(...arguments);
    __publicField(this, "internal", new SoundCloud.default({
      clientId: this.options.clientId,
      oauthToken: this.options.oauthToken,
      proxy: this.options.proxy
    }));
  }
  async activate() {
    this.protocols = ["scsearch", "soundcloud"];
    _SoundCloudExtractor.instance = this;
  }
  async deactivate() {
    this.protocols = [];
    _SoundCloudExtractor.instance = null;
  }
  async validate(query, type) {
    if (typeof query !== "string") return false;
    return [
      QueryType.SOUNDCLOUD,
      QueryType.SOUNDCLOUD_PLAYLIST,
      QueryType.SOUNDCLOUD_SEARCH,
      QueryType.SOUNDCLOUD_TRACK,
      QueryType.AUTO,
      QueryType.AUTO_SEARCH
    ].some((r) => r === type);
  }
  async getRelatedTracks(track, history) {
    if (track.queryType === QueryType.SOUNDCLOUD_TRACK) {
      const data = await this.internal.tracks.relatedV2(track.url, 5);
      const unique = filterSoundCloudPreviews(data).filter(
        (t) => !history.tracks.some((h) => h.url === t.permalink_url)
      );
      return this.createResponse(
        null,
        (unique.length > 0 ? unique : data).map((trackInfo) => {
          const newTrack = new Track(this.context.player, {
            title: trackInfo.title,
            url: trackInfo.permalink_url,
            duration: Util.buildTimeCode(Util.parseMS(trackInfo.duration)),
            description: trackInfo.description ?? "",
            thumbnail: trackInfo.artwork_url,
            views: trackInfo.playback_count,
            author: trackInfo.user.username,
            requestedBy: track.requestedBy,
            source: "soundcloud",
            engine: trackInfo,
            queryType: QueryType.SOUNDCLOUD_TRACK,
            metadata: trackInfo,
            requestMetadata: /* @__PURE__ */ __name(async () => {
              return trackInfo;
            }, "requestMetadata"),
            cleanTitle: trackInfo.title
          });
          newTrack.extractor = this;
          return newTrack;
        })
      );
    }
    return this.createResponse();
  }
  async handle(query, context) {
    if (context.protocol === "scsearch") context.type = QueryType.SOUNDCLOUD_SEARCH;
    switch (context.type) {
      case QueryType.SOUNDCLOUD_TRACK: {
        const trackInfo = await this.internal.tracks.getV2(query).catch(Util.noop);
        if (!trackInfo) return this.emptyResponse();
        const track = new Track(this.context.player, {
          title: trackInfo.title,
          url: trackInfo.permalink_url,
          duration: Util.buildTimeCode(Util.parseMS(trackInfo.duration)),
          description: trackInfo.description ?? "",
          thumbnail: trackInfo.artwork_url,
          views: trackInfo.playback_count,
          author: trackInfo.user.username,
          requestedBy: context.requestedBy,
          source: "soundcloud",
          engine: trackInfo,
          queryType: context.type,
          metadata: trackInfo,
          requestMetadata: /* @__PURE__ */ __name(async () => {
            return trackInfo;
          }, "requestMetadata"),
          cleanTitle: trackInfo.title
        });
        track.extractor = this;
        return { playlist: null, tracks: [track] };
      }
      case QueryType.SOUNDCLOUD_PLAYLIST: {
        const data = await this.internal.playlists.getV2(query).catch(Util.noop);
        if (!data) return { playlist: null, tracks: [] };
        const res = new Playlist(this.context.player, {
          title: data.title,
          description: data.description ?? "",
          thumbnail: data.artwork_url ?? data.tracks[0].artwork_url,
          type: "playlist",
          source: "soundcloud",
          author: {
            name: data.user.username,
            url: data.user.permalink_url
          },
          tracks: [],
          id: `${data.id}`,
          url: data.permalink_url,
          rawPlaylist: data
        });
        for (const song of data.tracks) {
          const track = new Track(this.context.player, {
            title: song.title,
            description: song.description ?? "",
            author: song.user.username,
            url: song.permalink_url,
            thumbnail: song.artwork_url,
            duration: Util.buildTimeCode(Util.parseMS(song.duration)),
            views: song.playback_count,
            requestedBy: context.requestedBy,
            playlist: res,
            source: "soundcloud",
            engine: song,
            queryType: context.type,
            metadata: song,
            requestMetadata: /* @__PURE__ */ __name(async () => {
              return song;
            }, "requestMetadata"),
            cleanTitle: song.title
          });
          track.extractor = this;
          track.playlist = res;
          res.tracks.push(track);
        }
        return { playlist: res, tracks: res.tracks };
      }
      default: {
        let tracks = await this.internal.tracks.searchV2({ q: query }).then((t) => t.collection).catch(Util.noop);
        if (!tracks) tracks = await this.internal.tracks.searchAlt(query).catch(Util.noop);
        if (!tracks || !tracks.length) return this.emptyResponse();
        tracks = filterSoundCloudPreviews(tracks);
        const resolvedTracks = [];
        for (const trackInfo of tracks) {
          if (!trackInfo.streamable) continue;
          const track = new Track(this.context.player, {
            title: trackInfo.title,
            url: trackInfo.permalink_url,
            duration: Util.buildTimeCode(Util.parseMS(trackInfo.duration)),
            description: trackInfo.description ?? "",
            thumbnail: trackInfo.artwork_url,
            views: trackInfo.playback_count,
            author: trackInfo.user.username,
            requestedBy: context.requestedBy,
            source: "soundcloud",
            engine: trackInfo,
            queryType: "soundcloudTrack",
            metadata: trackInfo,
            requestMetadata: /* @__PURE__ */ __name(async () => {
              return trackInfo;
            }, "requestMetadata")
          });
          track.extractor = this;
          resolvedTracks.push(track);
        }
        return { playlist: null, tracks: resolvedTracks };
      }
    }
  }
  emptyResponse() {
    return { playlist: null, tracks: [] };
  }
  async stream(info) {
    const url = await this.internal.util.streamLink(info.url).catch(Util.noop);
    if (!url) throw new Error("Could not extract stream from this track source");
    return url;
  }
  async bridge(track, sourceExtractor) {
    if (sourceExtractor?.identifier === this.identifier) {
      return this.stream(track);
    }
    const query = sourceExtractor?.createBridgeQuery(track) ?? `${track.author} - ${track.title}`;
    const info = await this.handle(query, {
      requestedBy: track.requestedBy,
      type: QueryType.SOUNDCLOUD_SEARCH
    });
    if (!info.tracks.length) return null;
    const result = await this.stream(info.tracks[0]);
    if (result) {
      track.bridgedTrack = info.tracks[0];
      track.bridgedExtractor = this;
    }
    return result;
  }
};
__name(_SoundCloudExtractor, "SoundCloudExtractor");
__publicField(_SoundCloudExtractor, "identifier", "com.discord-player.soundcloudextractor");
__publicField(_SoundCloudExtractor, "instance", null);
var SoundCloudExtractor = _SoundCloudExtractor;

// src/extractors/LyricsExtractor.ts
function lyricsExtractor() {
  throw new Error(
    "Legacy lyrics extractor has been removed. Please use the new lyrics api from `player.lyrics` instead. It offers more accurate result and features like plain lyrics and synced lyrics."
  );
}
__name(lyricsExtractor, "lyricsExtractor");

// src/extractors/VimeoExtractor.ts
import {
  BaseExtractor as BaseExtractor2,
  QueryType as QueryType2,
  Track as Track2,
  Util as Util2
} from "discord-player";

// src/internal/Vimeo.ts
import http from "http";
import https from "https";
var _Vimeo = class _Vimeo {
  constructor() {
    throw new Error(`The ${this.constructor.name} class may not be instantiated!`);
  }
  /**
   * @typedef {Readable} Readable
   */
  /**
   * Downloads from vimeo
   * @param {number} id Vimeo video id
   * @returns {Promise<Readable>}
   */
  static download(id) {
    return new Promise(async (resolve) => {
      const info = await _Vimeo.getInfo(id);
      if (!info) return null;
      const downloader = info.stream.startsWith("https://") ? https : http;
      downloader.get(info.stream, (res) => {
        resolve(res);
      });
    });
  }
  /**
   * Returns video info
   * @param {number} id Video id
   */
  static async getInfo(id) {
    if (!id) throw new Error("Invalid id");
    const url = `https://player.vimeo.com/video/${id}`;
    try {
      const res = await fetch(url);
      const data = await res.text();
      const json = JSON.parse(data.split("window.playerConfig =")[1].split(";")[0].trim());
      const obj = {
        id: json.video.id,
        duration: json.video.duration * 1e3,
        title: json.video.title,
        url: json.video.url,
        thumbnail: json.video.thumbs["1280"] || json.video.thumbs.base,
        stream: json.request.files.progressive[0].url,
        author: {
          id: json.video.owner.id,
          name: json.video.owner.name,
          url: json.video.owner.url,
          avatar: json.video.owner.img_2x || json.video.owner.img
        }
      };
      return obj;
    } catch {
      return null;
    }
  }
};
__name(_Vimeo, "Vimeo");
var Vimeo = _Vimeo;

// src/extractors/VimeoExtractor.ts
var _VimeoExtractor = class _VimeoExtractor extends BaseExtractor2 {
  async validate(query, type) {
    if (typeof query !== "string") return false;
    return [QueryType2.VIMEO].some((r) => r === type);
  }
  async getRelatedTracks(track) {
    return this.createResponse();
  }
  async handle(query, context) {
    switch (context.type) {
      case QueryType2.VIMEO: {
        const trackInfo = await Vimeo.getInfo(
          query.split("/").filter((x) => !!x).pop()
        ).catch(Util2.noop);
        if (!trackInfo) return this.emptyResponse();
        const track = new Track2(this.context.player, {
          title: trackInfo.title,
          url: trackInfo.url,
          duration: Util2.buildTimeCode(Util2.parseMS(trackInfo.duration || 0)),
          description: `${trackInfo.title} by ${trackInfo.author.name}`,
          thumbnail: trackInfo.thumbnail,
          views: 0,
          author: trackInfo.author.name,
          requestedBy: context.requestedBy,
          source: "arbitrary",
          engine: trackInfo.stream,
          queryType: context.type,
          metadata: trackInfo,
          async requestMetadata() {
            return trackInfo;
          }
        });
        track.extractor = this;
        return { playlist: null, tracks: [track] };
      }
      default:
        return this.emptyResponse();
    }
  }
  emptyResponse() {
    return { playlist: null, tracks: [] };
  }
  async stream(info) {
    const engine = info.raw.engine;
    if (engine) {
      return engine;
    }
    const track = await Vimeo.getInfo(info.url).catch(Util2.noop);
    if (!track || !track.stream) throw new Error("Could not extract stream from this source");
    info.raw.engine = {
      streamURL: track.stream
    };
    return track.stream;
  }
};
__name(_VimeoExtractor, "VimeoExtractor");
__publicField(_VimeoExtractor, "identifier", "com.discord-player.vimeoextractor");
var VimeoExtractor = _VimeoExtractor;

// src/extractors/ReverbnationExtractor.ts
import {
  BaseExtractor as BaseExtractor3,
  QueryType as QueryType3,
  Track as Track3,
  Util as Util3
} from "discord-player";
import reverbnation from "reverbnation-scraper";
var _ReverbnationExtractor = class _ReverbnationExtractor extends BaseExtractor3 {
  async validate(query, type) {
    if (typeof query !== "string") return false;
    return [QueryType3.REVERBNATION].some((r) => r === type);
  }
  async getRelatedTracks(track) {
    return this.createResponse();
  }
  async handle(query, context) {
    switch (context.type) {
      case QueryType3.REVERBNATION: {
        const trackInfo = await reverbnation.getInfo(query).catch(Util3.noop);
        if (!trackInfo) return this.emptyResponse();
        const track = new Track3(this.context.player, {
          title: trackInfo.title,
          url: trackInfo.url,
          duration: Util3.buildTimeCode(Util3.parseMS(trackInfo.duration)),
          description: trackInfo.lyrics || `${trackInfo.title} by ${trackInfo.artist.name}`,
          thumbnail: trackInfo.thumbnail,
          views: 0,
          author: trackInfo.artist.name,
          requestedBy: context.requestedBy,
          source: "arbitrary",
          engine: trackInfo.streamURL,
          queryType: context.type,
          metadata: trackInfo,
          async requestMetadata() {
            return trackInfo;
          }
        });
        track.extractor = this;
        return { playlist: null, tracks: [track] };
      }
      default:
        return this.emptyResponse();
    }
  }
  emptyResponse() {
    return { playlist: null, tracks: [] };
  }
  async stream(info) {
    const engine = info.raw.engine;
    if (engine) {
      return engine;
    }
    const track = await reverbnation.getInfo(info.url).catch(Util3.noop);
    if (!track || !track.streamURL) throw new Error("Could not extract stream from this source");
    info.raw.engine = {
      streamURL: track.streamURL
    };
    return track.streamURL;
  }
};
__name(_ReverbnationExtractor, "ReverbnationExtractor");
__publicField(_ReverbnationExtractor, "identifier", "com.discord-player.reverbnationextractor");
var ReverbnationExtractor = _ReverbnationExtractor;

// src/extractors/AttachmentExtractor.ts
import {
  BaseExtractor as BaseExtractor4,
  QueryType as QueryType4,
  Track as Track4,
  Util as Util4
} from "discord-player";
import { createReadStream, existsSync } from "fs";

// src/internal/downloader.ts
import http2 from "http";
import https2 from "https";
function downloadStream(url, opts = {}) {
  return new Promise((resolve, reject) => {
    const lib = url.startsWith("http://") ? http2 : https2;
    lib.get(url, opts, (res) => resolve(res)).once("error", reject);
  });
}
__name(downloadStream, "downloadStream");

// src/extractors/AttachmentExtractor.ts
import * as fileType from "file-type";
import path from "path";
import { stat } from "fs/promises";
var ATTACHMENT_HEADER = ["audio/", "video/", "application/ogg"];
var _AttachmentExtractor = class _AttachmentExtractor extends BaseExtractor4 {
  constructor() {
    super(...arguments);
    // use lowest priority to avoid conflict with other extractors
    __publicField(this, "priority", 0);
  }
  async validate(query, type) {
    if (typeof query !== "string") return false;
    return [QueryType4.ARBITRARY, QueryType4.FILE].some((r) => r === type);
  }
  async getRelatedTracks(track) {
    return this.createResponse();
  }
  async handle(query, context) {
    switch (context.type) {
      case QueryType4.ARBITRARY: {
        const data = await downloadStream(query, context.requestOptions);
        if (!ATTACHMENT_HEADER.some((r) => !!data.headers["content-type"]?.startsWith(r))) return this.emptyResponse();
        const trackInfo = {
          title: (query.split("/").filter((x) => x.length).pop() ?? "Attachment").split("?")[0].trim(),
          duration: 0,
          thumbnail: "https://upload.wikimedia.org/wikipedia/commons/2/2a/ITunes_12.2_logo.png",
          engine: query,
          // eslint-disable-next-line
          author: data.client?.servername || "Attachment",
          // eslint-disable-next-line
          description: data.client?.servername || "Attachment",
          url: data.url || query
        };
        try {
          const mediaplex = __require("mediaplex");
          const timeout = this.context.player.options.probeTimeout ?? 5e3;
          const { result, stream } = await Promise.race(
            [
              mediaplex.probeStream(data),
              new Promise((_, r) => {
                setTimeout(() => r(new Error("Timeout")), timeout);
              })
            ]
          );
          if (result) {
            trackInfo.duration = result.duration * 1e3;
            const metadata = mediaplex.readMetadata(result);
            if (metadata.author) trackInfo.author = metadata.author;
            if (metadata.title) trackInfo.title = metadata.title;
            trackInfo.description = `${trackInfo.title} by ${trackInfo.author}`;
          }
          stream.destroy();
        } catch {
        }
        const track = new Track4(this.context.player, {
          title: trackInfo.title,
          url: trackInfo.url,
          duration: Util4.buildTimeCode(Util4.parseMS(trackInfo.duration)),
          description: trackInfo.description,
          thumbnail: trackInfo.thumbnail,
          views: 0,
          author: trackInfo.author,
          requestedBy: context.requestedBy,
          source: "arbitrary",
          engine: trackInfo.url,
          queryType: context.type,
          metadata: trackInfo,
          async requestMetadata() {
            return trackInfo;
          }
        });
        track.extractor = this;
        track.raw.isFile = false;
        return { playlist: null, tracks: [track] };
      }
      case QueryType4.FILE: {
        if (!existsSync(query)) return this.emptyResponse();
        const fstat = await stat(query);
        if (!fstat.isFile()) return this.emptyResponse();
        const mime = await fileType.fromFile(query).catch(() => null);
        if (!mime || !ATTACHMENT_HEADER.some((r) => !!mime.mime.startsWith(r))) return this.emptyResponse();
        const trackInfo = {
          title: path.basename(query) || "Attachment",
          duration: 0,
          thumbnail: "https://upload.wikimedia.org/wikipedia/commons/2/2a/ITunes_12.2_logo.png",
          engine: query,
          author: "Attachment",
          description: "Attachment",
          url: query
        };
        try {
          const mediaplex = __require("mediaplex");
          const timeout = this.context.player.options.probeTimeout ?? 5e3;
          const { result, stream } = await Promise.race(
            [
              mediaplex.probeStream(
                createReadStream(query, {
                  start: 0,
                  end: 1024 * 1024 * 10
                })
              ),
              new Promise((_, r) => {
                setTimeout(() => r(new Error("Timeout")), timeout);
              })
            ]
          );
          if (result) {
            trackInfo.duration = result.duration * 1e3;
            const metadata = mediaplex.readMetadata(result);
            if (metadata.author) trackInfo.author = metadata.author;
            if (metadata.title) trackInfo.title = metadata.title;
            trackInfo.description = `${trackInfo.title} by ${trackInfo.author}`;
          }
          stream.destroy();
        } catch {
        }
        const track = new Track4(this.context.player, {
          title: trackInfo.title,
          url: trackInfo.url,
          duration: Util4.buildTimeCode(Util4.parseMS(trackInfo.duration)),
          description: trackInfo.description,
          thumbnail: trackInfo.thumbnail,
          views: 0,
          author: trackInfo.author,
          requestedBy: context.requestedBy,
          source: "arbitrary",
          engine: trackInfo.url,
          queryType: context.type,
          metadata: trackInfo,
          async requestMetadata() {
            return trackInfo;
          }
        });
        track.extractor = this;
        track.raw.isFile = true;
        return { playlist: null, tracks: [track] };
      }
      default:
        return this.emptyResponse();
    }
  }
  emptyResponse() {
    return { playlist: null, tracks: [] };
  }
  async stream(info) {
    const engine = info.raw.engine;
    const isFile = info.raw.isFile;
    if (!engine) throw new Error("Could not find stream source");
    if (!isFile) {
      return engine;
    }
    return createReadStream(engine);
  }
};
__name(_AttachmentExtractor, "AttachmentExtractor");
__publicField(_AttachmentExtractor, "identifier", "com.discord-player.attachmentextractor");
var AttachmentExtractor = _AttachmentExtractor;

// src/extractors/AppleMusicExtractor.ts
import {
  Playlist as Playlist2,
  QueryType as QueryType5,
  Track as Track5,
  Util as Util5,
  BaseExtractor as BaseExtractor5
} from "discord-player";

// src/internal/index.ts
var internal_exports = {};
__export(internal_exports, {
  AppleMusic: () => AppleMusic,
  SpotifyAPI: () => SpotifyAPI,
  Vimeo: () => Vimeo,
  downloadStream: () => downloadStream
});

// src/internal/AppleMusic.ts
import { QueryResolver } from "discord-player";
import { parse } from "node-html-parser";
function getHTML(link) {
  return fetch(link, {
    headers: {
      "User-Agent": UA
    }
  }).then((r) => r.text()).then(
    (txt) => parse(txt),
    () => null
  );
}
__name(getHTML, "getHTML");
function makeImage({ height, url, width, ext = "jpg" }) {
  return url.replace("{w}", `${width}`).replace("{h}", `${height}`).replace("{f}", ext);
}
__name(makeImage, "makeImage");
function parseDuration(d) {
  const r = /* @__PURE__ */ __name((name, unit) => `((?<${name}>-?\\d*[\\.,]?\\d+)${unit})?`, "r");
  const regex = new RegExp(
    [
      "(?<negative>-)?P",
      r("years", "Y"),
      r("months", "M"),
      r("weeks", "W"),
      r("days", "D"),
      "(T",
      r("hours", "H"),
      r("minutes", "M"),
      r("seconds", "S"),
      ")?"
      // end optional time
    ].join("")
  );
  const test = regex.exec(d);
  if (!test || !test.groups) return "0:00";
  const dur = [
    test.groups.years,
    test.groups.months,
    test.groups.weeks,
    test.groups.days,
    test.groups.hours,
    test.groups.minutes,
    test.groups.seconds
  ];
  return dur.filter((r2, i, a) => !!r2 || i > a.length - 2).map((m, i) => {
    if (!m) m = "0";
    return i < 1 ? m : m.padStart(2, "0");
  }).join(":") || "0:00";
}
__name(parseDuration, "parseDuration");
var _AppleMusic = class _AppleMusic {
  constructor() {
    return _AppleMusic;
  }
  static async search(query) {
    try {
      const url = `https://music.apple.com/us/search?term=${encodeURIComponent(query)}`;
      const node = await getHTML(url);
      if (!node) return [];
      const rawData = node.getElementById("serialized-server-data");
      if (!rawData) return [];
      const data = JSON.parse(rawData.innerText)[0].data.sections;
      const tracks = data.find((s) => s.itemKind === "trackLockup")?.items;
      if (!tracks) return [];
      return tracks.map((track) => ({
        id: track.contentDescriptor.identifiers.storeAdamID,
        duration: track.duration || "0:00",
        title: track.title,
        url: track.contentDescriptor.url,
        thumbnail: track?.artwork?.dictionary ? makeImage({
          url: track.artwork.dictionary.url,
          height: track.artwork.dictionary.height,
          width: track.artwork.dictionary.width
        }) : "https://music.apple.com/assets/favicon/favicon-180.png",
        artist: {
          name: track.subtitleLinks?.[0]?.title ?? "Unknown Artist"
        }
      }));
    } catch {
      return [];
    }
  }
  static async getSongInfoFallback(res, name, id, link) {
    try {
      const metaTags = res.getElementsByTagName("meta");
      if (!metaTags.length) return null;
      const title = metaTags.find((r) => r.getAttribute("name") === "apple:title")?.getAttribute("content") || res.querySelector("title")?.innerText || name;
      const contentId = metaTags.find((r) => r.getAttribute("name") === "apple:content_id")?.getAttribute("content") || id;
      const durationRaw = metaTags.find((r) => r.getAttribute("property") === "music:song:duration")?.getAttribute("content");
      const song = {
        id: contentId,
        duration: durationRaw ? parseDuration(durationRaw) : metaTags.find((m) => m.getAttribute("name") === "apple:description")?.textContent.split("Duration: ")?.[1].split('"')?.[0] || "0:00",
        title,
        url: link,
        thumbnail: metaTags.find((r) => ["og:image:secure_url", "og:image"].includes(r.getAttribute("property")))?.getAttribute("content") || "https://music.apple.com/assets/favicon/favicon-180.png",
        artist: {
          name: res.querySelector(".song-subtitles__artists>a")?.textContent?.trim() || "Apple Music"
        }
      };
      return song;
    } catch {
      return null;
    }
  }
  static async getSongInfo(link) {
    if (!QueryResolver.regex.appleMusicSongRegex.test(link)) {
      return null;
    }
    const url = new URL(link);
    const id = url.searchParams.get("i");
    const name = url.pathname.split("album/")[1]?.split("/")[0];
    if (!id || !name) return null;
    const res = await getHTML(`https://music.apple.com/us/song/${name}/${id}`);
    if (!res) return null;
    try {
      const datasrc = res.getElementById("serialized-server-data")?.innerText || res.innerText.split('<script type="application/json" id="serialized-server-data">')?.[1]?.split("</script>")?.[0];
      if (!datasrc) throw "not found";
      const data = JSON.parse(datasrc)[0].data.seoData;
      const song = data.ogSongs[0]?.attributes;
      return {
        id: data.ogSongs[0]?.id || data.appleContentId || id,
        duration: song?.durationInMillis || "0:00",
        title: song?.name || data.appleTitle,
        url: song?.url || data.url || link,
        thumbnail: song?.artwork ? makeImage({
          url: song.artwork.url,
          height: song.artwork.height,
          width: song.artwork.width
        }) : data.artworkUrl ? makeImage({
          height: data.height,
          width: data.width,
          url: data.artworkUrl,
          ext: data.fileType || "jpg"
        }) : "https://music.apple.com/assets/favicon/favicon-180.png",
        artist: {
          name: song?.artistName || data.socialTitle || "Apple Music"
        }
      };
    } catch {
      return this.getSongInfoFallback(res, name, id, link);
    }
  }
  static async getPlaylistInfo(link) {
    if (!QueryResolver.regex.appleMusicPlaylistRegex.test(link)) {
      return null;
    }
    const res = await getHTML(link);
    if (!res) return null;
    try {
      const datasrc = res.getElementById("serialized-server-data")?.innerText || res.innerText.split('<script type="application/json" id="serialized-server-data">')?.[1]?.split("</script>")?.[0];
      if (!datasrc) throw "not found";
      const pl = JSON.parse(datasrc)[0].data.seoData;
      const thumbnail = pl.artworkUrl ? makeImage({
        height: pl.height,
        width: pl.width,
        url: pl.artworkUrl,
        ext: pl.fileType || "jpg"
      }) : "https://music.apple.com/assets/favicon/favicon-180.png";
      return {
        id: pl.appleContentId,
        title: pl.appleTitle,
        thumbnail,
        artist: {
          name: pl.ogSongs?.[0]?.attributes?.artistName || "Apple Music"
        },
        url: pl.url,
        tracks: (
          // eslint-disable-next-line
          pl.ogSongs?.map((m) => {
            const song = m.attributes;
            return {
              id: m.id,
              duration: song.durationInMillis || "0:00",
              title: song.name,
              url: song.url,
              thumbnail: song.artwork ? makeImage({
                url: song.artwork.url,
                height: song.artwork.height,
                width: song.artwork.width
              }) : thumbnail,
              artist: {
                name: song.artistName || "Apple Music"
              }
            };
          }) || []
        )
      };
    } catch {
      return null;
    }
  }
  static async getAlbumInfo(link) {
    if (!QueryResolver.regex.appleMusicAlbumRegex.test(link)) {
      return null;
    }
    const res = await getHTML(link);
    if (!res) return null;
    try {
      const datasrc = res.getElementById("serialized-server-data")?.innerText || res.innerText.split('<script type="application/json" id="serialized-server-data">')?.[1]?.split("</script>")?.[0];
      if (!datasrc) throw "not found";
      const pl = JSON.parse(datasrc)[0].data.seoData;
      const thumbnail = pl.artworkUrl ? makeImage({
        height: pl.height,
        width: pl.width,
        url: pl.artworkUrl,
        ext: pl.fileType || "jpg"
      }) : "https://music.apple.com/assets/favicon/favicon-180.png";
      return {
        id: pl.appleContentId,
        title: pl.appleTitle,
        thumbnail,
        artist: {
          name: pl.ogSongs?.[0]?.attributes?.artistName || "Apple Music"
        },
        url: pl.url,
        tracks: (
          // eslint-disable-next-line
          pl.ogSongs?.map((m) => {
            const song = m.attributes;
            return {
              id: m.id,
              duration: song.durationInMillis || "0:00",
              title: song.name,
              url: song.url,
              thumbnail: song.artwork ? makeImage({
                url: song.artwork.url,
                height: song.artwork.height,
                width: song.artwork.width
              }) : thumbnail,
              artist: {
                name: song.artistName || "Apple Music"
              }
            };
          }) || []
        )
      };
    } catch {
      return null;
    }
  }
};
__name(_AppleMusic, "AppleMusic");
var AppleMusic = _AppleMusic;

// src/internal/Spotify.ts
var SP_ANON_TOKEN_URL = "https://open.spotify.com/get_access_token?reason=transport&productType=embed";
var SP_ACCESS_TOKEN_URL = "https://accounts.spotify.com/api/token?grant_type=client_credentials";
var SP_BASE = "https://api.spotify.com/v1";
var _SpotifyAPI = class _SpotifyAPI {
  constructor(credentials = {
    clientId: null,
    clientSecret: null
  }) {
    this.credentials = credentials;
    __publicField(this, "accessToken", null);
  }
  get authorizationKey() {
    if (!this.credentials.clientId || !this.credentials.clientSecret) return null;
    return Buffer.from(`${this.credentials.clientId}:${this.credentials.clientSecret}`).toString("base64");
  }
  async requestToken() {
    const key = this.authorizationKey;
    if (!key) return await this.requestAnonymousToken();
    try {
      const res = await fetch(SP_ACCESS_TOKEN_URL, {
        method: "POST",
        headers: {
          "User-Agent": UA,
          Authorization: `Basic ${key}`,
          "Content-Type": "application/json"
        }
      });
      const body = await res.json();
      if (!body.access_token) throw "no token";
      const data = {
        token: body.access_token,
        expiresAfter: body.expires_in,
        type: "Bearer"
      };
      return this.accessToken = data;
    } catch {
      return await this.requestAnonymousToken();
    }
  }
  async requestAnonymousToken() {
    try {
      const res = await fetch(SP_ANON_TOKEN_URL, {
        headers: {
          "User-Agent": UA,
          "Content-Type": "application/json"
        }
      });
      if (!res.ok) throw "not_ok";
      const body = await res.json();
      if (!body.accessToken) throw "no_access_token";
      const data = {
        token: body.accessToken,
        expiresAfter: body.accessTokenExpirationTimestampMs,
        type: "Bearer"
      };
      return this.accessToken = data;
    } catch {
      return null;
    }
  }
  isTokenExpired() {
    if (!this.accessToken) return true;
    return Date.now() > this.accessToken.expiresAfter;
  }
  async search(query) {
    try {
      if (this.isTokenExpired()) await this.requestToken();
      if (!this.accessToken) return null;
      const res = await fetch(`${SP_BASE}/search/?q=${encodeURIComponent(query)}&type=track&market=US`, {
        headers: {
          "User-Agent": UA,
          Authorization: `${this.accessToken.type} ${this.accessToken.token}`,
          "Content-Type": "application/json"
        }
      });
      if (!res.ok) return null;
      const data = await res.json();
      return data.tracks.items.map((m) => ({
        title: m.name,
        duration: m.duration_ms,
        artist: m.artists.map((m2) => m2.name).join(", "),
        url: m.external_urls?.spotify || `https://open.spotify.com/track/${m.id}`,
        thumbnail: m.album.images?.[0]?.url || null
      }));
    } catch {
      return null;
    }
  }
  async getPlaylist(id) {
    try {
      if (this.isTokenExpired()) await this.requestToken();
      if (!this.accessToken) return null;
      const res = await fetch(`${SP_BASE}/playlists/${id}?market=US`, {
        headers: {
          "User-Agent": UA,
          Authorization: `${this.accessToken.type} ${this.accessToken.token}`,
          "Content-Type": "application/json"
        }
      });
      if (!res.ok) return null;
      const data = await res.json();
      if (!data.tracks.items.length) return null;
      const t = data.tracks.items;
      let next = data.tracks.next;
      while (typeof next === "string") {
        try {
          const res2 = await fetch(next, {
            headers: {
              "User-Agent": UA,
              Authorization: `${this.accessToken.type} ${this.accessToken.token}`,
              "Content-Type": "application/json"
            }
          });
          if (!res2.ok) break;
          const nextPage = await res2.json();
          t.push(...nextPage.items);
          next = nextPage.next;
          if (!next) break;
        } catch {
          break;
        }
      }
      const tracks = t.map(({ track: m }) => ({
        title: m.name,
        duration: m.duration_ms,
        artist: m.artists.map((m2) => m2.name).join(", "),
        url: m.external_urls?.spotify || `https://open.spotify.com/track/${m.id}`,
        thumbnail: m.album.images?.[0]?.url || null
      }));
      if (!tracks.length) return null;
      return {
        name: data.name,
        author: data.owner.display_name,
        thumbnail: data.images?.[0]?.url || null,
        id: data.id,
        url: data.external_urls.spotify || `https://open.spotify.com/playlist/${id}`,
        tracks
      };
    } catch {
      return null;
    }
  }
  async getAlbum(id) {
    try {
      if (this.isTokenExpired()) await this.requestToken();
      if (!this.accessToken) return null;
      const res = await fetch(`${SP_BASE}/albums/${id}?market=US`, {
        headers: {
          "User-Agent": UA,
          Authorization: `${this.accessToken.type} ${this.accessToken.token}`,
          "Content-Type": "application/json"
        }
      });
      if (!res.ok) return null;
      const data = await res.json();
      if (!data.tracks.items.length) return null;
      const t = data.tracks.items;
      let next = data.tracks.next;
      while (typeof next === "string") {
        try {
          const res2 = await fetch(next, {
            headers: {
              "User-Agent": UA,
              Authorization: `${this.accessToken.type} ${this.accessToken.token}`,
              "Content-Type": "application/json"
            }
          });
          if (!res2.ok) break;
          const nextPage = await res2.json();
          t.push(...nextPage.items);
          next = nextPage.next;
          if (!next) break;
        } catch {
          break;
        }
      }
      const tracks = t.map((m) => ({
        title: m.name,
        duration: m.duration_ms,
        artist: m.artists.map((m2) => m2.name).join(", "),
        url: m.external_urls?.spotify || `https://open.spotify.com/track/${m.id}`,
        thumbnail: data.images?.[0]?.url || null
      }));
      if (!tracks.length) return null;
      return {
        name: data.name,
        author: data.artists.map((m) => m.name).join(", "),
        thumbnail: data.images?.[0]?.url || null,
        id: data.id,
        url: data.external_urls.spotify || `https://open.spotify.com/album/${id}`,
        tracks
      };
    } catch {
      return null;
    }
  }
};
__name(_SpotifyAPI, "SpotifyAPI");
var SpotifyAPI = _SpotifyAPI;

// src/extractors/AppleMusicExtractor.ts
var _AppleMusicExtractor = class _AppleMusicExtractor extends BaseExtractor5 {
  constructor() {
    super(...arguments);
    __publicField(this, "_stream");
  }
  async activate() {
    this.protocols = ["amsearch", "applemusic"];
    const fn = this.options.createStream;
    if (typeof fn === "function") {
      this._stream = (q, t) => {
        return fn(this, q, t);
      };
    }
  }
  async deactivate() {
    this.protocols = [];
  }
  async validate(query, type) {
    return [
      QueryType5.APPLE_MUSIC_ALBUM,
      QueryType5.APPLE_MUSIC_PLAYLIST,
      QueryType5.APPLE_MUSIC_SONG,
      QueryType5.APPLE_MUSIC_SEARCH,
      QueryType5.AUTO,
      QueryType5.AUTO_SEARCH
    ].some((t) => t === type);
  }
  async getRelatedTracks(track, history) {
    if (track.queryType === QueryType5.APPLE_MUSIC_SONG) {
      const data = await this.handle(track.author || track.title, {
        type: QueryType5.APPLE_MUSIC_SEARCH,
        requestedBy: track.requestedBy
      });
      const unique = data.tracks.filter((t) => !history.tracks.some((h) => h.url === t.url));
      return unique.length > 0 ? this.createResponse(null, unique) : this.createResponse();
    }
    return this.createResponse();
  }
  async handle(query, context) {
    if (context.protocol === "amsearch") context.type = QueryType5.APPLE_MUSIC_SEARCH;
    switch (context.type) {
      case QueryType5.AUTO:
      case QueryType5.AUTO_SEARCH:
      case QueryType5.APPLE_MUSIC_SEARCH: {
        const data = await AppleMusic.search(query);
        if (!data || !data.length) return this.createResponse();
        const tracks = data.map(
          // eslint-disable-next-line @typescript-eslint/no-explicit-any
          (m) => {
            const track = new Track5(this.context.player, {
              author: m.artist.name,
              description: m.title,
              duration: typeof m.duration === "number" ? Util5.buildTimeCode(Util5.parseMS(m.duration)) : m.duration,
              thumbnail: m.thumbnail,
              title: m.title,
              url: m.url,
              views: 0,
              source: "apple_music",
              requestedBy: context.requestedBy,
              queryType: "appleMusicSong",
              metadata: {
                source: m,
                bridge: null
              },
              requestMetadata: /* @__PURE__ */ __name(async () => {
                return {
                  source: m,
                  bridge: null
                };
              }, "requestMetadata")
            });
            track.extractor = this;
            return track;
          }
        );
        return this.createResponse(null, tracks);
      }
      case QueryType5.APPLE_MUSIC_ALBUM: {
        const info = await AppleMusic.getAlbumInfo(query);
        if (!info) return this.createResponse();
        const playlist = new Playlist2(this.context.player, {
          author: {
            name: info.artist.name,
            url: ""
          },
          description: info.title,
          id: info.id,
          source: "apple_music",
          thumbnail: info.thumbnail,
          title: info.title,
          tracks: [],
          type: "album",
          url: info.url,
          rawPlaylist: info
        });
        playlist.tracks = info.tracks.map(
          (m) => {
            const track = new Track5(this.context.player, {
              author: m.artist.name,
              description: m.title,
              duration: typeof m.duration === "number" ? Util5.buildTimeCode(Util5.parseMS(m.duration)) : m.duration,
              thumbnail: m.thumbnail,
              title: m.title,
              url: m.url,
              views: 0,
              source: "apple_music",
              requestedBy: context.requestedBy,
              queryType: "appleMusicSong",
              metadata: {
                source: info,
                bridge: null
              },
              requestMetadata: /* @__PURE__ */ __name(async () => {
                return {
                  source: info,
                  bridge: null
                };
              }, "requestMetadata")
            });
            track.playlist = playlist;
            track.extractor = this;
            return track;
          }
        );
        return { playlist, tracks: playlist.tracks };
      }
      case QueryType5.APPLE_MUSIC_PLAYLIST: {
        const info = await AppleMusic.getPlaylistInfo(query);
        if (!info) return this.createResponse();
        const playlist = new Playlist2(this.context.player, {
          author: {
            name: info.artist.name,
            url: ""
          },
          description: info.title,
          id: info.id,
          source: "apple_music",
          thumbnail: info.thumbnail,
          title: info.title,
          tracks: [],
          type: "playlist",
          url: info.url,
          rawPlaylist: info
        });
        playlist.tracks = info.tracks.map(
          (m) => {
            const track = new Track5(this.context.player, {
              author: m.artist.name,
              description: m.title,
              duration: typeof m.duration === "number" ? Util5.buildTimeCode(Util5.parseMS(m.duration)) : m.duration,
              thumbnail: m.thumbnail,
              title: m.title,
              url: m.url,
              views: 0,
              source: "apple_music",
              requestedBy: context.requestedBy,
              queryType: "appleMusicSong",
              metadata: {
                source: m,
                bridge: null
              },
              requestMetadata: /* @__PURE__ */ __name(async () => {
                return {
                  source: m,
                  bridge: null
                };
              }, "requestMetadata")
            });
            track.playlist = playlist;
            track.extractor = this;
            return track;
          }
        );
        return { playlist, tracks: playlist.tracks };
      }
      case QueryType5.APPLE_MUSIC_SONG: {
        const info = await AppleMusic.getSongInfo(query);
        if (!info) return this.createResponse();
        const track = new Track5(this.context.player, {
          author: info.artist.name,
          description: info.title,
          duration: typeof info.duration === "number" ? Util5.buildTimeCode(Util5.parseMS(info.duration)) : info.duration,
          thumbnail: info.thumbnail,
          title: info.title,
          url: info.url,
          views: 0,
          source: "apple_music",
          requestedBy: context.requestedBy,
          queryType: context.type,
          metadata: {
            source: info,
            bridge: null
          },
          requestMetadata: /* @__PURE__ */ __name(async () => {
            return {
              source: info,
              bridge: null
            };
          }, "requestMetadata")
        });
        track.extractor = this;
        return { playlist: null, tracks: [track] };
      }
      default:
        return { playlist: null, tracks: [] };
    }
  }
  async stream(info) {
    if (this._stream) {
      const stream = await this._stream(info.url, info);
      if (typeof stream === "string") return stream;
      return stream;
    }
    const result = await this.context.requestBridge(info, this);
    if (!result?.result) throw new Error("Could not bridge this track");
    return result.result;
  }
};
__name(_AppleMusicExtractor, "AppleMusicExtractor");
__publicField(_AppleMusicExtractor, "identifier", "com.discord-player.applemusicextractor");
var AppleMusicExtractor = _AppleMusicExtractor;

// src/extractors/SpotifyExtractor.ts
import {
  BaseExtractor as BaseExtractor6,
  Playlist as Playlist3,
  QueryType as QueryType6,
  Track as Track6,
  Util as Util6
} from "discord-player";
import spotify from "spotify-url-info";
var re = /^(?:https:\/\/open\.spotify\.com\/(intl-([a-z]|[A-Z]){0,3}\/)?(?:user\/[A-Za-z0-9]+\/)?|spotify:)(album|playlist|track)(?:[/:])([A-Za-z0-9]+).*$/;
var _SpotifyExtractor = class _SpotifyExtractor extends BaseExtractor6 {
  constructor() {
    super(...arguments);
    __publicField(this, "_stream");
    __publicField(this, "_lib");
    __publicField(this, "_credentials", {
      clientId: this.options.clientId || process.env.DP_SPOTIFY_CLIENT_ID || null,
      clientSecret: this.options.clientSecret || process.env.DP_SPOTIFY_CLIENT_SECRET || null
    });
    __publicField(this, "internal", new SpotifyAPI(this._credentials));
  }
  async activate() {
    this.protocols = ["spsearch", "spotify"];
    this._lib = spotify(fetch);
    if (this.internal.isTokenExpired()) await this.internal.requestToken();
    const fn = this.options.createStream;
    if (typeof fn === "function") {
      this._stream = (q) => {
        return fn(this, q);
      };
    }
  }
  async deactivate() {
    this._stream = void 0;
    this._lib = void 0;
    this.protocols = [];
  }
  async validate(query, type) {
    return [
      QueryType6.SPOTIFY_ALBUM,
      QueryType6.SPOTIFY_PLAYLIST,
      QueryType6.SPOTIFY_SONG,
      QueryType6.SPOTIFY_SEARCH,
      QueryType6.AUTO,
      QueryType6.AUTO_SEARCH
    ].some((t) => t === type);
  }
  async getRelatedTracks(track) {
    return await this.handle(track.author || track.title, {
      type: QueryType6.SPOTIFY_SEARCH,
      requestedBy: track.requestedBy
    });
  }
  async handle(query, context) {
    if (context.protocol === "spsearch") context.type = QueryType6.SPOTIFY_SEARCH;
    switch (context.type) {
      case QueryType6.AUTO:
      case QueryType6.AUTO_SEARCH:
      case QueryType6.SPOTIFY_SEARCH: {
        const data = await this.internal.search(query);
        if (!data) return this.createResponse();
        return this.createResponse(
          null,
          data.map((spotifyData) => {
            const track = new Track6(this.context.player, {
              title: spotifyData.title,
              description: `${spotifyData.title} by ${spotifyData.artist}`,
              author: spotifyData.artist ?? "Unknown Artist",
              url: spotifyData.url,
              thumbnail: spotifyData.thumbnail || "https://www.scdn.co/i/_global/twitter_card-default.jpg",
              duration: Util6.buildTimeCode(Util6.parseMS(spotifyData.duration ?? 0)),
              views: 0,
              requestedBy: context.requestedBy,
              source: "spotify",
              queryType: QueryType6.SPOTIFY_SONG,
              metadata: {
                source: spotifyData,
                bridge: null
              },
              requestMetadata: /* @__PURE__ */ __name(async () => {
                return {
                  source: spotifyData,
                  bridge: null
                };
              }, "requestMetadata")
            });
            track.extractor = this;
            return track;
          })
        );
      }
      case QueryType6.SPOTIFY_SONG: {
        const spotifyData = await this._lib.getData(query, context.requestOptions).catch(Util6.noop);
        if (!spotifyData) return { playlist: null, tracks: [] };
        const spotifyTrack = new Track6(this.context.player, {
          title: spotifyData.title,
          description: `${spotifyData.name} by ${spotifyData.artists.map((m) => m.name).join(", ")}`,
          author: spotifyData.artists[0]?.name ?? "Unknown Artist",
          url: spotifyData.id ? `https://open.spotify.com/track/${spotifyData.id}` : query,
          thumbnail: spotifyData.coverArt?.sources?.[0]?.url || "https://www.scdn.co/i/_global/twitter_card-default.jpg",
          duration: Util6.buildTimeCode(Util6.parseMS(spotifyData.duration ?? spotifyData.maxDuration ?? 0)),
          views: 0,
          requestedBy: context.requestedBy,
          source: "spotify",
          queryType: context.type,
          metadata: {
            source: spotifyData,
            bridge: null
          },
          requestMetadata: /* @__PURE__ */ __name(async () => {
            return {
              source: spotifyData,
              bridge: null
            };
          }, "requestMetadata")
        });
        spotifyTrack.extractor = this;
        return { playlist: null, tracks: [spotifyTrack] };
      }
      case QueryType6.SPOTIFY_PLAYLIST: {
        try {
          const { queryType, id } = this.parse(query);
          if (queryType !== "playlist") throw "err";
          const spotifyPlaylist = await this.internal.getPlaylist(id);
          if (!spotifyPlaylist) throw "err";
          const playlist = new Playlist3(this.context.player, {
            title: spotifyPlaylist.name,
            description: spotifyPlaylist.name ?? "",
            thumbnail: spotifyPlaylist.thumbnail ?? "https://www.scdn.co/i/_global/twitter_card-default.jpg",
            type: "playlist",
            source: "spotify",
            author: {
              name: spotifyPlaylist.author ?? "Unknown Artist",
              url: null
            },
            tracks: [],
            id: spotifyPlaylist.id,
            url: spotifyPlaylist.url || query,
            rawPlaylist: spotifyPlaylist
          });
          playlist.tracks = spotifyPlaylist.tracks.map((spotifyData) => {
            const data = new Track6(this.context.player, {
              title: spotifyData.title,
              description: `${spotifyData.title} by ${spotifyData.artist}`,
              author: spotifyData.artist ?? "Unknown Artist",
              url: spotifyData.url,
              thumbnail: spotifyData.thumbnail || "https://www.scdn.co/i/_global/twitter_card-default.jpg",
              duration: Util6.buildTimeCode(Util6.parseMS(spotifyData.duration ?? 0)),
              views: 0,
              requestedBy: context.requestedBy,
              source: "spotify",
              queryType: QueryType6.SPOTIFY_SONG,
              metadata: {
                source: spotifyData,
                bridge: null
              },
              requestMetadata: /* @__PURE__ */ __name(async () => {
                return {
                  source: spotifyData,
                  bridge: null
                };
              }, "requestMetadata")
            });
            data.extractor = this;
            data.playlist = playlist;
            return data;
          });
          return { playlist, tracks: playlist.tracks };
        } catch {
          const spotifyPlaylist = await this._lib.getData(query, context.requestOptions).catch(Util6.noop);
          if (!spotifyPlaylist) return { playlist: null, tracks: [] };
          const playlist = new Playlist3(this.context.player, {
            title: spotifyPlaylist.name ?? spotifyPlaylist.title,
            description: spotifyPlaylist.title ?? "",
            thumbnail: spotifyPlaylist.coverArt?.sources?.[0]?.url ?? "https://www.scdn.co/i/_global/twitter_card-default.jpg",
            type: spotifyPlaylist.type,
            source: "spotify",
            author: {
              name: spotifyPlaylist.subtitle ?? "Unknown Artist",
              url: null
            },
            tracks: [],
            id: spotifyPlaylist.id,
            url: spotifyPlaylist.id ? `https://open.spotify.com/playlist/${spotifyPlaylist.id}` : query,
            rawPlaylist: spotifyPlaylist
          });
          playlist.tracks = spotifyPlaylist.trackList.map((m) => {
            const data = new Track6(this.context.player, {
              title: m.title ?? "",
              description: m.title ?? "",
              author: m.subtitle ?? "Unknown Artist",
              url: m.uid ? `https://open.spotify.com/tracks/${m.uid}` : query,
              thumbnail: "https://www.scdn.co/i/_global/twitter_card-default.jpg",
              duration: Util6.buildTimeCode(Util6.parseMS(m.duration)),
              views: 0,
              requestedBy: context.requestedBy,
              playlist,
              source: "spotify",
              queryType: "spotifySong",
              metadata: {
                source: m,
                bridge: null
              },
              requestMetadata: /* @__PURE__ */ __name(async () => {
                return {
                  source: m,
                  bridge: null
                };
              }, "requestMetadata")
            });
            data.extractor = this;
            data.playlist = playlist;
            return data;
          });
          return { playlist, tracks: playlist.tracks };
        }
      }
      case QueryType6.SPOTIFY_ALBUM: {
        try {
          const { queryType, id } = this.parse(query);
          if (queryType !== "album") throw "err";
          const spotifyAlbum = await this.internal.getAlbum(id);
          if (!spotifyAlbum) throw "err";
          const playlist = new Playlist3(this.context.player, {
            title: spotifyAlbum.name,
            description: spotifyAlbum.name ?? "",
            thumbnail: spotifyAlbum.thumbnail ?? "https://www.scdn.co/i/_global/twitter_card-default.jpg",
            type: "album",
            source: "spotify",
            author: {
              name: spotifyAlbum.author ?? "Unknown Artist",
              url: null
            },
            tracks: [],
            id: spotifyAlbum.id,
            url: spotifyAlbum.url || query,
            rawPlaylist: spotifyAlbum
          });
          playlist.tracks = spotifyAlbum.tracks.map((spotifyData) => {
            const data = new Track6(this.context.player, {
              title: spotifyData.title,
              description: `${spotifyData.title} by ${spotifyData.artist}`,
              author: spotifyData.artist ?? "Unknown Artist",
              url: spotifyData.url,
              thumbnail: spotifyData.thumbnail || "https://www.scdn.co/i/_global/twitter_card-default.jpg",
              duration: Util6.buildTimeCode(Util6.parseMS(spotifyData.duration ?? 0)),
              views: 0,
              requestedBy: context.requestedBy,
              source: "spotify",
              queryType: QueryType6.SPOTIFY_SONG,
              metadata: {
                source: spotifyData,
                bridge: null
              },
              requestMetadata: /* @__PURE__ */ __name(async () => {
                return {
                  source: spotifyData,
                  bridge: null
                };
              }, "requestMetadata")
            });
            data.extractor = this;
            data.playlist = playlist;
            return data;
          });
          return { playlist, tracks: playlist.tracks };
        } catch {
          const album = await this._lib.getData(query, context.requestOptions).catch(Util6.noop);
          if (!album) return { playlist: null, tracks: [] };
          const playlist = new Playlist3(this.context.player, {
            title: album.name ?? album.title,
            description: album.title ?? "",
            thumbnail: album.coverArt?.sources?.[0]?.url ?? "https://www.scdn.co/i/_global/twitter_card-default.jpg",
            type: album.type,
            source: "spotify",
            author: {
              name: album.subtitle ?? "Unknown Artist",
              url: null
            },
            tracks: [],
            id: album.id,
            url: album.id ? `https://open.spotify.com/playlist/${album.id}` : query,
            rawPlaylist: album
          });
          playlist.tracks = album.trackList.map((m) => {
            const data = new Track6(this.context.player, {
              title: m.title ?? "",
              description: m.title ?? "",
              author: m.subtitle ?? "Unknown Artist",
              url: m.uid ? `https://open.spotify.com/tracks/${m.uid}` : query,
              thumbnail: "https://www.scdn.co/i/_global/twitter_card-default.jpg",
              duration: Util6.buildTimeCode(Util6.parseMS(m.duration)),
              views: 0,
              requestedBy: context.requestedBy,
              playlist,
              source: "spotify",
              queryType: "spotifySong",
              metadata: {
                source: m,
                bridge: null
              },
              requestMetadata: /* @__PURE__ */ __name(async () => {
                return {
                  source: m,
                  bridge: null
                };
              }, "requestMetadata")
            });
            data.extractor = this;
            data.playlist = playlist;
            return data;
          });
          return { playlist, tracks: playlist.tracks };
        }
      }
      default:
        return { playlist: null, tracks: [] };
    }
  }
  async stream(info) {
    if (this._stream) {
      const stream = await this._stream(info.url, info);
      if (typeof stream === "string") return stream;
      return stream;
    }
    const result = await this.context.requestBridge(info, this);
    if (!result?.result) throw new Error("Could not bridge this track");
    return result.result;
  }
  parse(q) {
    const [, , , queryType, id] = re.exec(q) || [];
    return { queryType, id };
  }
};
__name(_SpotifyExtractor, "SpotifyExtractor");
__publicField(_SpotifyExtractor, "identifier", "com.discord-player.spotifyextractor");
var SpotifyExtractor = _SpotifyExtractor;

// src/version.ts
var version = (
  /* @__MACRO__ getVersion */
  "7.0.0"
);

// src/index.ts
var DefaultExtractors = [
  SoundCloudExtractor,
  AttachmentExtractor,
  VimeoExtractor,
  ReverbnationExtractor,
  AppleMusicExtractor,
  SpotifyExtractor
];
export {
  AppleMusicExtractor,
  AttachmentExtractor,
  DefaultExtractors,
  internal_exports as Internal,
  ReverbnationExtractor,
  SoundCloudExtractor,
  SpotifyExtractor,
  VimeoExtractor,
  lyricsExtractor,
  version
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL2V4dHJhY3RvcnMvU291bmRDbG91ZEV4dHJhY3Rvci50cyIsICIuLi9zcmMvaW50ZXJuYWwvaGVscGVyLnRzIiwgIi4uL3NyYy9leHRyYWN0b3JzL0x5cmljc0V4dHJhY3Rvci50cyIsICIuLi9zcmMvZXh0cmFjdG9ycy9WaW1lb0V4dHJhY3Rvci50cyIsICIuLi9zcmMvaW50ZXJuYWwvVmltZW8udHMiLCAiLi4vc3JjL2V4dHJhY3RvcnMvUmV2ZXJibmF0aW9uRXh0cmFjdG9yLnRzIiwgIi4uL3NyYy9leHRyYWN0b3JzL0F0dGFjaG1lbnRFeHRyYWN0b3IudHMiLCAiLi4vc3JjL2ludGVybmFsL2Rvd25sb2FkZXIudHMiLCAiLi4vc3JjL2V4dHJhY3RvcnMvQXBwbGVNdXNpY0V4dHJhY3Rvci50cyIsICIuLi9zcmMvaW50ZXJuYWwvaW5kZXgudHMiLCAiLi4vc3JjL2ludGVybmFsL0FwcGxlTXVzaWMudHMiLCAiLi4vc3JjL2ludGVybmFsL1Nwb3RpZnkudHMiLCAiLi4vc3JjL2V4dHJhY3RvcnMvU3BvdGlmeUV4dHJhY3Rvci50cyIsICIuLi9zcmMvdmVyc2lvbi50cyIsICIuLi9zcmMvaW5kZXgudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8vIHByZXR0aWVyLWlnbm9yZVxuaW1wb3J0IHtcbiAgQmFzZUV4dHJhY3RvcixcbiAgRXh0cmFjdG9ySW5mbyxcbiAgRXh0cmFjdG9yU2VhcmNoQ29udGV4dCxcbiAgRXh0cmFjdG9yU3RyZWFtYWJsZSxcbiAgdHlwZSBHdWlsZFF1ZXVlSGlzdG9yeSxcbiAgUGxheWxpc3QsXG4gIFF1ZXJ5VHlwZSxcbiAgU2VhcmNoUXVlcnlUeXBlLFxuICBUcmFjayxcbiAgVXRpbCB9IGZyb21cbidkaXNjb3JkLXBsYXllcic7XG5pbXBvcnQgKiBhcyBTb3VuZENsb3VkIGZyb20gJ3NvdW5kY2xvdWQudHMnO1xuaW1wb3J0IHsgZmlsdGVyU291bmRDbG91ZFByZXZpZXdzIH0gZnJvbSAnLi4vaW50ZXJuYWwvaGVscGVyJztcblxuZXhwb3J0IGludGVyZmFjZSBTb3VuZENsb3VkRXh0cmFjdG9ySW5pdCB7XG4gIGNsaWVudElkPzogc3RyaW5nO1xuICBvYXV0aFRva2VuPzogc3RyaW5nO1xuICBwcm94eT86IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIFNvdW5kQ2xvdWRFeHRyYWN0b3IgZXh0ZW5kcyBCYXNlRXh0cmFjdG9yPFNvdW5kQ2xvdWRFeHRyYWN0b3JJbml0PiB7XG4gIHB1YmxpYyBzdGF0aWMgaWRlbnRpZmllciA9ICdjb20uZGlzY29yZC1wbGF5ZXIuc291bmRjbG91ZGV4dHJhY3RvcicgYXMgY29uc3Q7XG4gIHB1YmxpYyBzdGF0aWMgaW5zdGFuY2U6IFNvdW5kQ2xvdWRFeHRyYWN0b3IgfCBudWxsID0gbnVsbDtcblxuICBwdWJsaWMgaW50ZXJuYWwgPSBuZXcgU291bmRDbG91ZC5kZWZhdWx0KHtcbiAgICBjbGllbnRJZDogdGhpcy5vcHRpb25zLmNsaWVudElkLFxuICAgIG9hdXRoVG9rZW46IHRoaXMub3B0aW9ucy5vYXV0aFRva2VuLFxuICAgIHByb3h5OiB0aGlzLm9wdGlvbnMucHJveHlcbiAgfSk7XG5cbiAgcHVibGljIGFzeW5jIGFjdGl2YXRlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMucHJvdG9jb2xzID0gWydzY3NlYXJjaCcsICdzb3VuZGNsb3VkJ107XG4gICAgU291bmRDbG91ZEV4dHJhY3Rvci5pbnN0YW5jZSA9IHRoaXM7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZGVhY3RpdmF0ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLnByb3RvY29scyA9IFtdO1xuICAgIFNvdW5kQ2xvdWRFeHRyYWN0b3IuaW5zdGFuY2UgPSBudWxsO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHZhbGlkYXRlKHF1ZXJ5OiBzdHJpbmcsIHR5cGU/OiBTZWFyY2hRdWVyeVR5cGUgfCBudWxsIHwgdW5kZWZpbmVkKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgaWYgKHR5cGVvZiBxdWVyeSAhPT0gJ3N0cmluZycpIHJldHVybiBmYWxzZTtcbiAgICAvLyBwcmV0dGllci1pZ25vcmVcbiAgICByZXR1cm4gKFtcbiAgICBRdWVyeVR5cGUuU09VTkRDTE9VRCxcbiAgICBRdWVyeVR5cGUuU09VTkRDTE9VRF9QTEFZTElTVCxcbiAgICBRdWVyeVR5cGUuU09VTkRDTE9VRF9TRUFSQ0gsXG4gICAgUXVlcnlUeXBlLlNPVU5EQ0xPVURfVFJBQ0ssXG4gICAgUXVlcnlUeXBlLkFVVE8sXG4gICAgUXVlcnlUeXBlLkFVVE9fU0VBUkNIXSBhc1xuICAgIFNlYXJjaFF1ZXJ5VHlwZVtdKS5zb21lKChyKSA9PiByID09PSB0eXBlKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRSZWxhdGVkVHJhY2tzKHRyYWNrOiBUcmFjaywgaGlzdG9yeTogR3VpbGRRdWV1ZUhpc3RvcnkpIHtcbiAgICBpZiAodHJhY2sucXVlcnlUeXBlID09PSBRdWVyeVR5cGUuU09VTkRDTE9VRF9UUkFDSykge1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuaW50ZXJuYWwudHJhY2tzLnJlbGF0ZWRWMih0cmFjay51cmwsIDUpO1xuXG4gICAgICBjb25zdCB1bmlxdWUgPSBmaWx0ZXJTb3VuZENsb3VkUHJldmlld3MoZGF0YSkuZmlsdGVyKFxuICAgICAgICAodCkgPT4gIWhpc3RvcnkudHJhY2tzLnNvbWUoKGgpID0+IGgudXJsID09PSB0LnBlcm1hbGlua191cmwpXG4gICAgICApO1xuXG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVSZXNwb25zZShcbiAgICAgICAgbnVsbCxcbiAgICAgICAgKHVuaXF1ZS5sZW5ndGggPiAwID8gdW5pcXVlIDogZGF0YSkubWFwKCh0cmFja0luZm8pID0+IHtcbiAgICAgICAgICBjb25zdCBuZXdUcmFjayA9IG5ldyBUcmFjayh0aGlzLmNvbnRleHQucGxheWVyLCB7XG4gICAgICAgICAgICB0aXRsZTogdHJhY2tJbmZvLnRpdGxlLFxuICAgICAgICAgICAgdXJsOiB0cmFja0luZm8ucGVybWFsaW5rX3VybCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBVdGlsLmJ1aWxkVGltZUNvZGUoVXRpbC5wYXJzZU1TKHRyYWNrSW5mby5kdXJhdGlvbikpLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRyYWNrSW5mby5kZXNjcmlwdGlvbiA/PyAnJyxcbiAgICAgICAgICAgIHRodW1ibmFpbDogdHJhY2tJbmZvLmFydHdvcmtfdXJsLFxuICAgICAgICAgICAgdmlld3M6IHRyYWNrSW5mby5wbGF5YmFja19jb3VudCxcbiAgICAgICAgICAgIGF1dGhvcjogdHJhY2tJbmZvLnVzZXIudXNlcm5hbWUsXG4gICAgICAgICAgICByZXF1ZXN0ZWRCeTogdHJhY2sucmVxdWVzdGVkQnksXG4gICAgICAgICAgICBzb3VyY2U6ICdzb3VuZGNsb3VkJyxcbiAgICAgICAgICAgIGVuZ2luZTogdHJhY2tJbmZvLFxuICAgICAgICAgICAgcXVlcnlUeXBlOiBRdWVyeVR5cGUuU09VTkRDTE9VRF9UUkFDSyxcbiAgICAgICAgICAgIG1ldGFkYXRhOiB0cmFja0luZm8sXG4gICAgICAgICAgICByZXF1ZXN0TWV0YWRhdGE6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRyYWNrSW5mbztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbGVhblRpdGxlOiB0cmFja0luZm8udGl0bGVcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIG5ld1RyYWNrLmV4dHJhY3RvciA9IHRoaXM7XG5cbiAgICAgICAgICByZXR1cm4gbmV3VHJhY2s7XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNyZWF0ZVJlc3BvbnNlKCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgaGFuZGxlKHF1ZXJ5OiBzdHJpbmcsIGNvbnRleHQ6IEV4dHJhY3RvclNlYXJjaENvbnRleHQpOiBQcm9taXNlPEV4dHJhY3RvckluZm8+IHtcbiAgICBpZiAoY29udGV4dC5wcm90b2NvbCA9PT0gJ3Njc2VhcmNoJykgY29udGV4dC50eXBlID0gUXVlcnlUeXBlLlNPVU5EQ0xPVURfU0VBUkNIO1xuICAgIHN3aXRjaCAoY29udGV4dC50eXBlKSB7XG4gICAgICBjYXNlIFF1ZXJ5VHlwZS5TT1VORENMT1VEX1RSQUNLOntcbiAgICAgICAgICBjb25zdCB0cmFja0luZm8gPSBhd2FpdCB0aGlzLmludGVybmFsLnRyYWNrcy5nZXRWMihxdWVyeSkuY2F0Y2goVXRpbC5ub29wKTtcblxuICAgICAgICAgIGlmICghdHJhY2tJbmZvKSByZXR1cm4gdGhpcy5lbXB0eVJlc3BvbnNlKCk7XG5cbiAgICAgICAgICBjb25zdCB0cmFjayA9IG5ldyBUcmFjayh0aGlzLmNvbnRleHQucGxheWVyLCB7XG4gICAgICAgICAgICB0aXRsZTogdHJhY2tJbmZvLnRpdGxlLFxuICAgICAgICAgICAgdXJsOiB0cmFja0luZm8ucGVybWFsaW5rX3VybCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBVdGlsLmJ1aWxkVGltZUNvZGUoVXRpbC5wYXJzZU1TKHRyYWNrSW5mby5kdXJhdGlvbikpLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRyYWNrSW5mby5kZXNjcmlwdGlvbiA/PyAnJyxcbiAgICAgICAgICAgIHRodW1ibmFpbDogdHJhY2tJbmZvLmFydHdvcmtfdXJsLFxuICAgICAgICAgICAgdmlld3M6IHRyYWNrSW5mby5wbGF5YmFja19jb3VudCxcbiAgICAgICAgICAgIGF1dGhvcjogdHJhY2tJbmZvLnVzZXIudXNlcm5hbWUsXG4gICAgICAgICAgICByZXF1ZXN0ZWRCeTogY29udGV4dC5yZXF1ZXN0ZWRCeSxcbiAgICAgICAgICAgIHNvdXJjZTogJ3NvdW5kY2xvdWQnLFxuICAgICAgICAgICAgZW5naW5lOiB0cmFja0luZm8sXG4gICAgICAgICAgICBxdWVyeVR5cGU6IGNvbnRleHQudHlwZSxcbiAgICAgICAgICAgIG1ldGFkYXRhOiB0cmFja0luZm8sXG4gICAgICAgICAgICByZXF1ZXN0TWV0YWRhdGE6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRyYWNrSW5mbztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbGVhblRpdGxlOiB0cmFja0luZm8udGl0bGVcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHRyYWNrLmV4dHJhY3RvciA9IHRoaXM7XG5cbiAgICAgICAgICByZXR1cm4geyBwbGF5bGlzdDogbnVsbCwgdHJhY2tzOiBbdHJhY2tdIH07XG4gICAgICAgIH1cbiAgICAgIGNhc2UgUXVlcnlUeXBlLlNPVU5EQ0xPVURfUExBWUxJU1Q6e1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmludGVybmFsLnBsYXlsaXN0cy5nZXRWMihxdWVyeSkuY2F0Y2goVXRpbC5ub29wKTtcbiAgICAgICAgICBpZiAoIWRhdGEpIHJldHVybiB7IHBsYXlsaXN0OiBudWxsLCB0cmFja3M6IFtdIH07XG5cbiAgICAgICAgICBjb25zdCByZXMgPSBuZXcgUGxheWxpc3QodGhpcy5jb250ZXh0LnBsYXllciwge1xuICAgICAgICAgICAgdGl0bGU6IGRhdGEudGl0bGUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiA/PyAnJyxcbiAgICAgICAgICAgIHRodW1ibmFpbDogZGF0YS5hcnR3b3JrX3VybCA/PyBkYXRhLnRyYWNrc1swXS5hcnR3b3JrX3VybCxcbiAgICAgICAgICAgIHR5cGU6ICdwbGF5bGlzdCcsXG4gICAgICAgICAgICBzb3VyY2U6ICdzb3VuZGNsb3VkJyxcbiAgICAgICAgICAgIGF1dGhvcjoge1xuICAgICAgICAgICAgICBuYW1lOiBkYXRhLnVzZXIudXNlcm5hbWUsXG4gICAgICAgICAgICAgIHVybDogZGF0YS51c2VyLnBlcm1hbGlua191cmxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0cmFja3M6IFtdLFxuICAgICAgICAgICAgaWQ6IGAke2RhdGEuaWR9YCxcbiAgICAgICAgICAgIHVybDogZGF0YS5wZXJtYWxpbmtfdXJsLFxuICAgICAgICAgICAgcmF3UGxheWxpc3Q6IGRhdGFcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGZvciAoY29uc3Qgc29uZyBvZiBkYXRhLnRyYWNrcykge1xuICAgICAgICAgICAgY29uc3QgdHJhY2sgPSBuZXcgVHJhY2sodGhpcy5jb250ZXh0LnBsYXllciwge1xuICAgICAgICAgICAgICB0aXRsZTogc29uZy50aXRsZSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHNvbmcuZGVzY3JpcHRpb24gPz8gJycsXG4gICAgICAgICAgICAgIGF1dGhvcjogc29uZy51c2VyLnVzZXJuYW1lLFxuICAgICAgICAgICAgICB1cmw6IHNvbmcucGVybWFsaW5rX3VybCxcbiAgICAgICAgICAgICAgdGh1bWJuYWlsOiBzb25nLmFydHdvcmtfdXJsLFxuICAgICAgICAgICAgICBkdXJhdGlvbjogVXRpbC5idWlsZFRpbWVDb2RlKFV0aWwucGFyc2VNUyhzb25nLmR1cmF0aW9uKSksXG4gICAgICAgICAgICAgIHZpZXdzOiBzb25nLnBsYXliYWNrX2NvdW50LFxuICAgICAgICAgICAgICByZXF1ZXN0ZWRCeTogY29udGV4dC5yZXF1ZXN0ZWRCeSxcbiAgICAgICAgICAgICAgcGxheWxpc3Q6IHJlcyxcbiAgICAgICAgICAgICAgc291cmNlOiAnc291bmRjbG91ZCcsXG4gICAgICAgICAgICAgIGVuZ2luZTogc29uZyxcbiAgICAgICAgICAgICAgcXVlcnlUeXBlOiBjb250ZXh0LnR5cGUsXG4gICAgICAgICAgICAgIG1ldGFkYXRhOiBzb25nLFxuICAgICAgICAgICAgICByZXF1ZXN0TWV0YWRhdGE6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc29uZztcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgY2xlYW5UaXRsZTogc29uZy50aXRsZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0cmFjay5leHRyYWN0b3IgPSB0aGlzO1xuICAgICAgICAgICAgdHJhY2sucGxheWxpc3QgPSByZXM7XG4gICAgICAgICAgICByZXMudHJhY2tzLnB1c2godHJhY2spO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB7IHBsYXlsaXN0OiByZXMsIHRyYWNrczogcmVzLnRyYWNrcyB9O1xuICAgICAgICB9XG4gICAgICBkZWZhdWx0OntcbiAgICAgICAgICBsZXQgdHJhY2tzID0gYXdhaXQgdGhpcy5pbnRlcm5hbC50cmFja3MuXG4gICAgICAgICAgc2VhcmNoVjIoeyBxOiBxdWVyeSB9KS5cbiAgICAgICAgICB0aGVuKCh0KSA9PiB0LmNvbGxlY3Rpb24pLlxuICAgICAgICAgIGNhdGNoKFV0aWwubm9vcCk7XG5cbiAgICAgICAgICBpZiAoIXRyYWNrcykgdHJhY2tzID0gYXdhaXQgdGhpcy5pbnRlcm5hbC50cmFja3Muc2VhcmNoQWx0KHF1ZXJ5KS5jYXRjaChVdGlsLm5vb3ApO1xuXG4gICAgICAgICAgaWYgKCF0cmFja3MgfHwgIXRyYWNrcy5sZW5ndGgpIHJldHVybiB0aGlzLmVtcHR5UmVzcG9uc2UoKTtcblxuICAgICAgICAgIHRyYWNrcyA9IGZpbHRlclNvdW5kQ2xvdWRQcmV2aWV3cyh0cmFja3MpO1xuXG4gICAgICAgICAgY29uc3QgcmVzb2x2ZWRUcmFja3M6IFRyYWNrW10gPSBbXTtcblxuICAgICAgICAgIGZvciAoY29uc3QgdHJhY2tJbmZvIG9mIHRyYWNrcykge1xuICAgICAgICAgICAgaWYgKCF0cmFja0luZm8uc3RyZWFtYWJsZSkgY29udGludWU7XG4gICAgICAgICAgICBjb25zdCB0cmFjayA9IG5ldyBUcmFjayh0aGlzLmNvbnRleHQucGxheWVyLCB7XG4gICAgICAgICAgICAgIHRpdGxlOiB0cmFja0luZm8udGl0bGUsXG4gICAgICAgICAgICAgIHVybDogdHJhY2tJbmZvLnBlcm1hbGlua191cmwsXG4gICAgICAgICAgICAgIGR1cmF0aW9uOiBVdGlsLmJ1aWxkVGltZUNvZGUoVXRpbC5wYXJzZU1TKHRyYWNrSW5mby5kdXJhdGlvbikpLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdHJhY2tJbmZvLmRlc2NyaXB0aW9uID8/ICcnLFxuICAgICAgICAgICAgICB0aHVtYm5haWw6IHRyYWNrSW5mby5hcnR3b3JrX3VybCxcbiAgICAgICAgICAgICAgdmlld3M6IHRyYWNrSW5mby5wbGF5YmFja19jb3VudCxcbiAgICAgICAgICAgICAgYXV0aG9yOiB0cmFja0luZm8udXNlci51c2VybmFtZSxcbiAgICAgICAgICAgICAgcmVxdWVzdGVkQnk6IGNvbnRleHQucmVxdWVzdGVkQnksXG4gICAgICAgICAgICAgIHNvdXJjZTogJ3NvdW5kY2xvdWQnLFxuICAgICAgICAgICAgICBlbmdpbmU6IHRyYWNrSW5mbyxcbiAgICAgICAgICAgICAgcXVlcnlUeXBlOiAnc291bmRjbG91ZFRyYWNrJyxcbiAgICAgICAgICAgICAgbWV0YWRhdGE6IHRyYWNrSW5mbyxcbiAgICAgICAgICAgICAgcmVxdWVzdE1ldGFkYXRhOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYWNrSW5mbztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRyYWNrLmV4dHJhY3RvciA9IHRoaXM7XG5cbiAgICAgICAgICAgIHJlc29sdmVkVHJhY2tzLnB1c2godHJhY2spO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB7IHBsYXlsaXN0OiBudWxsLCB0cmFja3M6IHJlc29sdmVkVHJhY2tzIH07XG4gICAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZW1wdHlSZXNwb25zZSgpOiBFeHRyYWN0b3JJbmZvIHtcbiAgICByZXR1cm4geyBwbGF5bGlzdDogbnVsbCwgdHJhY2tzOiBbXSB9O1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHN0cmVhbShpbmZvOiBUcmFjaykge1xuICAgIGNvbnN0IHVybCA9IGF3YWl0IHRoaXMuaW50ZXJuYWwudXRpbC5zdHJlYW1MaW5rKGluZm8udXJsKS5jYXRjaChVdGlsLm5vb3ApO1xuICAgIGlmICghdXJsKSB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBleHRyYWN0IHN0cmVhbSBmcm9tIHRoaXMgdHJhY2sgc291cmNlJyk7XG5cbiAgICByZXR1cm4gdXJsO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGJyaWRnZSh0cmFjazogVHJhY2ssIHNvdXJjZUV4dHJhY3RvcjogQmFzZUV4dHJhY3RvciB8IG51bGwpOiBQcm9taXNlPEV4dHJhY3RvclN0cmVhbWFibGUgfCBudWxsPiB7XG4gICAgaWYgKHNvdXJjZUV4dHJhY3Rvcj8uaWRlbnRpZmllciA9PT0gdGhpcy5pZGVudGlmaWVyKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdHJlYW0odHJhY2spO1xuICAgIH1cblxuICAgIGNvbnN0IHF1ZXJ5ID0gc291cmNlRXh0cmFjdG9yPy5jcmVhdGVCcmlkZ2VRdWVyeSh0cmFjaykgPz8gYCR7dHJhY2suYXV0aG9yfSAtICR7dHJhY2sudGl0bGV9YDtcblxuICAgIGNvbnN0IGluZm8gPSBhd2FpdCB0aGlzLmhhbmRsZShxdWVyeSwge1xuICAgICAgcmVxdWVzdGVkQnk6IHRyYWNrLnJlcXVlc3RlZEJ5LFxuICAgICAgdHlwZTogUXVlcnlUeXBlLlNPVU5EQ0xPVURfU0VBUkNIXG4gICAgfSk7XG5cbiAgICBpZiAoIWluZm8udHJhY2tzLmxlbmd0aCkgcmV0dXJuIG51bGw7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnN0cmVhbShpbmZvLnRyYWNrc1swXSk7XG5cbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICB0cmFjay5icmlkZ2VkVHJhY2sgPSBpbmZvLnRyYWNrc1swXTtcbiAgICAgIHRyYWNrLmJyaWRnZWRFeHRyYWN0b3IgPSB0aGlzO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn0iLCAiaW1wb3J0IHsgQmFzZUV4dHJhY3RvciwgVHJhY2sgfSBmcm9tICdkaXNjb3JkLXBsYXllcic7XG5pbXBvcnQgeyBTb3VuZENsb3VkRXh0cmFjdG9yIH0gZnJvbSAnLi4vZXh0cmFjdG9ycy9Tb3VuZENsb3VkRXh0cmFjdG9yJztcbmltcG9ydCB1bmZldGNoIGZyb20gJ2lzb21vcnBoaWMtdW5mZXRjaCc7XG5pbXBvcnQgdHlwZSAqIGFzIFNvdW5kQ2xvdWQgZnJvbSAnc291bmRjbG91ZC50cyc7XG5cbmV4cG9ydCBjb25zdCBVQSA9XG4nTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEwOS4wLjAuMCBTYWZhcmkvNTM3LjM2IEVkZy8xMDkuMC4xNTE4LjQ5JztcbmV4cG9ydCBjb25zdCBmZXRjaCA9IHVuZmV0Y2g7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtYWtlU0NTZWFyY2gocXVlcnk6IHN0cmluZykge1xuICBjb25zdCB7IGluc3RhbmNlIH0gPSBTb3VuZENsb3VkRXh0cmFjdG9yO1xuICBpZiAoIWluc3RhbmNlPy5pbnRlcm5hbCkgcmV0dXJuIFtdO1xuXG4gIGxldCBkYXRhOiBTb3VuZENsb3VkLlNvdW5kY2xvdWRUcmFja1YyW107XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBpbmZvID0gYXdhaXQgaW5zdGFuY2UuaW50ZXJuYWwudHJhY2tzLnNlYXJjaFYyKHtcbiAgICAgIHE6IHF1ZXJ5LFxuICAgICAgbGltaXQ6IDVcbiAgICB9KTtcblxuICAgIGRhdGEgPSBpbmZvLmNvbGxlY3Rpb247XG4gIH0gY2F0Y2gge1xuICAgIC8vIGZhbGxiYWNrXG4gICAgY29uc3QgaW5mbyA9IGF3YWl0IGluc3RhbmNlLmludGVybmFsLnRyYWNrcy5zZWFyY2hBbHQocXVlcnkpO1xuXG4gICAgZGF0YSA9IGluZm87XG4gIH1cblxuICByZXR1cm4gZmlsdGVyU291bmRDbG91ZFByZXZpZXdzKGRhdGEpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHVsbFNDTWV0YWRhdGEoZXh0OiBCYXNlRXh0cmFjdG9yLCBpbmZvOiBUcmFjaykge1xuICBjb25zdCBtZXRhID0gYXdhaXQgbWFrZVNDU2VhcmNoKGV4dC5jcmVhdGVCcmlkZ2VRdWVyeShpbmZvKSkuXG4gIHRoZW4oKHIpID0+IHJbMF0pLlxuICBjYXRjaCgoKSA9PiBudWxsKTtcblxuICByZXR1cm4gbWV0YTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlclNvdW5kQ2xvdWRQcmV2aWV3cyh0cmFja3M6IFNvdW5kQ2xvdWQuU291bmRjbG91ZFRyYWNrVjJbXSk6IFNvdW5kQ2xvdWQuU291bmRjbG91ZFRyYWNrVjJbXSB7XG4gIGNvbnN0IGZpbHRlcmVkID0gdHJhY2tzLmZpbHRlcigodCkgPT4ge1xuICAgIGlmICh0eXBlb2YgdC5wb2xpY3kgPT09ICdzdHJpbmcnKSByZXR1cm4gdC5wb2xpY3kudG9VcHBlckNhc2UoKSA9PT0gJ0FMTE9XJztcbiAgICByZXR1cm4gISh0LmR1cmF0aW9uID09PSAzMF8wMDAgJiYgdC5mdWxsX2R1cmF0aW9uID4gMzBfMDAwKTtcbiAgfSk7XG5cbiAgY29uc3QgcmVzdWx0ID0gZmlsdGVyZWQubGVuZ3RoID4gMCA/IGZpbHRlcmVkIDogdHJhY2tzO1xuXG4gIHJldHVybiByZXN1bHQ7XG59IiwgImV4cG9ydCBmdW5jdGlvbiBseXJpY3NFeHRyYWN0b3IoKSB7XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICAnTGVnYWN5IGx5cmljcyBleHRyYWN0b3IgaGFzIGJlZW4gcmVtb3ZlZC4gUGxlYXNlIHVzZSB0aGUgbmV3IGx5cmljcyBhcGkgZnJvbSBgcGxheWVyLmx5cmljc2AgaW5zdGVhZC4gSXQgb2ZmZXJzIG1vcmUgYWNjdXJhdGUgcmVzdWx0IGFuZCBmZWF0dXJlcyBsaWtlIHBsYWluIGx5cmljcyBhbmQgc3luY2VkIGx5cmljcy4nXG4gICk7XG59IiwgIi8vIHByZXR0aWVyLWlnbm9yZVxuaW1wb3J0IHtcbiAgQmFzZUV4dHJhY3RvcixcbiAgRXh0cmFjdG9ySW5mbyxcbiAgRXh0cmFjdG9yU2VhcmNoQ29udGV4dCxcbiAgUXVlcnlUeXBlLFxuICBTZWFyY2hRdWVyeVR5cGUsXG4gIFRyYWNrLFxuICBVdGlsIH0gZnJvbVxuJ2Rpc2NvcmQtcGxheWVyJztcbmltcG9ydCB7IFZpbWVvIH0gZnJvbSAnLi4vaW50ZXJuYWwvVmltZW8nO1xuXG5leHBvcnQgY2xhc3MgVmltZW9FeHRyYWN0b3IgZXh0ZW5kcyBCYXNlRXh0cmFjdG9yIHtcbiAgcHVibGljIHN0YXRpYyBpZGVudGlmaWVyID0gJ2NvbS5kaXNjb3JkLXBsYXllci52aW1lb2V4dHJhY3RvcicgYXMgY29uc3Q7XG5cbiAgcHVibGljIGFzeW5jIHZhbGlkYXRlKHF1ZXJ5OiBzdHJpbmcsIHR5cGU/OiBTZWFyY2hRdWVyeVR5cGUgfCBudWxsIHwgdW5kZWZpbmVkKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgaWYgKHR5cGVvZiBxdWVyeSAhPT0gJ3N0cmluZycpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gKFtRdWVyeVR5cGUuVklNRU9dIGFzIFNlYXJjaFF1ZXJ5VHlwZVtdKS5zb21lKChyKSA9PiByID09PSB0eXBlKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRSZWxhdGVkVHJhY2tzKHRyYWNrOiBUcmFjaykge1xuICAgIHZvaWQgdHJhY2s7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlUmVzcG9uc2UoKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBoYW5kbGUocXVlcnk6IHN0cmluZywgY29udGV4dDogRXh0cmFjdG9yU2VhcmNoQ29udGV4dCk6IFByb21pc2U8RXh0cmFjdG9ySW5mbz4ge1xuICAgIHN3aXRjaCAoY29udGV4dC50eXBlKSB7XG4gICAgICBjYXNlIFF1ZXJ5VHlwZS5WSU1FTzp7XG4gICAgICAgICAgY29uc3QgdHJhY2tJbmZvID0gYXdhaXQgVmltZW8uZ2V0SW5mbyhcbiAgICAgICAgICAgIHF1ZXJ5LlxuICAgICAgICAgICAgc3BsaXQoJy8nKS5cbiAgICAgICAgICAgIGZpbHRlcigoeCkgPT4gISF4KS5cbiAgICAgICAgICAgIHBvcCgpIVxuICAgICAgICAgICkuY2F0Y2goVXRpbC5ub29wKTtcblxuICAgICAgICAgIGlmICghdHJhY2tJbmZvKSByZXR1cm4gdGhpcy5lbXB0eVJlc3BvbnNlKCk7XG5cbiAgICAgICAgICBjb25zdCB0cmFjayA9IG5ldyBUcmFjayh0aGlzLmNvbnRleHQucGxheWVyLCB7XG4gICAgICAgICAgICB0aXRsZTogdHJhY2tJbmZvLnRpdGxlLFxuICAgICAgICAgICAgdXJsOiB0cmFja0luZm8udXJsLFxuICAgICAgICAgICAgZHVyYXRpb246IFV0aWwuYnVpbGRUaW1lQ29kZShVdGlsLnBhcnNlTVModHJhY2tJbmZvLmR1cmF0aW9uIHx8IDApKSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgJHt0cmFja0luZm8udGl0bGV9IGJ5ICR7dHJhY2tJbmZvLmF1dGhvci5uYW1lfWAsXG4gICAgICAgICAgICB0aHVtYm5haWw6IHRyYWNrSW5mby50aHVtYm5haWwsXG4gICAgICAgICAgICB2aWV3czogMCxcbiAgICAgICAgICAgIGF1dGhvcjogdHJhY2tJbmZvLmF1dGhvci5uYW1lLFxuICAgICAgICAgICAgcmVxdWVzdGVkQnk6IGNvbnRleHQucmVxdWVzdGVkQnksXG4gICAgICAgICAgICBzb3VyY2U6ICdhcmJpdHJhcnknLFxuICAgICAgICAgICAgZW5naW5lOiB0cmFja0luZm8uc3RyZWFtLFxuICAgICAgICAgICAgcXVlcnlUeXBlOiBjb250ZXh0LnR5cGUsXG4gICAgICAgICAgICBtZXRhZGF0YTogdHJhY2tJbmZvLFxuICAgICAgICAgICAgYXN5bmMgcmVxdWVzdE1ldGFkYXRhKCkge1xuICAgICAgICAgICAgICByZXR1cm4gdHJhY2tJbmZvO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgdHJhY2suZXh0cmFjdG9yID0gdGhpcztcblxuICAgICAgICAgIHJldHVybiB7IHBsYXlsaXN0OiBudWxsLCB0cmFja3M6IFt0cmFja10gfTtcbiAgICAgICAgfVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHRoaXMuZW1wdHlSZXNwb25zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBlbXB0eVJlc3BvbnNlKCk6IEV4dHJhY3RvckluZm8ge1xuICAgIHJldHVybiB7IHBsYXlsaXN0OiBudWxsLCB0cmFja3M6IFtdIH07XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgc3RyZWFtKGluZm86IFRyYWNrKSB7XG4gICAgY29uc3QgZW5naW5lID0gaW5mby5yYXcuZW5naW5lIGFzIHN0cmluZztcbiAgICBpZiAoZW5naW5lKSB7XG4gICAgICByZXR1cm4gZW5naW5lO1xuICAgIH1cblxuICAgIGNvbnN0IHRyYWNrID0gYXdhaXQgVmltZW8uZ2V0SW5mbyhpbmZvLnVybCkuY2F0Y2goVXRpbC5ub29wKTtcbiAgICBpZiAoIXRyYWNrIHx8ICF0cmFjay5zdHJlYW0pIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGV4dHJhY3Qgc3RyZWFtIGZyb20gdGhpcyBzb3VyY2UnKTtcblxuICAgIGluZm8ucmF3LmVuZ2luZSA9IHtcbiAgICAgIHN0cmVhbVVSTDogdHJhY2suc3RyZWFtXG4gICAgfTtcblxuICAgIHJldHVybiB0cmFjay5zdHJlYW07XG4gIH1cbn0iLCAiaW1wb3J0IHsgUmVhZGFibGUgfSBmcm9tICdzdHJlYW0nO1xuaW1wb3J0IGh0dHAgZnJvbSAnaHR0cCc7XG5pbXBvcnQgaHR0cHMgZnJvbSAnaHR0cHMnO1xuaW1wb3J0IHsgZmV0Y2ggfSBmcm9tICcuL2hlbHBlcic7XG5cbmNsYXNzIFZpbWVvIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9IGNsYXNzIG1heSBub3QgYmUgaW5zdGFudGlhdGVkIWApO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlZGVmIHtSZWFkYWJsZX0gUmVhZGFibGVcbiAgICovXG5cbiAgLyoqXG4gICAqIERvd25sb2FkcyBmcm9tIHZpbWVvXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpZCBWaW1lbyB2aWRlbyBpZFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZWFkYWJsZT59XG4gICAqL1xuICBzdGF0aWMgZG93bmxvYWQoaWQ6IG51bWJlciB8IHN0cmluZyk6IFByb21pc2U8UmVhZGFibGU+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUpID0+IHtcbiAgICAgIGNvbnN0IGluZm8gPSBhd2FpdCBWaW1lby5nZXRJbmZvKGlkKTtcbiAgICAgIGlmICghaW5mbykgcmV0dXJuIG51bGw7XG5cbiAgICAgIGNvbnN0IGRvd25sb2FkZXIgPSBpbmZvLnN0cmVhbS5zdGFydHNXaXRoKCdodHRwczovLycpID8gaHR0cHMgOiBodHRwO1xuXG4gICAgICBkb3dubG9hZGVyLmdldChpbmZvLnN0cmVhbSwgKHJlcykgPT4ge1xuICAgICAgICByZXNvbHZlKHJlcyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHZpZGVvIGluZm9cbiAgICogQHBhcmFtIHtudW1iZXJ9IGlkIFZpZGVvIGlkXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZ2V0SW5mbyhpZDogbnVtYmVyIHwgc3RyaW5nKTogUHJvbWlzZTxWaW1lb0luZm8gfCBudWxsPiB7XG4gICAgaWYgKCFpZCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGlkJyk7XG4gICAgY29uc3QgdXJsID0gYGh0dHBzOi8vcGxheWVyLnZpbWVvLmNvbS92aWRlby8ke2lkfWA7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMudGV4dCgpO1xuICAgICAgY29uc3QganNvbiA9IEpTT04ucGFyc2UoZGF0YS5zcGxpdCgnd2luZG93LnBsYXllckNvbmZpZyA9JylbMV0uc3BsaXQoJzsnKVswXS50cmltKCkpO1xuXG4gICAgICBjb25zdCBvYmogPSB7XG4gICAgICAgIGlkOiBqc29uLnZpZGVvLmlkLFxuICAgICAgICBkdXJhdGlvbjoganNvbi52aWRlby5kdXJhdGlvbiAqIDEwMDAsXG4gICAgICAgIHRpdGxlOiBqc29uLnZpZGVvLnRpdGxlLFxuICAgICAgICB1cmw6IGpzb24udmlkZW8udXJsLFxuICAgICAgICB0aHVtYm5haWw6IGpzb24udmlkZW8udGh1bWJzWycxMjgwJ10gfHwganNvbi52aWRlby50aHVtYnMuYmFzZSxcbiAgICAgICAgc3RyZWFtOiBqc29uLnJlcXVlc3QuZmlsZXMucHJvZ3Jlc3NpdmVbMF0udXJsLFxuICAgICAgICBhdXRob3I6IHtcbiAgICAgICAgICBpZDoganNvbi52aWRlby5vd25lci5pZCxcbiAgICAgICAgICBuYW1lOiBqc29uLnZpZGVvLm93bmVyLm5hbWUsXG4gICAgICAgICAgdXJsOiBqc29uLnZpZGVvLm93bmVyLnVybCxcbiAgICAgICAgICBhdmF0YXI6IGpzb24udmlkZW8ub3duZXIuaW1nXzJ4IHx8IGpzb24udmlkZW8ub3duZXIuaW1nXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBvYmo7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBWaW1lb0luZm8ge1xuICBpZDogbnVtYmVyO1xuICBkdXJhdGlvbjogbnVtYmVyO1xuICB0aXRsZTogc3RyaW5nO1xuICB1cmw6IHN0cmluZztcbiAgdGh1bWJuYWlsOiBzdHJpbmc7XG4gIHN0cmVhbTogc3RyaW5nO1xuICBhdXRob3I6IHtcbiAgICBpZDogbnVtYmVyO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICB1cmw6IHN0cmluZztcbiAgICBhdmF0YXI6IHN0cmluZztcbiAgfTtcbn1cblxuZXhwb3J0IHsgVmltZW8gfTsiLCAiLy8gcHJldHRpZXItaWdub3JlXG5pbXBvcnQge1xuICBCYXNlRXh0cmFjdG9yLFxuICBFeHRyYWN0b3JJbmZvLFxuICBFeHRyYWN0b3JTZWFyY2hDb250ZXh0LFxuICBRdWVyeVR5cGUsXG4gIFNlYXJjaFF1ZXJ5VHlwZSxcbiAgVHJhY2ssXG4gIFV0aWwgfSBmcm9tXG4nZGlzY29yZC1wbGF5ZXInO1xuaW1wb3J0IHJldmVyYm5hdGlvbiBmcm9tICdyZXZlcmJuYXRpb24tc2NyYXBlcic7XG5cbmV4cG9ydCBjbGFzcyBSZXZlcmJuYXRpb25FeHRyYWN0b3IgZXh0ZW5kcyBCYXNlRXh0cmFjdG9yIHtcbiAgcHVibGljIHN0YXRpYyBpZGVudGlmaWVyID0gJ2NvbS5kaXNjb3JkLXBsYXllci5yZXZlcmJuYXRpb25leHRyYWN0b3InIGFzIGNvbnN0O1xuXG4gIHB1YmxpYyBhc3luYyB2YWxpZGF0ZShxdWVyeTogc3RyaW5nLCB0eXBlPzogU2VhcmNoUXVlcnlUeXBlIHwgbnVsbCB8IHVuZGVmaW5lZCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGlmICh0eXBlb2YgcXVlcnkgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIChbUXVlcnlUeXBlLlJFVkVSQk5BVElPTl0gYXMgU2VhcmNoUXVlcnlUeXBlW10pLnNvbWUoKHIpID0+IHIgPT09IHR5cGUpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldFJlbGF0ZWRUcmFja3ModHJhY2s6IFRyYWNrKSB7XG4gICAgdm9pZCB0cmFjaztcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVSZXNwb25zZSgpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGhhbmRsZShxdWVyeTogc3RyaW5nLCBjb250ZXh0OiBFeHRyYWN0b3JTZWFyY2hDb250ZXh0KTogUHJvbWlzZTxFeHRyYWN0b3JJbmZvPiB7XG4gICAgc3dpdGNoIChjb250ZXh0LnR5cGUpIHtcbiAgICAgIGNhc2UgUXVlcnlUeXBlLlJFVkVSQk5BVElPTjp7XG4gICAgICAgICAgY29uc3QgdHJhY2tJbmZvID0gYXdhaXQgcmV2ZXJibmF0aW9uLmdldEluZm8ocXVlcnkpLmNhdGNoKFV0aWwubm9vcCk7XG5cbiAgICAgICAgICBpZiAoIXRyYWNrSW5mbykgcmV0dXJuIHRoaXMuZW1wdHlSZXNwb25zZSgpO1xuXG4gICAgICAgICAgY29uc3QgdHJhY2sgPSBuZXcgVHJhY2sodGhpcy5jb250ZXh0LnBsYXllciwge1xuICAgICAgICAgICAgdGl0bGU6IHRyYWNrSW5mby50aXRsZSxcbiAgICAgICAgICAgIHVybDogdHJhY2tJbmZvLnVybCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBVdGlsLmJ1aWxkVGltZUNvZGUoVXRpbC5wYXJzZU1TKHRyYWNrSW5mby5kdXJhdGlvbikpLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRyYWNrSW5mby5seXJpY3MgfHwgYCR7dHJhY2tJbmZvLnRpdGxlfSBieSAke3RyYWNrSW5mby5hcnRpc3QubmFtZX1gLFxuICAgICAgICAgICAgdGh1bWJuYWlsOiB0cmFja0luZm8udGh1bWJuYWlsLFxuICAgICAgICAgICAgdmlld3M6IDAsXG4gICAgICAgICAgICBhdXRob3I6IHRyYWNrSW5mby5hcnRpc3QubmFtZSxcbiAgICAgICAgICAgIHJlcXVlc3RlZEJ5OiBjb250ZXh0LnJlcXVlc3RlZEJ5LFxuICAgICAgICAgICAgc291cmNlOiAnYXJiaXRyYXJ5JyxcbiAgICAgICAgICAgIGVuZ2luZTogdHJhY2tJbmZvLnN0cmVhbVVSTCxcbiAgICAgICAgICAgIHF1ZXJ5VHlwZTogY29udGV4dC50eXBlLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHRyYWNrSW5mbyxcbiAgICAgICAgICAgIGFzeW5jIHJlcXVlc3RNZXRhZGF0YSgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRyYWNrSW5mbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHRyYWNrLmV4dHJhY3RvciA9IHRoaXM7XG5cbiAgICAgICAgICByZXR1cm4geyBwbGF5bGlzdDogbnVsbCwgdHJhY2tzOiBbdHJhY2tdIH07XG4gICAgICAgIH1cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB0aGlzLmVtcHR5UmVzcG9uc2UoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZW1wdHlSZXNwb25zZSgpOiBFeHRyYWN0b3JJbmZvIHtcbiAgICByZXR1cm4geyBwbGF5bGlzdDogbnVsbCwgdHJhY2tzOiBbXSB9O1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHN0cmVhbShpbmZvOiBUcmFjaykge1xuICAgIGNvbnN0IGVuZ2luZSA9IGluZm8ucmF3LmVuZ2luZSBhcyBzdHJpbmc7XG4gICAgaWYgKGVuZ2luZSkge1xuICAgICAgcmV0dXJuIGVuZ2luZTtcbiAgICB9XG5cbiAgICBjb25zdCB0cmFjayA9IGF3YWl0IHJldmVyYm5hdGlvbi5nZXRJbmZvKGluZm8udXJsKS5jYXRjaChVdGlsLm5vb3ApO1xuICAgIGlmICghdHJhY2sgfHwgIXRyYWNrLnN0cmVhbVVSTCkgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgZXh0cmFjdCBzdHJlYW0gZnJvbSB0aGlzIHNvdXJjZScpO1xuXG4gICAgaW5mby5yYXcuZW5naW5lID0ge1xuICAgICAgc3RyZWFtVVJMOiB0cmFjay5zdHJlYW1VUkxcbiAgICB9O1xuXG4gICAgcmV0dXJuIHRyYWNrLnN0cmVhbVVSTDtcbiAgfVxufSIsICIvLyBwcmV0dGllci1pZ25vcmVcbmltcG9ydCB7XG4gIEJhc2VFeHRyYWN0b3IsXG4gIEV4dHJhY3RvckluZm8sXG4gIEV4dHJhY3RvclNlYXJjaENvbnRleHQsXG4gIFF1ZXJ5VHlwZSxcbiAgU2VhcmNoUXVlcnlUeXBlLFxuICBUcmFjayxcbiAgVXRpbCB9IGZyb21cbidkaXNjb3JkLXBsYXllcic7XG5pbXBvcnQgdHlwZSB7IEluY29taW5nTWVzc2FnZSB9IGZyb20gJ2h0dHAnO1xuaW1wb3J0IHsgY3JlYXRlUmVhZFN0cmVhbSwgZXhpc3RzU3luYyB9IGZyb20gJ2ZzJztcbmltcG9ydCB7IGRvd25sb2FkU3RyZWFtIH0gZnJvbSAnLi4vaW50ZXJuYWwvZG93bmxvYWRlcic7XG5pbXBvcnQgKiBhcyBmaWxlVHlwZSBmcm9tICdmaWxlLXR5cGUnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBzdGF0IH0gZnJvbSAnZnMvcHJvbWlzZXMnO1xuXG5jb25zdCBBVFRBQ0hNRU5UX0hFQURFUiA9IFsnYXVkaW8vJywgJ3ZpZGVvLycsICdhcHBsaWNhdGlvbi9vZ2cnXSBhcyBjb25zdDtcblxuZXhwb3J0IGNsYXNzIEF0dGFjaG1lbnRFeHRyYWN0b3IgZXh0ZW5kcyBCYXNlRXh0cmFjdG9yIHtcbiAgcHVibGljIHN0YXRpYyBpZGVudGlmaWVyID0gJ2NvbS5kaXNjb3JkLXBsYXllci5hdHRhY2htZW50ZXh0cmFjdG9yJyBhcyBjb25zdDtcblxuICAvLyB1c2UgbG93ZXN0IHByaW9yaXR5IHRvIGF2b2lkIGNvbmZsaWN0IHdpdGggb3RoZXIgZXh0cmFjdG9yc1xuICBwdWJsaWMgcHJpb3JpdHkgPSAwO1xuXG4gIHB1YmxpYyBhc3luYyB2YWxpZGF0ZShxdWVyeTogc3RyaW5nLCB0eXBlPzogU2VhcmNoUXVlcnlUeXBlIHwgbnVsbCB8IHVuZGVmaW5lZCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGlmICh0eXBlb2YgcXVlcnkgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIChbUXVlcnlUeXBlLkFSQklUUkFSWSwgUXVlcnlUeXBlLkZJTEVdIGFzIFNlYXJjaFF1ZXJ5VHlwZVtdKS5zb21lKChyKSA9PiByID09PSB0eXBlKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRSZWxhdGVkVHJhY2tzKHRyYWNrOiBUcmFjaykge1xuICAgIHZvaWQgdHJhY2s7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlUmVzcG9uc2UoKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBoYW5kbGUocXVlcnk6IHN0cmluZywgY29udGV4dDogRXh0cmFjdG9yU2VhcmNoQ29udGV4dCk6IFByb21pc2U8RXh0cmFjdG9ySW5mbz4ge1xuICAgIHN3aXRjaCAoY29udGV4dC50eXBlKSB7XG4gICAgICBjYXNlIFF1ZXJ5VHlwZS5BUkJJVFJBUlk6e1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSAoYXdhaXQgZG93bmxvYWRTdHJlYW0ocXVlcnksIGNvbnRleHQucmVxdWVzdE9wdGlvbnMpKSBhcyBJbmNvbWluZ01lc3NhZ2U7XG4gICAgICAgICAgaWYgKCFBVFRBQ0hNRU5UX0hFQURFUi5zb21lKChyKSA9PiAhIWRhdGEuaGVhZGVyc1snY29udGVudC10eXBlJ10/LnN0YXJ0c1dpdGgocikpKSByZXR1cm4gdGhpcy5lbXB0eVJlc3BvbnNlKCk7XG5cbiAgICAgICAgICBjb25zdCB0cmFja0luZm8gPSB7XG4gICAgICAgICAgICB0aXRsZTogKFxuICAgICAgICAgICAgcXVlcnkuXG4gICAgICAgICAgICBzcGxpdCgnLycpLlxuICAgICAgICAgICAgZmlsdGVyKCh4KSA9PiB4Lmxlbmd0aCkuXG4gICAgICAgICAgICBwb3AoKSA/PyAnQXR0YWNobWVudCcpLlxuXG4gICAgICAgICAgICBzcGxpdCgnPycpWzBdLlxuICAgICAgICAgICAgdHJpbSgpLFxuICAgICAgICAgICAgZHVyYXRpb246IDAsXG4gICAgICAgICAgICB0aHVtYm5haWw6ICdodHRwczovL3VwbG9hZC53aWtpbWVkaWEub3JnL3dpa2lwZWRpYS9jb21tb25zLzIvMmEvSVR1bmVzXzEyLjJfbG9nby5wbmcnLFxuICAgICAgICAgICAgZW5naW5lOiBxdWVyeSxcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICAgICAgYXV0aG9yOiAoZGF0YSBhcyBhbnkpLmNsaWVudD8uc2VydmVybmFtZSBhcyBzdHJpbmcgfHwgJ0F0dGFjaG1lbnQnLFxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogKGRhdGEgYXMgYW55KS5jbGllbnQ/LnNlcnZlcm5hbWUgYXMgc3RyaW5nIHx8ICdBdHRhY2htZW50JyxcbiAgICAgICAgICAgIHVybDogZGF0YS51cmwgfHwgcXVlcnlcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICAgICAgY29uc3QgbWVkaWFwbGV4ID0gcmVxdWlyZSgnbWVkaWFwbGV4JykgYXMgdHlwZW9mIGltcG9ydCgnbWVkaWFwbGV4Jyk7XG4gICAgICAgICAgICBjb25zdCB0aW1lb3V0ID0gdGhpcy5jb250ZXh0LnBsYXllci5vcHRpb25zLnByb2JlVGltZW91dCA/PyA1MDAwO1xuXG4gICAgICAgICAgICBjb25zdCB7IHJlc3VsdCwgc3RyZWFtIH0gPSAoYXdhaXQgUHJvbWlzZS5yYWNlKFtcbiAgICAgICAgICAgIG1lZGlhcGxleC5wcm9iZVN0cmVhbShkYXRhKSxcbiAgICAgICAgICAgIG5ldyBQcm9taXNlKChfLCByKSA9PiB7XG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gcihuZXcgRXJyb3IoJ1RpbWVvdXQnKSksIHRpbWVvdXQpO1xuICAgICAgICAgICAgfSldXG4gICAgICAgICAgICApKSBhcyBBd2FpdGVkPFJldHVyblR5cGU8dHlwZW9mIG1lZGlhcGxleC5wcm9iZVN0cmVhbT4+O1xuXG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgIHRyYWNrSW5mby5kdXJhdGlvbiA9IHJlc3VsdC5kdXJhdGlvbiAqIDEwMDA7XG5cbiAgICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBtZWRpYXBsZXgucmVhZE1ldGFkYXRhKHJlc3VsdCk7XG4gICAgICAgICAgICAgIGlmIChtZXRhZGF0YS5hdXRob3IpIHRyYWNrSW5mby5hdXRob3IgPSBtZXRhZGF0YS5hdXRob3I7XG4gICAgICAgICAgICAgIGlmIChtZXRhZGF0YS50aXRsZSkgdHJhY2tJbmZvLnRpdGxlID0gbWV0YWRhdGEudGl0bGU7XG5cbiAgICAgICAgICAgICAgdHJhY2tJbmZvLmRlc2NyaXB0aW9uID0gYCR7dHJhY2tJbmZvLnRpdGxlfSBieSAke3RyYWNrSW5mby5hdXRob3J9YDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3RyZWFtLmRlc3Ryb3koKTtcbiAgICAgICAgICB9IGNhdGNoIHtcblxuICAgICAgICAgICAgLy9cbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgdHJhY2sgPSBuZXcgVHJhY2sodGhpcy5jb250ZXh0LnBsYXllciwge1xuICAgICAgICAgICAgdGl0bGU6IHRyYWNrSW5mby50aXRsZSxcbiAgICAgICAgICAgIHVybDogdHJhY2tJbmZvLnVybCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBVdGlsLmJ1aWxkVGltZUNvZGUoVXRpbC5wYXJzZU1TKHRyYWNrSW5mby5kdXJhdGlvbikpLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRyYWNrSW5mby5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHRodW1ibmFpbDogdHJhY2tJbmZvLnRodW1ibmFpbCxcbiAgICAgICAgICAgIHZpZXdzOiAwLFxuICAgICAgICAgICAgYXV0aG9yOiB0cmFja0luZm8uYXV0aG9yLFxuICAgICAgICAgICAgcmVxdWVzdGVkQnk6IGNvbnRleHQucmVxdWVzdGVkQnksXG4gICAgICAgICAgICBzb3VyY2U6ICdhcmJpdHJhcnknLFxuICAgICAgICAgICAgZW5naW5lOiB0cmFja0luZm8udXJsLFxuICAgICAgICAgICAgcXVlcnlUeXBlOiBjb250ZXh0LnR5cGUsXG4gICAgICAgICAgICBtZXRhZGF0YTogdHJhY2tJbmZvLFxuICAgICAgICAgICAgYXN5bmMgcmVxdWVzdE1ldGFkYXRhKCkge1xuICAgICAgICAgICAgICByZXR1cm4gdHJhY2tJbmZvO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgdHJhY2suZXh0cmFjdG9yID0gdGhpcztcblxuICAgICAgICAgIHRyYWNrLnJhdy5pc0ZpbGUgPSBmYWxzZTtcblxuICAgICAgICAgIHJldHVybiB7IHBsYXlsaXN0OiBudWxsLCB0cmFja3M6IFt0cmFja10gfTtcbiAgICAgICAgfVxuICAgICAgY2FzZSBRdWVyeVR5cGUuRklMRTp7XG4gICAgICAgICAgaWYgKCFleGlzdHNTeW5jKHF1ZXJ5KSkgcmV0dXJuIHRoaXMuZW1wdHlSZXNwb25zZSgpO1xuICAgICAgICAgIGNvbnN0IGZzdGF0ID0gYXdhaXQgc3RhdChxdWVyeSk7XG4gICAgICAgICAgaWYgKCFmc3RhdC5pc0ZpbGUoKSkgcmV0dXJuIHRoaXMuZW1wdHlSZXNwb25zZSgpO1xuICAgICAgICAgIGNvbnN0IG1pbWUgPSBhd2FpdCBmaWxlVHlwZS5mcm9tRmlsZShxdWVyeSkuY2F0Y2goKCkgPT4gbnVsbCk7XG4gICAgICAgICAgaWYgKCFtaW1lIHx8ICFBVFRBQ0hNRU5UX0hFQURFUi5zb21lKChyKSA9PiAhIW1pbWUubWltZS5zdGFydHNXaXRoKHIpKSkgcmV0dXJuIHRoaXMuZW1wdHlSZXNwb25zZSgpO1xuXG4gICAgICAgICAgY29uc3QgdHJhY2tJbmZvID0ge1xuICAgICAgICAgICAgdGl0bGU6IHBhdGguYmFzZW5hbWUocXVlcnkpIHx8ICdBdHRhY2htZW50JyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgICAgdGh1bWJuYWlsOiAnaHR0cHM6Ly91cGxvYWQud2lraW1lZGlhLm9yZy93aWtpcGVkaWEvY29tbW9ucy8yLzJhL0lUdW5lc18xMi4yX2xvZ28ucG5nJyxcbiAgICAgICAgICAgIGVuZ2luZTogcXVlcnksXG4gICAgICAgICAgICBhdXRob3I6ICdBdHRhY2htZW50JyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQXR0YWNobWVudCcsXG4gICAgICAgICAgICB1cmw6IHF1ZXJ5XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgICAgIGNvbnN0IG1lZGlhcGxleCA9IHJlcXVpcmUoJ21lZGlhcGxleCcpIGFzIHR5cGVvZiBpbXBvcnQoJ21lZGlhcGxleCcpO1xuXG4gICAgICAgICAgICBjb25zdCB0aW1lb3V0ID0gdGhpcy5jb250ZXh0LnBsYXllci5vcHRpb25zLnByb2JlVGltZW91dCA/PyA1MDAwO1xuXG4gICAgICAgICAgICBjb25zdCB7IHJlc3VsdCwgc3RyZWFtIH0gPSAoYXdhaXQgUHJvbWlzZS5yYWNlKFtcbiAgICAgICAgICAgIG1lZGlhcGxleC5wcm9iZVN0cmVhbShcbiAgICAgICAgICAgICAgY3JlYXRlUmVhZFN0cmVhbShxdWVyeSwge1xuICAgICAgICAgICAgICAgIHN0YXJ0OiAwLFxuICAgICAgICAgICAgICAgIGVuZDogMTAyNCAqIDEwMjQgKiAxMFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIG5ldyBQcm9taXNlKChfLCByKSA9PiB7XG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gcihuZXcgRXJyb3IoJ1RpbWVvdXQnKSksIHRpbWVvdXQpO1xuICAgICAgICAgICAgfSldXG4gICAgICAgICAgICApKSBhcyBBd2FpdGVkPFJldHVyblR5cGU8dHlwZW9mIG1lZGlhcGxleC5wcm9iZVN0cmVhbT4+O1xuXG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgIHRyYWNrSW5mby5kdXJhdGlvbiA9IHJlc3VsdC5kdXJhdGlvbiAqIDEwMDA7XG5cbiAgICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBtZWRpYXBsZXgucmVhZE1ldGFkYXRhKHJlc3VsdCk7XG4gICAgICAgICAgICAgIGlmIChtZXRhZGF0YS5hdXRob3IpIHRyYWNrSW5mby5hdXRob3IgPSBtZXRhZGF0YS5hdXRob3I7XG4gICAgICAgICAgICAgIGlmIChtZXRhZGF0YS50aXRsZSkgdHJhY2tJbmZvLnRpdGxlID0gbWV0YWRhdGEudGl0bGU7XG5cbiAgICAgICAgICAgICAgdHJhY2tJbmZvLmRlc2NyaXB0aW9uID0gYCR7dHJhY2tJbmZvLnRpdGxlfSBieSAke3RyYWNrSW5mby5hdXRob3J9YDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3RyZWFtLmRlc3Ryb3koKTtcbiAgICAgICAgICB9IGNhdGNoIHtcblxuICAgICAgICAgICAgLy9cbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgdHJhY2sgPSBuZXcgVHJhY2sodGhpcy5jb250ZXh0LnBsYXllciwge1xuICAgICAgICAgICAgdGl0bGU6IHRyYWNrSW5mby50aXRsZSxcbiAgICAgICAgICAgIHVybDogdHJhY2tJbmZvLnVybCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBVdGlsLmJ1aWxkVGltZUNvZGUoVXRpbC5wYXJzZU1TKHRyYWNrSW5mby5kdXJhdGlvbikpLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRyYWNrSW5mby5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHRodW1ibmFpbDogdHJhY2tJbmZvLnRodW1ibmFpbCxcbiAgICAgICAgICAgIHZpZXdzOiAwLFxuICAgICAgICAgICAgYXV0aG9yOiB0cmFja0luZm8uYXV0aG9yLFxuICAgICAgICAgICAgcmVxdWVzdGVkQnk6IGNvbnRleHQucmVxdWVzdGVkQnksXG4gICAgICAgICAgICBzb3VyY2U6ICdhcmJpdHJhcnknLFxuICAgICAgICAgICAgZW5naW5lOiB0cmFja0luZm8udXJsLFxuICAgICAgICAgICAgcXVlcnlUeXBlOiBjb250ZXh0LnR5cGUsXG4gICAgICAgICAgICBtZXRhZGF0YTogdHJhY2tJbmZvLFxuICAgICAgICAgICAgYXN5bmMgcmVxdWVzdE1ldGFkYXRhKCkge1xuICAgICAgICAgICAgICByZXR1cm4gdHJhY2tJbmZvO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgdHJhY2suZXh0cmFjdG9yID0gdGhpcztcblxuICAgICAgICAgIHRyYWNrLnJhdy5pc0ZpbGUgPSB0cnVlO1xuXG4gICAgICAgICAgcmV0dXJuIHsgcGxheWxpc3Q6IG51bGwsIHRyYWNrczogW3RyYWNrXSB9O1xuICAgICAgICB9XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdGhpcy5lbXB0eVJlc3BvbnNlKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGVtcHR5UmVzcG9uc2UoKTogRXh0cmFjdG9ySW5mbyB7XG4gICAgcmV0dXJuIHsgcGxheWxpc3Q6IG51bGwsIHRyYWNrczogW10gfTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBzdHJlYW0oaW5mbzogVHJhY2spIHtcbiAgICBjb25zdCBlbmdpbmUgPSBpbmZvLnJhdy5lbmdpbmUgYXMgc3RyaW5nO1xuXG4gICAgY29uc3QgaXNGaWxlID0gaW5mby5yYXcuaXNGaWxlIGFzIGJvb2xlYW47XG5cbiAgICBpZiAoIWVuZ2luZSkgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgZmluZCBzdHJlYW0gc291cmNlJyk7XG5cbiAgICBpZiAoIWlzRmlsZSkge1xuICAgICAgcmV0dXJuIGVuZ2luZTtcbiAgICAgIC8vIHJldHVybiBhd2FpdCBkb3dubG9hZFN0cmVhbShlbmdpbmUpO1xuICAgIH1cblxuICAgIHJldHVybiBjcmVhdGVSZWFkU3RyZWFtKGVuZ2luZSk7XG4gIH1cbn0iLCAiaW1wb3J0IGh0dHAsIHsgUmVxdWVzdE9wdGlvbnMgfSBmcm9tICdodHRwJztcbmltcG9ydCBodHRwcyBmcm9tICdodHRwcyc7XG5pbXBvcnQgeyBSZWFkYWJsZSB9IGZyb20gJ3N0cmVhbSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBkb3dubG9hZFN0cmVhbSh1cmw6IHN0cmluZywgb3B0czogUmVxdWVzdE9wdGlvbnMgPSB7fSkge1xuICByZXR1cm4gbmV3IFByb21pc2U8UmVhZGFibGU+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCBsaWIgPSB1cmwuc3RhcnRzV2l0aCgnaHR0cDovLycpID8gaHR0cCA6IGh0dHBzO1xuXG4gICAgbGliLmdldCh1cmwsIG9wdHMsIChyZXMpID0+IHJlc29sdmUocmVzKSkub25jZSgnZXJyb3InLCByZWplY3QpO1xuICB9KTtcbn0iLCAiaW1wb3J0IHtcbiAgRXh0cmFjdG9ySW5mbyxcbiAgRXh0cmFjdG9yU2VhcmNoQ29udGV4dCxcbiAgRXh0cmFjdG9yU3RyZWFtYWJsZSxcbiAgR3VpbGRRdWV1ZUhpc3RvcnksXG4gIFBsYXlsaXN0LFxuICBRdWVyeVR5cGUsXG4gIFNlYXJjaFF1ZXJ5VHlwZSxcbiAgVHJhY2ssXG4gIFV0aWwsXG4gIEJhc2VFeHRyYWN0b3IgfSBmcm9tXG4nZGlzY29yZC1wbGF5ZXInO1xuaW1wb3J0IHsgQXBwbGVNdXNpYyB9IGZyb20gJy4uL2ludGVybmFsJztcbmltcG9ydCB7IFJlYWRhYmxlIH0gZnJvbSAnc3RyZWFtJztcbmltcG9ydCB7IFN0cmVhbUZOIH0gZnJvbSAnLi4vdHlwZXMvY29tbW9uJztcblxuZXhwb3J0IGludGVyZmFjZSBBcHBsZU11c2ljRXh0cmFjdG9ySW5pdCB7XG4gIGNyZWF0ZVN0cmVhbT86IChleHQ6IEFwcGxlTXVzaWNFeHRyYWN0b3IsIHVybDogc3RyaW5nLCB0cmFjazogVHJhY2spID0+IFByb21pc2U8UmVhZGFibGUgfCBzdHJpbmc+O1xufVxuXG5leHBvcnQgY2xhc3MgQXBwbGVNdXNpY0V4dHJhY3RvciBleHRlbmRzIEJhc2VFeHRyYWN0b3I8QXBwbGVNdXNpY0V4dHJhY3RvckluaXQ+IHtcbiAgcHVibGljIHN0YXRpYyBpZGVudGlmaWVyID0gJ2NvbS5kaXNjb3JkLXBsYXllci5hcHBsZW11c2ljZXh0cmFjdG9yJyBhcyBjb25zdDtcbiAgcHJpdmF0ZSBfc3RyZWFtITogU3RyZWFtRk47XG5cbiAgcHVibGljIGFzeW5jIGFjdGl2YXRlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMucHJvdG9jb2xzID0gWydhbXNlYXJjaCcsICdhcHBsZW11c2ljJ107XG4gICAgY29uc3QgZm4gPSB0aGlzLm9wdGlvbnMuY3JlYXRlU3RyZWFtO1xuXG4gICAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5fc3RyZWFtID0gKHE6IHN0cmluZywgdDogVHJhY2spID0+IHtcbiAgICAgICAgcmV0dXJuIGZuKHRoaXMsIHEsIHQpO1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZGVhY3RpdmF0ZSgpIHtcbiAgICB0aGlzLnByb3RvY29scyA9IFtdO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHZhbGlkYXRlKHF1ZXJ5OiBzdHJpbmcsIHR5cGU/OiBTZWFyY2hRdWVyeVR5cGUgfCBudWxsIHwgdW5kZWZpbmVkKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgLy8gcHJldHRpZXItaWdub3JlXG4gICAgcmV0dXJuICg8U2VhcmNoUXVlcnlUeXBlW10+IFtcbiAgICBRdWVyeVR5cGUuQVBQTEVfTVVTSUNfQUxCVU0sXG4gICAgUXVlcnlUeXBlLkFQUExFX01VU0lDX1BMQVlMSVNULFxuICAgIFF1ZXJ5VHlwZS5BUFBMRV9NVVNJQ19TT05HLFxuICAgIFF1ZXJ5VHlwZS5BUFBMRV9NVVNJQ19TRUFSQ0gsXG4gICAgUXVlcnlUeXBlLkFVVE8sXG4gICAgUXVlcnlUeXBlLkFVVE9fU0VBUkNIXSkuXG4gICAgc29tZSgodCkgPT4gdCA9PT0gdHlwZSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0UmVsYXRlZFRyYWNrcyh0cmFjazogVHJhY2ssIGhpc3Rvcnk6IEd1aWxkUXVldWVIaXN0b3J5KSB7XG4gICAgaWYgKHRyYWNrLnF1ZXJ5VHlwZSA9PT0gUXVlcnlUeXBlLkFQUExFX01VU0lDX1NPTkcpIHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmhhbmRsZSh0cmFjay5hdXRob3IgfHwgdHJhY2sudGl0bGUsIHtcbiAgICAgICAgdHlwZTogUXVlcnlUeXBlLkFQUExFX01VU0lDX1NFQVJDSCxcbiAgICAgICAgcmVxdWVzdGVkQnk6IHRyYWNrLnJlcXVlc3RlZEJ5XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgdW5pcXVlID0gZGF0YS50cmFja3MuZmlsdGVyKCh0KSA9PiAhaGlzdG9yeS50cmFja3Muc29tZSgoaCkgPT4gaC51cmwgPT09IHQudXJsKSk7XG4gICAgICByZXR1cm4gdW5pcXVlLmxlbmd0aCA+IDAgPyB0aGlzLmNyZWF0ZVJlc3BvbnNlKG51bGwsIHVuaXF1ZSkgOiB0aGlzLmNyZWF0ZVJlc3BvbnNlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlUmVzcG9uc2UoKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBoYW5kbGUocXVlcnk6IHN0cmluZywgY29udGV4dDogRXh0cmFjdG9yU2VhcmNoQ29udGV4dCk6IFByb21pc2U8RXh0cmFjdG9ySW5mbz4ge1xuICAgIGlmIChjb250ZXh0LnByb3RvY29sID09PSAnYW1zZWFyY2gnKSBjb250ZXh0LnR5cGUgPSBRdWVyeVR5cGUuQVBQTEVfTVVTSUNfU0VBUkNIO1xuXG4gICAgc3dpdGNoIChjb250ZXh0LnR5cGUpIHtcbiAgICAgIGNhc2UgUXVlcnlUeXBlLkFVVE86XG4gICAgICBjYXNlIFF1ZXJ5VHlwZS5BVVRPX1NFQVJDSDpcbiAgICAgIGNhc2UgUXVlcnlUeXBlLkFQUExFX01VU0lDX1NFQVJDSDp7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IEFwcGxlTXVzaWMuc2VhcmNoKHF1ZXJ5KTtcbiAgICAgICAgICBpZiAoIWRhdGEgfHwgIWRhdGEubGVuZ3RoKSByZXR1cm4gdGhpcy5jcmVhdGVSZXNwb25zZSgpO1xuICAgICAgICAgIGNvbnN0IHRyYWNrcyA9IGRhdGEubWFwKFxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIChtOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgdHJhY2s6IFRyYWNrID0gbmV3IFRyYWNrKHRoaXMuY29udGV4dC5wbGF5ZXIsIHtcbiAgICAgICAgICAgICAgICBhdXRob3I6IG0uYXJ0aXN0Lm5hbWUsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG0udGl0bGUsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IHR5cGVvZiBtLmR1cmF0aW9uID09PSAnbnVtYmVyJyA/IFV0aWwuYnVpbGRUaW1lQ29kZShVdGlsLnBhcnNlTVMobS5kdXJhdGlvbikpIDogbS5kdXJhdGlvbixcbiAgICAgICAgICAgICAgICB0aHVtYm5haWw6IG0udGh1bWJuYWlsLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBtLnRpdGxlLFxuICAgICAgICAgICAgICAgIHVybDogbS51cmwsXG4gICAgICAgICAgICAgICAgdmlld3M6IDAsXG4gICAgICAgICAgICAgICAgc291cmNlOiAnYXBwbGVfbXVzaWMnLFxuICAgICAgICAgICAgICAgIHJlcXVlc3RlZEJ5OiBjb250ZXh0LnJlcXVlc3RlZEJ5LFxuICAgICAgICAgICAgICAgIHF1ZXJ5VHlwZTogJ2FwcGxlTXVzaWNTb25nJyxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgc291cmNlOiBtLFxuICAgICAgICAgICAgICAgICAgYnJpZGdlOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1ZXN0TWV0YWRhdGE6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogbSxcbiAgICAgICAgICAgICAgICAgICAgYnJpZGdlOiBudWxsXG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgdHJhY2suZXh0cmFjdG9yID0gdGhpcztcblxuICAgICAgICAgICAgICByZXR1cm4gdHJhY2s7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcblxuICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVJlc3BvbnNlKG51bGwsIHRyYWNrcyk7XG4gICAgICAgIH1cbiAgICAgIGNhc2UgUXVlcnlUeXBlLkFQUExFX01VU0lDX0FMQlVNOntcbiAgICAgICAgICBjb25zdCBpbmZvID0gYXdhaXQgQXBwbGVNdXNpYy5nZXRBbGJ1bUluZm8ocXVlcnkpO1xuICAgICAgICAgIGlmICghaW5mbykgcmV0dXJuIHRoaXMuY3JlYXRlUmVzcG9uc2UoKTtcblxuICAgICAgICAgIGNvbnN0IHBsYXlsaXN0ID0gbmV3IFBsYXlsaXN0KHRoaXMuY29udGV4dC5wbGF5ZXIsIHtcbiAgICAgICAgICAgIGF1dGhvcjoge1xuICAgICAgICAgICAgICBuYW1lOiBpbmZvLmFydGlzdC5uYW1lLFxuICAgICAgICAgICAgICB1cmw6ICcnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGluZm8udGl0bGUsXG4gICAgICAgICAgICBpZDogaW5mby5pZCxcbiAgICAgICAgICAgIHNvdXJjZTogJ2FwcGxlX211c2ljJyxcbiAgICAgICAgICAgIHRodW1ibmFpbDogaW5mby50aHVtYm5haWwsXG4gICAgICAgICAgICB0aXRsZTogaW5mby50aXRsZSxcbiAgICAgICAgICAgIHRyYWNrczogW10sXG4gICAgICAgICAgICB0eXBlOiAnYWxidW0nLFxuICAgICAgICAgICAgdXJsOiBpbmZvLnVybCxcbiAgICAgICAgICAgIHJhd1BsYXlsaXN0OiBpbmZvXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBwbGF5bGlzdC50cmFja3MgPSBpbmZvLnRyYWNrcy5tYXAoXG4gICAgICAgICAgICAoXG4gICAgICAgICAgICBtIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgICAgICAgIDogYW55KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHRyYWNrOiBUcmFjayA9IG5ldyBUcmFjayh0aGlzLmNvbnRleHQucGxheWVyLCB7XG4gICAgICAgICAgICAgICAgYXV0aG9yOiBtLmFydGlzdC5uYW1lLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBtLnRpdGxlLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiB0eXBlb2YgbS5kdXJhdGlvbiA9PT0gJ251bWJlcicgPyBVdGlsLmJ1aWxkVGltZUNvZGUoVXRpbC5wYXJzZU1TKG0uZHVyYXRpb24pKSA6IG0uZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgdGh1bWJuYWlsOiBtLnRodW1ibmFpbCxcbiAgICAgICAgICAgICAgICB0aXRsZTogbS50aXRsZSxcbiAgICAgICAgICAgICAgICB1cmw6IG0udXJsLFxuICAgICAgICAgICAgICAgIHZpZXdzOiAwLFxuICAgICAgICAgICAgICAgIHNvdXJjZTogJ2FwcGxlX211c2ljJyxcbiAgICAgICAgICAgICAgICByZXF1ZXN0ZWRCeTogY29udGV4dC5yZXF1ZXN0ZWRCeSxcbiAgICAgICAgICAgICAgICBxdWVyeVR5cGU6ICdhcHBsZU11c2ljU29uZycsXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgIHNvdXJjZTogaW5mbyxcbiAgICAgICAgICAgICAgICAgIGJyaWRnZTogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWVzdE1ldGFkYXRhOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IGluZm8sXG4gICAgICAgICAgICAgICAgICAgIGJyaWRnZTogbnVsbFxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB0cmFjay5wbGF5bGlzdCA9IHBsYXlsaXN0O1xuICAgICAgICAgICAgICB0cmFjay5leHRyYWN0b3IgPSB0aGlzO1xuICAgICAgICAgICAgICByZXR1cm4gdHJhY2s7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcblxuICAgICAgICAgIHJldHVybiB7IHBsYXlsaXN0LCB0cmFja3M6IHBsYXlsaXN0LnRyYWNrcyB9O1xuICAgICAgICB9XG4gICAgICBjYXNlIFF1ZXJ5VHlwZS5BUFBMRV9NVVNJQ19QTEFZTElTVDp7XG4gICAgICAgICAgY29uc3QgaW5mbyA9IGF3YWl0IEFwcGxlTXVzaWMuZ2V0UGxheWxpc3RJbmZvKHF1ZXJ5KTtcbiAgICAgICAgICBpZiAoIWluZm8pIHJldHVybiB0aGlzLmNyZWF0ZVJlc3BvbnNlKCk7XG5cbiAgICAgICAgICBjb25zdCBwbGF5bGlzdCA9IG5ldyBQbGF5bGlzdCh0aGlzLmNvbnRleHQucGxheWVyLCB7XG4gICAgICAgICAgICBhdXRob3I6IHtcbiAgICAgICAgICAgICAgbmFtZTogaW5mby5hcnRpc3QubmFtZSxcbiAgICAgICAgICAgICAgdXJsOiAnJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBpbmZvLnRpdGxlLFxuICAgICAgICAgICAgaWQ6IGluZm8uaWQsXG4gICAgICAgICAgICBzb3VyY2U6ICdhcHBsZV9tdXNpYycsXG4gICAgICAgICAgICB0aHVtYm5haWw6IGluZm8udGh1bWJuYWlsLFxuICAgICAgICAgICAgdGl0bGU6IGluZm8udGl0bGUsXG4gICAgICAgICAgICB0cmFja3M6IFtdLFxuICAgICAgICAgICAgdHlwZTogJ3BsYXlsaXN0JyxcbiAgICAgICAgICAgIHVybDogaW5mby51cmwsXG4gICAgICAgICAgICByYXdQbGF5bGlzdDogaW5mb1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcGxheWxpc3QudHJhY2tzID0gaW5mby50cmFja3MubWFwKFxuICAgICAgICAgICAgKFxuICAgICAgICAgICAgbSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICAgICAgICA6IGFueSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCB0cmFjazogVHJhY2sgPSBuZXcgVHJhY2sodGhpcy5jb250ZXh0LnBsYXllciwge1xuICAgICAgICAgICAgICAgIGF1dGhvcjogbS5hcnRpc3QubmFtZSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbS50aXRsZSxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogdHlwZW9mIG0uZHVyYXRpb24gPT09ICdudW1iZXInID8gVXRpbC5idWlsZFRpbWVDb2RlKFV0aWwucGFyc2VNUyhtLmR1cmF0aW9uKSkgOiBtLmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIHRodW1ibmFpbDogbS50aHVtYm5haWwsXG4gICAgICAgICAgICAgICAgdGl0bGU6IG0udGl0bGUsXG4gICAgICAgICAgICAgICAgdXJsOiBtLnVybCxcbiAgICAgICAgICAgICAgICB2aWV3czogMCxcbiAgICAgICAgICAgICAgICBzb3VyY2U6ICdhcHBsZV9tdXNpYycsXG4gICAgICAgICAgICAgICAgcmVxdWVzdGVkQnk6IGNvbnRleHQucmVxdWVzdGVkQnksXG4gICAgICAgICAgICAgICAgcXVlcnlUeXBlOiAnYXBwbGVNdXNpY1NvbmcnLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICBzb3VyY2U6IG0sXG4gICAgICAgICAgICAgICAgICBicmlkZ2U6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVlc3RNZXRhZGF0YTogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBtLFxuICAgICAgICAgICAgICAgICAgICBicmlkZ2U6IG51bGxcbiAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICB0cmFjay5wbGF5bGlzdCA9IHBsYXlsaXN0O1xuICAgICAgICAgICAgICB0cmFjay5leHRyYWN0b3IgPSB0aGlzO1xuXG4gICAgICAgICAgICAgIHJldHVybiB0cmFjaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuXG4gICAgICAgICAgcmV0dXJuIHsgcGxheWxpc3QsIHRyYWNrczogcGxheWxpc3QudHJhY2tzIH07XG4gICAgICAgIH1cbiAgICAgIGNhc2UgUXVlcnlUeXBlLkFQUExFX01VU0lDX1NPTkc6e1xuICAgICAgICAgIGNvbnN0IGluZm8gPSBhd2FpdCBBcHBsZU11c2ljLmdldFNvbmdJbmZvKHF1ZXJ5KTtcbiAgICAgICAgICBpZiAoIWluZm8pIHJldHVybiB0aGlzLmNyZWF0ZVJlc3BvbnNlKCk7XG5cbiAgICAgICAgICBjb25zdCB0cmFjazogVHJhY2sgPSBuZXcgVHJhY2sodGhpcy5jb250ZXh0LnBsYXllciwge1xuICAgICAgICAgICAgYXV0aG9yOiBpbmZvLmFydGlzdC5uYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGluZm8udGl0bGUsXG4gICAgICAgICAgICBkdXJhdGlvbjogdHlwZW9mIGluZm8uZHVyYXRpb24gPT09ICdudW1iZXInID8gVXRpbC5idWlsZFRpbWVDb2RlKFV0aWwucGFyc2VNUyhpbmZvLmR1cmF0aW9uKSkgOiBpbmZvLmR1cmF0aW9uLFxuICAgICAgICAgICAgdGh1bWJuYWlsOiBpbmZvLnRodW1ibmFpbCxcbiAgICAgICAgICAgIHRpdGxlOiBpbmZvLnRpdGxlLFxuICAgICAgICAgICAgdXJsOiBpbmZvLnVybCxcbiAgICAgICAgICAgIHZpZXdzOiAwLFxuICAgICAgICAgICAgc291cmNlOiAnYXBwbGVfbXVzaWMnLFxuICAgICAgICAgICAgcmVxdWVzdGVkQnk6IGNvbnRleHQucmVxdWVzdGVkQnksXG4gICAgICAgICAgICBxdWVyeVR5cGU6IGNvbnRleHQudHlwZSxcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgIHNvdXJjZTogaW5mbyxcbiAgICAgICAgICAgICAgYnJpZGdlOiBudWxsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVxdWVzdE1ldGFkYXRhOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc291cmNlOiBpbmZvLFxuICAgICAgICAgICAgICAgIGJyaWRnZTogbnVsbFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgdHJhY2suZXh0cmFjdG9yID0gdGhpcztcblxuICAgICAgICAgIHJldHVybiB7IHBsYXlsaXN0OiBudWxsLCB0cmFja3M6IFt0cmFja10gfTtcbiAgICAgICAgfVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHsgcGxheWxpc3Q6IG51bGwsIHRyYWNrczogW10gfTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgc3RyZWFtKGluZm86IFRyYWNrKTogUHJvbWlzZTxFeHRyYWN0b3JTdHJlYW1hYmxlPiB7XG4gICAgaWYgKHRoaXMuX3N0cmVhbSkge1xuICAgICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgdGhpcy5fc3RyZWFtKGluZm8udXJsLCBpbmZvKTtcbiAgICAgIGlmICh0eXBlb2Ygc3RyZWFtID09PSAnc3RyaW5nJykgcmV0dXJuIHN0cmVhbTtcbiAgICAgIHJldHVybiBzdHJlYW07XG4gICAgfVxuXG4gICAgLy8gbmV3IGFwaVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuY29udGV4dC5yZXF1ZXN0QnJpZGdlKGluZm8sIHRoaXMpO1xuXG4gICAgaWYgKCFyZXN1bHQ/LnJlc3VsdCkgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgYnJpZGdlIHRoaXMgdHJhY2snKTtcblxuICAgIHJldHVybiByZXN1bHQucmVzdWx0O1xuICB9XG59IiwgImV4cG9ydCAqIGZyb20gJy4vQXBwbGVNdXNpYyc7XG5leHBvcnQgKiBmcm9tICcuL1ZpbWVvJztcbmV4cG9ydCAqIGZyb20gJy4vZG93bmxvYWRlcic7XG5leHBvcnQgKiBmcm9tICcuL1Nwb3RpZnknOyIsICIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55ICovXG5pbXBvcnQgeyBRdWVyeVJlc29sdmVyIH0gZnJvbSAnZGlzY29yZC1wbGF5ZXInO1xuaW1wb3J0IHsgcGFyc2UsIEhUTUxFbGVtZW50IH0gZnJvbSAnbm9kZS1odG1sLXBhcnNlcic7XG5pbXBvcnQgeyBVQSwgZmV0Y2ggfSBmcm9tICcuL2hlbHBlcic7XG5cbmZ1bmN0aW9uIGdldEhUTUwobGluazogc3RyaW5nKTogUHJvbWlzZTxIVE1MRWxlbWVudCB8IG51bGw+IHtcbiAgcmV0dXJuIGZldGNoKGxpbmssIHtcbiAgICBoZWFkZXJzOiB7XG4gICAgICAnVXNlci1BZ2VudCc6IFVBXG4gICAgfVxuICB9KS5cbiAgdGhlbigocikgPT4gci50ZXh0KCkpLlxuICB0aGVuKFxuICAgICh0eHQpID0+IHBhcnNlKHR4dCksXG4gICAgKCkgPT4gbnVsbFxuICApO1xufVxuXG5mdW5jdGlvbiBtYWtlSW1hZ2UoeyBoZWlnaHQsIHVybCwgd2lkdGgsIGV4dCA9ICdqcGcnIH06IHt1cmw6IHN0cmluZzt3aWR0aDogbnVtYmVyO2hlaWdodDogbnVtYmVyO2V4dD86IHN0cmluZzt9KSB7XG4gIHJldHVybiB1cmwucmVwbGFjZSgne3d9JywgYCR7d2lkdGh9YCkucmVwbGFjZSgne2h9JywgYCR7aGVpZ2h0fWApLnJlcGxhY2UoJ3tmfScsIGV4dCk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlRHVyYXRpb24oZDogc3RyaW5nKSB7XG4gIGNvbnN0IHIgPSAobmFtZTogc3RyaW5nLCB1bml0OiBzdHJpbmcpID0+IGAoKD88JHtuYW1lfT4tP1xcXFxkKltcXFxcLixdP1xcXFxkKykke3VuaXR9KT9gO1xuICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoXG4gICAgW1xuICAgICcoPzxuZWdhdGl2ZT4tKT9QJyxcbiAgICByKCd5ZWFycycsICdZJyksXG4gICAgcignbW9udGhzJywgJ00nKSxcbiAgICByKCd3ZWVrcycsICdXJyksXG4gICAgcignZGF5cycsICdEJyksXG4gICAgJyhUJyxcbiAgICByKCdob3VycycsICdIJyksXG4gICAgcignbWludXRlcycsICdNJyksXG4gICAgcignc2Vjb25kcycsICdTJyksXG4gICAgJyk/JyAvLyBlbmQgb3B0aW9uYWwgdGltZVxuICAgIF0uam9pbignJylcbiAgKTtcbiAgY29uc3QgdGVzdCA9IHJlZ2V4LmV4ZWMoZCk7XG4gIGlmICghdGVzdCB8fCAhdGVzdC5ncm91cHMpIHJldHVybiAnMDowMCc7XG5cbiAgY29uc3QgZHVyID0gW1xuICB0ZXN0Lmdyb3Vwcy55ZWFycyxcbiAgdGVzdC5ncm91cHMubW9udGhzLFxuICB0ZXN0Lmdyb3Vwcy53ZWVrcyxcbiAgdGVzdC5ncm91cHMuZGF5cyxcbiAgdGVzdC5ncm91cHMuaG91cnMsXG4gIHRlc3QuZ3JvdXBzLm1pbnV0ZXMsXG4gIHRlc3QuZ3JvdXBzLnNlY29uZHNdO1xuXG5cbiAgcmV0dXJuIChcbiAgICBkdXIuXG4gICAgZmlsdGVyKChyLCBpLCBhKSA9PiAhIXIgfHwgaSA+IGEubGVuZ3RoIC0gMikuXG4gICAgbWFwKChtLCBpKSA9PiB7XG4gICAgICBpZiAoIW0pIG0gPSAnMCc7XG4gICAgICByZXR1cm4gaSA8IDEgPyBtIDogbS5wYWRTdGFydCgyLCAnMCcpO1xuICAgIH0pLlxuICAgIGpvaW4oJzonKSB8fCAnMDowMCcpO1xuXG59XG5cbmV4cG9ydCBjbGFzcyBBcHBsZU11c2ljIHtcbiAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xuICAgIHJldHVybiBBcHBsZU11c2ljO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBhc3luYyBzZWFyY2gocXVlcnk6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9tdXNpYy5hcHBsZS5jb20vdXMvc2VhcmNoP3Rlcm09JHtlbmNvZGVVUklDb21wb25lbnQocXVlcnkpfWA7XG4gICAgICBjb25zdCBub2RlID0gYXdhaXQgZ2V0SFRNTCh1cmwpO1xuICAgICAgaWYgKCFub2RlKSByZXR1cm4gW107XG5cbiAgICAgIGNvbnN0IHJhd0RhdGEgPSBub2RlLmdldEVsZW1lbnRCeUlkKCdzZXJpYWxpemVkLXNlcnZlci1kYXRhJyk7XG4gICAgICBpZiAoIXJhd0RhdGEpIHJldHVybiBbXTtcblxuICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UocmF3RGF0YS5pbm5lclRleHQpWzBdLmRhdGEuc2VjdGlvbnM7XG4gICAgICBjb25zdCB0cmFja3MgPSBkYXRhLmZpbmQoKHM6IGFueSkgPT4gcy5pdGVtS2luZCA9PT0gJ3RyYWNrTG9ja3VwJyk/Lml0ZW1zO1xuICAgICAgaWYgKCF0cmFja3MpIHJldHVybiBbXTtcblxuICAgICAgcmV0dXJuIHRyYWNrcy5tYXAoKHRyYWNrOiBhbnkpID0+ICh7XG4gICAgICAgIGlkOiB0cmFjay5jb250ZW50RGVzY3JpcHRvci5pZGVudGlmaWVycy5zdG9yZUFkYW1JRCxcbiAgICAgICAgZHVyYXRpb246IHRyYWNrLmR1cmF0aW9uIHx8ICcwOjAwJyxcbiAgICAgICAgdGl0bGU6IHRyYWNrLnRpdGxlLFxuICAgICAgICB1cmw6IHRyYWNrLmNvbnRlbnREZXNjcmlwdG9yLnVybCxcbiAgICAgICAgdGh1bWJuYWlsOiB0cmFjaz8uYXJ0d29yaz8uZGljdGlvbmFyeSA/XG4gICAgICAgIG1ha2VJbWFnZSh7XG4gICAgICAgICAgdXJsOiB0cmFjay5hcnR3b3JrLmRpY3Rpb25hcnkudXJsLFxuICAgICAgICAgIGhlaWdodDogdHJhY2suYXJ0d29yay5kaWN0aW9uYXJ5LmhlaWdodCxcbiAgICAgICAgICB3aWR0aDogdHJhY2suYXJ0d29yay5kaWN0aW9uYXJ5LndpZHRoXG4gICAgICAgIH0pIDpcbiAgICAgICAgJ2h0dHBzOi8vbXVzaWMuYXBwbGUuY29tL2Fzc2V0cy9mYXZpY29uL2Zhdmljb24tMTgwLnBuZycsXG4gICAgICAgIGFydGlzdDoge1xuICAgICAgICAgIG5hbWU6IHRyYWNrLnN1YnRpdGxlTGlua3M/LlswXT8udGl0bGUgPz8gJ1Vua25vd24gQXJ0aXN0J1xuICAgICAgICB9XG4gICAgICB9KSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRTb25nSW5mb0ZhbGxiYWNrKHJlczogSFRNTEVsZW1lbnQsIG5hbWU6IHN0cmluZywgaWQ6IHN0cmluZywgbGluazogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG1ldGFUYWdzID0gcmVzLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdtZXRhJyk7XG4gICAgICBpZiAoIW1ldGFUYWdzLmxlbmd0aCkgcmV0dXJuIG51bGw7XG5cbiAgICAgIGNvbnN0IHRpdGxlID1cbiAgICAgIG1ldGFUYWdzLmZpbmQoKHIpID0+IHIuZ2V0QXR0cmlidXRlKCduYW1lJykgPT09ICdhcHBsZTp0aXRsZScpPy5nZXRBdHRyaWJ1dGUoJ2NvbnRlbnQnKSB8fFxuICAgICAgcmVzLnF1ZXJ5U2VsZWN0b3IoJ3RpdGxlJyk/LmlubmVyVGV4dCB8fFxuICAgICAgbmFtZTtcbiAgICAgIGNvbnN0IGNvbnRlbnRJZCA9XG4gICAgICBtZXRhVGFncy5maW5kKChyKSA9PiByLmdldEF0dHJpYnV0ZSgnbmFtZScpID09PSAnYXBwbGU6Y29udGVudF9pZCcpPy5nZXRBdHRyaWJ1dGUoJ2NvbnRlbnQnKSB8fCBpZDtcbiAgICAgIGNvbnN0IGR1cmF0aW9uUmF3ID0gbWV0YVRhZ3MuXG4gICAgICBmaW5kKChyKSA9PiByLmdldEF0dHJpYnV0ZSgncHJvcGVydHknKSA9PT0gJ211c2ljOnNvbmc6ZHVyYXRpb24nKT8uXG4gICAgICBnZXRBdHRyaWJ1dGUoJ2NvbnRlbnQnKTtcblxuICAgICAgY29uc3Qgc29uZyA9IHtcbiAgICAgICAgaWQ6IGNvbnRlbnRJZCxcbiAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uUmF3ID9cbiAgICAgICAgcGFyc2VEdXJhdGlvbihkdXJhdGlvblJhdykgOlxuICAgICAgICBtZXRhVGFncy5cbiAgICAgICAgZmluZCgobSkgPT4gbS5nZXRBdHRyaWJ1dGUoJ25hbWUnKSA9PT0gJ2FwcGxlOmRlc2NyaXB0aW9uJyk/LlxuICAgICAgICB0ZXh0Q29udGVudC5zcGxpdCgnRHVyYXRpb246ICcpPy5bMV0uXG4gICAgICAgIHNwbGl0KCdcIicpPy5bMF0gfHwgJzA6MDAnLFxuICAgICAgICB0aXRsZSxcbiAgICAgICAgdXJsOiBsaW5rLFxuICAgICAgICB0aHVtYm5haWw6XG4gICAgICAgIG1ldGFUYWdzLlxuICAgICAgICBmaW5kKChyKSA9PiBbJ29nOmltYWdlOnNlY3VyZV91cmwnLCAnb2c6aW1hZ2UnXS5pbmNsdWRlcyhyLmdldEF0dHJpYnV0ZSgncHJvcGVydHknKSEpKT8uXG4gICAgICAgIGdldEF0dHJpYnV0ZSgnY29udGVudCcpIHx8ICdodHRwczovL211c2ljLmFwcGxlLmNvbS9hc3NldHMvZmF2aWNvbi9mYXZpY29uLTE4MC5wbmcnLFxuICAgICAgICBhcnRpc3Q6IHtcbiAgICAgICAgICBuYW1lOiByZXMucXVlcnlTZWxlY3RvcignLnNvbmctc3VidGl0bGVzX19hcnRpc3RzPmEnKT8udGV4dENvbnRlbnQ/LnRyaW0oKSB8fCAnQXBwbGUgTXVzaWMnXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBzb25nO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRTb25nSW5mbyhsaW5rOiBzdHJpbmcpIHtcbiAgICBpZiAoIVF1ZXJ5UmVzb2x2ZXIucmVnZXguYXBwbGVNdXNpY1NvbmdSZWdleC50ZXN0KGxpbmspKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGxpbmspO1xuICAgIGNvbnN0IGlkID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ2knKTtcbiAgICBjb25zdCBuYW1lID0gdXJsLnBhdGhuYW1lLnNwbGl0KCdhbGJ1bS8nKVsxXT8uc3BsaXQoJy8nKVswXTtcblxuICAgIGlmICghaWQgfHwgIW5hbWUpIHJldHVybiBudWxsO1xuXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZ2V0SFRNTChgaHR0cHM6Ly9tdXNpYy5hcHBsZS5jb20vdXMvc29uZy8ke25hbWV9LyR7aWR9YCk7XG4gICAgaWYgKCFyZXMpIHJldHVybiBudWxsO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGFzcmMgPVxuICAgICAgcmVzLmdldEVsZW1lbnRCeUlkKCdzZXJpYWxpemVkLXNlcnZlci1kYXRhJyk/LmlubmVyVGV4dCB8fFxuICAgICAgcmVzLmlubmVyVGV4dC5cbiAgICAgIHNwbGl0KCc8c2NyaXB0IHR5cGU9XCJhcHBsaWNhdGlvbi9qc29uXCIgaWQ9XCJzZXJpYWxpemVkLXNlcnZlci1kYXRhXCI+Jyk/LlsxXT8uXG4gICAgICBzcGxpdCgnPC9zY3JpcHQ+Jyk/LlswXTtcbiAgICAgIGlmICghZGF0YXNyYykgdGhyb3cgJ25vdCBmb3VuZCc7XG4gICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShkYXRhc3JjKVswXS5kYXRhLnNlb0RhdGE7XG4gICAgICBjb25zdCBzb25nID0gZGF0YS5vZ1NvbmdzWzBdPy5hdHRyaWJ1dGVzO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogZGF0YS5vZ1NvbmdzWzBdPy5pZCB8fCBkYXRhLmFwcGxlQ29udGVudElkIHx8IGlkLFxuICAgICAgICBkdXJhdGlvbjogc29uZz8uZHVyYXRpb25Jbk1pbGxpcyB8fCAnMDowMCcsXG4gICAgICAgIHRpdGxlOiBzb25nPy5uYW1lIHx8IGRhdGEuYXBwbGVUaXRsZSxcbiAgICAgICAgdXJsOiBzb25nPy51cmwgfHwgZGF0YS51cmwgfHwgbGluayxcbiAgICAgICAgdGh1bWJuYWlsOiBzb25nPy5hcnR3b3JrID9cbiAgICAgICAgbWFrZUltYWdlKHtcbiAgICAgICAgICB1cmw6IHNvbmcuYXJ0d29yay51cmwsXG4gICAgICAgICAgaGVpZ2h0OiBzb25nLmFydHdvcmsuaGVpZ2h0LFxuICAgICAgICAgIHdpZHRoOiBzb25nLmFydHdvcmsud2lkdGhcbiAgICAgICAgfSkgOlxuICAgICAgICBkYXRhLmFydHdvcmtVcmwgP1xuICAgICAgICBtYWtlSW1hZ2Uoe1xuICAgICAgICAgIGhlaWdodDogZGF0YS5oZWlnaHQsXG4gICAgICAgICAgd2lkdGg6IGRhdGEud2lkdGgsXG4gICAgICAgICAgdXJsOiBkYXRhLmFydHdvcmtVcmwsXG4gICAgICAgICAgZXh0OiBkYXRhLmZpbGVUeXBlIHx8ICdqcGcnXG4gICAgICAgIH0pIDpcbiAgICAgICAgJ2h0dHBzOi8vbXVzaWMuYXBwbGUuY29tL2Fzc2V0cy9mYXZpY29uL2Zhdmljb24tMTgwLnBuZycsXG4gICAgICAgIGFydGlzdDoge1xuICAgICAgICAgIG5hbWU6IHNvbmc/LmFydGlzdE5hbWUgfHwgZGF0YS5zb2NpYWxUaXRsZSB8fCAnQXBwbGUgTXVzaWMnXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRTb25nSW5mb0ZhbGxiYWNrKHJlcywgbmFtZSwgaWQsIGxpbmspO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0UGxheWxpc3RJbmZvKGxpbms6IHN0cmluZykge1xuICAgIGlmICghUXVlcnlSZXNvbHZlci5yZWdleC5hcHBsZU11c2ljUGxheWxpc3RSZWdleC50ZXN0KGxpbmspKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCByZXMgPSBhd2FpdCBnZXRIVE1MKGxpbmspO1xuICAgIGlmICghcmVzKSByZXR1cm4gbnVsbDtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhc3JjID1cbiAgICAgIHJlcy5nZXRFbGVtZW50QnlJZCgnc2VyaWFsaXplZC1zZXJ2ZXItZGF0YScpPy5pbm5lclRleHQgfHxcbiAgICAgIHJlcy5pbm5lclRleHQuXG4gICAgICBzcGxpdCgnPHNjcmlwdCB0eXBlPVwiYXBwbGljYXRpb24vanNvblwiIGlkPVwic2VyaWFsaXplZC1zZXJ2ZXItZGF0YVwiPicpPy5bMV0/LlxuICAgICAgc3BsaXQoJzwvc2NyaXB0PicpPy5bMF07XG4gICAgICBpZiAoIWRhdGFzcmMpIHRocm93ICdub3QgZm91bmQnO1xuICAgICAgY29uc3QgcGwgPSBKU09OLnBhcnNlKGRhdGFzcmMpWzBdLmRhdGEuc2VvRGF0YTtcbiAgICAgIGNvbnN0IHRodW1ibmFpbCA9IHBsLmFydHdvcmtVcmwgP1xuICAgICAgbWFrZUltYWdlKHtcbiAgICAgICAgaGVpZ2h0OiBwbC5oZWlnaHQsXG4gICAgICAgIHdpZHRoOiBwbC53aWR0aCxcbiAgICAgICAgdXJsOiBwbC5hcnR3b3JrVXJsLFxuICAgICAgICBleHQ6IHBsLmZpbGVUeXBlIHx8ICdqcGcnXG4gICAgICB9KSA6XG4gICAgICAnaHR0cHM6Ly9tdXNpYy5hcHBsZS5jb20vYXNzZXRzL2Zhdmljb24vZmF2aWNvbi0xODAucG5nJztcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBwbC5hcHBsZUNvbnRlbnRJZCxcbiAgICAgICAgdGl0bGU6IHBsLmFwcGxlVGl0bGUsXG4gICAgICAgIHRodW1ibmFpbCxcbiAgICAgICAgYXJ0aXN0OiB7XG4gICAgICAgICAgbmFtZTogcGwub2dTb25ncz8uWzBdPy5hdHRyaWJ1dGVzPy5hcnRpc3ROYW1lIHx8ICdBcHBsZSBNdXNpYydcbiAgICAgICAgfSxcbiAgICAgICAgdXJsOiBwbC51cmwsXG4gICAgICAgIHRyYWNrczpcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgIHBsLm9nU29uZ3M/Lm1hcCgobTogYW55KSA9PiB7XG4gICAgICAgICAgY29uc3Qgc29uZyA9IG0uYXR0cmlidXRlcztcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IG0uaWQsXG4gICAgICAgICAgICBkdXJhdGlvbjogc29uZy5kdXJhdGlvbkluTWlsbGlzIHx8ICcwOjAwJyxcbiAgICAgICAgICAgIHRpdGxlOiBzb25nLm5hbWUsXG4gICAgICAgICAgICB1cmw6IHNvbmcudXJsLFxuICAgICAgICAgICAgdGh1bWJuYWlsOiBzb25nLmFydHdvcmsgP1xuICAgICAgICAgICAgbWFrZUltYWdlKHtcbiAgICAgICAgICAgICAgdXJsOiBzb25nLmFydHdvcmsudXJsLFxuICAgICAgICAgICAgICBoZWlnaHQ6IHNvbmcuYXJ0d29yay5oZWlnaHQsXG4gICAgICAgICAgICAgIHdpZHRoOiBzb25nLmFydHdvcmsud2lkdGhcbiAgICAgICAgICAgIH0pIDpcbiAgICAgICAgICAgIHRodW1ibmFpbCxcbiAgICAgICAgICAgIGFydGlzdDoge1xuICAgICAgICAgICAgICBuYW1lOiBzb25nLmFydGlzdE5hbWUgfHwgJ0FwcGxlIE11c2ljJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIH0pIHx8IFtdXG4gICAgICB9O1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRBbGJ1bUluZm8obGluazogc3RyaW5nKSB7XG4gICAgaWYgKCFRdWVyeVJlc29sdmVyLnJlZ2V4LmFwcGxlTXVzaWNBbGJ1bVJlZ2V4LnRlc3QobGluaykpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGdldEhUTUwobGluayk7XG4gICAgaWYgKCFyZXMpIHJldHVybiBudWxsO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGFzcmMgPVxuICAgICAgcmVzLmdldEVsZW1lbnRCeUlkKCdzZXJpYWxpemVkLXNlcnZlci1kYXRhJyk/LmlubmVyVGV4dCB8fFxuICAgICAgcmVzLmlubmVyVGV4dC5cbiAgICAgIHNwbGl0KCc8c2NyaXB0IHR5cGU9XCJhcHBsaWNhdGlvbi9qc29uXCIgaWQ9XCJzZXJpYWxpemVkLXNlcnZlci1kYXRhXCI+Jyk/LlsxXT8uXG4gICAgICBzcGxpdCgnPC9zY3JpcHQ+Jyk/LlswXTtcbiAgICAgIGlmICghZGF0YXNyYykgdGhyb3cgJ25vdCBmb3VuZCc7XG4gICAgICBjb25zdCBwbCA9IEpTT04ucGFyc2UoZGF0YXNyYylbMF0uZGF0YS5zZW9EYXRhO1xuICAgICAgY29uc3QgdGh1bWJuYWlsID0gcGwuYXJ0d29ya1VybCA/XG4gICAgICBtYWtlSW1hZ2Uoe1xuICAgICAgICBoZWlnaHQ6IHBsLmhlaWdodCxcbiAgICAgICAgd2lkdGg6IHBsLndpZHRoLFxuICAgICAgICB1cmw6IHBsLmFydHdvcmtVcmwsXG4gICAgICAgIGV4dDogcGwuZmlsZVR5cGUgfHwgJ2pwZydcbiAgICAgIH0pIDpcbiAgICAgICdodHRwczovL211c2ljLmFwcGxlLmNvbS9hc3NldHMvZmF2aWNvbi9mYXZpY29uLTE4MC5wbmcnO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IHBsLmFwcGxlQ29udGVudElkLFxuICAgICAgICB0aXRsZTogcGwuYXBwbGVUaXRsZSxcbiAgICAgICAgdGh1bWJuYWlsLFxuICAgICAgICBhcnRpc3Q6IHtcbiAgICAgICAgICBuYW1lOiBwbC5vZ1NvbmdzPy5bMF0/LmF0dHJpYnV0ZXM/LmFydGlzdE5hbWUgfHwgJ0FwcGxlIE11c2ljJ1xuICAgICAgICB9LFxuICAgICAgICB1cmw6IHBsLnVybCxcbiAgICAgICAgdHJhY2tzOlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgcGwub2dTb25ncz8ubWFwKChtOiBhbnkpID0+IHtcbiAgICAgICAgICBjb25zdCBzb25nID0gbS5hdHRyaWJ1dGVzO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogbS5pZCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBzb25nLmR1cmF0aW9uSW5NaWxsaXMgfHwgJzA6MDAnLFxuICAgICAgICAgICAgdGl0bGU6IHNvbmcubmFtZSxcbiAgICAgICAgICAgIHVybDogc29uZy51cmwsXG4gICAgICAgICAgICB0aHVtYm5haWw6IHNvbmcuYXJ0d29yayA/XG4gICAgICAgICAgICBtYWtlSW1hZ2Uoe1xuICAgICAgICAgICAgICB1cmw6IHNvbmcuYXJ0d29yay51cmwsXG4gICAgICAgICAgICAgIGhlaWdodDogc29uZy5hcnR3b3JrLmhlaWdodCxcbiAgICAgICAgICAgICAgd2lkdGg6IHNvbmcuYXJ0d29yay53aWR0aFxuICAgICAgICAgICAgfSkgOlxuICAgICAgICAgICAgdGh1bWJuYWlsLFxuICAgICAgICAgICAgYXJ0aXN0OiB7XG4gICAgICAgICAgICAgIG5hbWU6IHNvbmcuYXJ0aXN0TmFtZSB8fCAnQXBwbGUgTXVzaWMnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfSkgfHwgW11cbiAgICAgIH07XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbn0iLCAiaW1wb3J0IHsgZmV0Y2gsIFVBIH0gZnJvbSAnLi9oZWxwZXInO1xuXG5jb25zdCBTUF9BTk9OX1RPS0VOX1VSTCA9ICdodHRwczovL29wZW4uc3BvdGlmeS5jb20vZ2V0X2FjY2Vzc190b2tlbj9yZWFzb249dHJhbnNwb3J0JnByb2R1Y3RUeXBlPWVtYmVkJztcbmNvbnN0IFNQX0FDQ0VTU19UT0tFTl9VUkwgPSAnaHR0cHM6Ly9hY2NvdW50cy5zcG90aWZ5LmNvbS9hcGkvdG9rZW4/Z3JhbnRfdHlwZT1jbGllbnRfY3JlZGVudGlhbHMnO1xuY29uc3QgU1BfQkFTRSA9ICdodHRwczovL2FwaS5zcG90aWZ5LmNvbS92MSc7XG5cbmludGVyZmFjZSBTUF9BQ0NFU1NfVE9LRU4ge1xuICB0b2tlbjogc3RyaW5nO1xuICBleHBpcmVzQWZ0ZXI6IG51bWJlcjtcbiAgdHlwZTogJ0JlYXJlcic7XG59XG5cbmV4cG9ydCBjbGFzcyBTcG90aWZ5QVBJIHtcbiAgcHVibGljIGFjY2Vzc1Rva2VuOiBTUF9BQ0NFU1NfVE9LRU4gfCBudWxsID0gbnVsbDtcblxuICBwdWJsaWMgY29uc3RydWN0b3IoXG4gIHB1YmxpYyBjcmVkZW50aWFsczoge2NsaWVudElkOiBzdHJpbmcgfCBudWxsO2NsaWVudFNlY3JldDogc3RyaW5nIHwgbnVsbDt9ID0ge1xuICAgIGNsaWVudElkOiBudWxsLFxuICAgIGNsaWVudFNlY3JldDogbnVsbFxuICB9KVxuICB7fVxuXG4gIHB1YmxpYyBnZXQgYXV0aG9yaXphdGlvbktleSgpIHtcbiAgICBpZiAoIXRoaXMuY3JlZGVudGlhbHMuY2xpZW50SWQgfHwgIXRoaXMuY3JlZGVudGlhbHMuY2xpZW50U2VjcmV0KSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gQnVmZmVyLmZyb20oYCR7dGhpcy5jcmVkZW50aWFscy5jbGllbnRJZH06JHt0aGlzLmNyZWRlbnRpYWxzLmNsaWVudFNlY3JldH1gKS50b1N0cmluZygnYmFzZTY0Jyk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgcmVxdWVzdFRva2VuKCkge1xuICAgIGNvbnN0IGtleSA9IHRoaXMuYXV0aG9yaXphdGlvbktleTtcblxuICAgIGlmICgha2V5KSByZXR1cm4gYXdhaXQgdGhpcy5yZXF1ZXN0QW5vbnltb3VzVG9rZW4oKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChTUF9BQ0NFU1NfVE9LRU5fVVJMLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ1VzZXItQWdlbnQnOiBVQSxcbiAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmFzaWMgJHtrZXl9YCxcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVzLmpzb24oKTtcblxuICAgICAgaWYgKCFib2R5LmFjY2Vzc190b2tlbikgdGhyb3cgJ25vIHRva2VuJztcblxuICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgdG9rZW46IGJvZHkuYWNjZXNzX3Rva2VuIGFzIHN0cmluZyxcbiAgICAgICAgZXhwaXJlc0FmdGVyOiBib2R5LmV4cGlyZXNfaW4gYXMgbnVtYmVyLFxuICAgICAgICB0eXBlOiAnQmVhcmVyJyBhcyBjb25zdFxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHRoaXMuYWNjZXNzVG9rZW4gPSBkYXRhO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucmVxdWVzdEFub255bW91c1Rva2VuKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIHJlcXVlc3RBbm9ueW1vdXNUb2tlbigpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goU1BfQU5PTl9UT0tFTl9VUkwsIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdVc2VyLUFnZW50JzogVUEsXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXMub2spIHRocm93ICdub3Rfb2snO1xuXG4gICAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVzLmpzb24oKTtcblxuICAgICAgaWYgKCFib2R5LmFjY2Vzc1Rva2VuKSB0aHJvdyAnbm9fYWNjZXNzX3Rva2VuJztcblxuICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgdG9rZW46IGJvZHkuYWNjZXNzVG9rZW4gYXMgc3RyaW5nLFxuICAgICAgICBleHBpcmVzQWZ0ZXI6IGJvZHkuYWNjZXNzVG9rZW5FeHBpcmF0aW9uVGltZXN0YW1wTXMgYXMgbnVtYmVyLFxuICAgICAgICB0eXBlOiAnQmVhcmVyJyBhcyBjb25zdFxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHRoaXMuYWNjZXNzVG9rZW4gPSBkYXRhO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGlzVG9rZW5FeHBpcmVkKCkge1xuICAgIGlmICghdGhpcy5hY2Nlc3NUb2tlbikgcmV0dXJuIHRydWU7XG4gICAgcmV0dXJuIERhdGUubm93KCkgPiB0aGlzLmFjY2Vzc1Rva2VuLmV4cGlyZXNBZnRlcjtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBzZWFyY2gocXVlcnk6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICAvLyByZXFcbiAgICAgIGlmICh0aGlzLmlzVG9rZW5FeHBpcmVkKCkpIGF3YWl0IHRoaXMucmVxdWVzdFRva2VuKCk7XG4gICAgICAvLyBmYWlsZWRcbiAgICAgIGlmICghdGhpcy5hY2Nlc3NUb2tlbikgcmV0dXJuIG51bGw7XG5cbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke1NQX0JBU0V9L3NlYXJjaC8/cT0ke2VuY29kZVVSSUNvbXBvbmVudChxdWVyeSl9JnR5cGU9dHJhY2smbWFya2V0PVVTYCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ1VzZXItQWdlbnQnOiBVQSxcbiAgICAgICAgICBBdXRob3JpemF0aW9uOiBgJHt0aGlzLmFjY2Vzc1Rva2VuLnR5cGV9ICR7dGhpcy5hY2Nlc3NUb2tlbi50b2tlbn1gLFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzLm9rKSByZXR1cm4gbnVsbDtcblxuICAgICAgY29uc3QgZGF0YToge3RyYWNrczoge2l0ZW1zOiBTcG90aWZ5VHJhY2tbXTt9O30gPSBhd2FpdCByZXMuanNvbigpO1xuXG4gICAgICByZXR1cm4gZGF0YS50cmFja3MuaXRlbXMubWFwKChtKSA9PiAoe1xuICAgICAgICB0aXRsZTogbS5uYW1lLFxuICAgICAgICBkdXJhdGlvbjogbS5kdXJhdGlvbl9tcyxcbiAgICAgICAgYXJ0aXN0OiBtLmFydGlzdHMubWFwKChtKSA9PiBtLm5hbWUpLmpvaW4oJywgJyksXG4gICAgICAgIHVybDogbS5leHRlcm5hbF91cmxzPy5zcG90aWZ5IHx8IGBodHRwczovL29wZW4uc3BvdGlmeS5jb20vdHJhY2svJHttLmlkfWAsXG4gICAgICAgIHRodW1ibmFpbDogbS5hbGJ1bS5pbWFnZXM/LlswXT8udXJsIHx8IG51bGxcbiAgICAgIH0pKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRQbGF5bGlzdChpZDogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIHJlcVxuICAgICAgaWYgKHRoaXMuaXNUb2tlbkV4cGlyZWQoKSkgYXdhaXQgdGhpcy5yZXF1ZXN0VG9rZW4oKTtcbiAgICAgIC8vIGZhaWxlZFxuICAgICAgaWYgKCF0aGlzLmFjY2Vzc1Rva2VuKSByZXR1cm4gbnVsbDtcblxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7U1BfQkFTRX0vcGxheWxpc3RzLyR7aWR9P21hcmtldD1VU2AsIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdVc2VyLUFnZW50JzogVUEsXG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogYCR7dGhpcy5hY2Nlc3NUb2tlbi50eXBlfSAke3RoaXMuYWNjZXNzVG9rZW4udG9rZW59YCxcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKCFyZXMub2spIHJldHVybiBudWxsO1xuXG4gICAgICBjb25zdCBkYXRhOiB7XG4gICAgICAgIGV4dGVybmFsX3VybHM6IHtzcG90aWZ5OiBzdHJpbmc7fTtcbiAgICAgICAgb3duZXI6IHtkaXNwbGF5X25hbWU6IHN0cmluZzt9O1xuICAgICAgICBpZDogc3RyaW5nO1xuICAgICAgICBuYW1lOiBzdHJpbmc7XG4gICAgICAgIGltYWdlczoge3VybDogc3RyaW5nO31bXTtcbiAgICAgICAgdHJhY2tzOiB7XG4gICAgICAgICAgaXRlbXM6IHt0cmFjazogU3BvdGlmeVRyYWNrO31bXTtcbiAgICAgICAgICBuZXh0Pzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgfSA9IGF3YWl0IHJlcy5qc29uKCk7XG5cbiAgICAgIGlmICghZGF0YS50cmFja3MuaXRlbXMubGVuZ3RoKSByZXR1cm4gbnVsbDtcblxuICAgICAgY29uc3QgdDoge3RyYWNrOiBTcG90aWZ5VHJhY2s7fVtdID0gZGF0YS50cmFja3MuaXRlbXM7XG5cbiAgICAgIGxldCBuZXh0OiBzdHJpbmcgfCB1bmRlZmluZWQgPSBkYXRhLnRyYWNrcy5uZXh0O1xuXG4gICAgICB3aGlsZSAodHlwZW9mIG5leHQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2gobmV4dCwge1xuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAnVXNlci1BZ2VudCc6IFVBLFxuICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgJHt0aGlzLmFjY2Vzc1Rva2VuLnR5cGV9ICR7dGhpcy5hY2Nlc3NUb2tlbi50b2tlbn1gLFxuICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKCFyZXMub2spIGJyZWFrO1xuICAgICAgICAgIGNvbnN0IG5leHRQYWdlOiB7aXRlbXM6IHt0cmFjazogU3BvdGlmeVRyYWNrO31bXTtuZXh0Pzogc3RyaW5nO30gPSBhd2FpdCByZXMuanNvbigpO1xuXG4gICAgICAgICAgdC5wdXNoKC4uLm5leHRQYWdlLml0ZW1zKTtcbiAgICAgICAgICBuZXh0ID0gbmV4dFBhZ2UubmV4dDtcblxuICAgICAgICAgIGlmICghbmV4dCkgYnJlYWs7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRyYWNrcyA9IHQubWFwKCh7IHRyYWNrOiBtIH0pID0+ICh7XG4gICAgICAgIHRpdGxlOiBtLm5hbWUsXG4gICAgICAgIGR1cmF0aW9uOiBtLmR1cmF0aW9uX21zLFxuICAgICAgICBhcnRpc3Q6IG0uYXJ0aXN0cy5tYXAoKG0pID0+IG0ubmFtZSkuam9pbignLCAnKSxcbiAgICAgICAgdXJsOiBtLmV4dGVybmFsX3VybHM/LnNwb3RpZnkgfHwgYGh0dHBzOi8vb3Blbi5zcG90aWZ5LmNvbS90cmFjay8ke20uaWR9YCxcbiAgICAgICAgdGh1bWJuYWlsOiBtLmFsYnVtLmltYWdlcz8uWzBdPy51cmwgfHwgbnVsbFxuICAgICAgfSkpO1xuXG4gICAgICBpZiAoIXRyYWNrcy5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICBhdXRob3I6IGRhdGEub3duZXIuZGlzcGxheV9uYW1lLFxuICAgICAgICB0aHVtYm5haWw6IGRhdGEuaW1hZ2VzPy5bMF0/LnVybCB8fCBudWxsLFxuICAgICAgICBpZDogZGF0YS5pZCxcbiAgICAgICAgdXJsOiBkYXRhLmV4dGVybmFsX3VybHMuc3BvdGlmeSB8fCBgaHR0cHM6Ly9vcGVuLnNwb3RpZnkuY29tL3BsYXlsaXN0LyR7aWR9YCxcbiAgICAgICAgdHJhY2tzXG4gICAgICB9O1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldEFsYnVtKGlkOiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgLy8gcmVxXG4gICAgICBpZiAodGhpcy5pc1Rva2VuRXhwaXJlZCgpKSBhd2FpdCB0aGlzLnJlcXVlc3RUb2tlbigpO1xuICAgICAgLy8gZmFpbGVkXG4gICAgICBpZiAoIXRoaXMuYWNjZXNzVG9rZW4pIHJldHVybiBudWxsO1xuXG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtTUF9CQVNFfS9hbGJ1bXMvJHtpZH0/bWFya2V0PVVTYCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ1VzZXItQWdlbnQnOiBVQSxcbiAgICAgICAgICBBdXRob3JpemF0aW9uOiBgJHt0aGlzLmFjY2Vzc1Rva2VuLnR5cGV9ICR7dGhpcy5hY2Nlc3NUb2tlbi50b2tlbn1gLFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAoIXJlcy5vaykgcmV0dXJuIG51bGw7XG5cbiAgICAgIGNvbnN0IGRhdGE6IHtcbiAgICAgICAgZXh0ZXJuYWxfdXJsczoge3Nwb3RpZnk6IHN0cmluZzt9O1xuICAgICAgICBhcnRpc3RzOiB7bmFtZTogc3RyaW5nO31bXTtcbiAgICAgICAgaWQ6IHN0cmluZztcbiAgICAgICAgbmFtZTogc3RyaW5nO1xuICAgICAgICBpbWFnZXM6IHt1cmw6IHN0cmluZzt9W107XG4gICAgICAgIHRyYWNrczoge1xuICAgICAgICAgIGl0ZW1zOiBTcG90aWZ5VHJhY2tbXTtcbiAgICAgICAgICBuZXh0Pzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgfSA9IGF3YWl0IHJlcy5qc29uKCk7XG5cbiAgICAgIGlmICghZGF0YS50cmFja3MuaXRlbXMubGVuZ3RoKSByZXR1cm4gbnVsbDtcblxuICAgICAgY29uc3QgdDogU3BvdGlmeVRyYWNrW10gPSBkYXRhLnRyYWNrcy5pdGVtcztcblxuICAgICAgbGV0IG5leHQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IGRhdGEudHJhY2tzLm5leHQ7XG5cbiAgICAgIHdoaWxlICh0eXBlb2YgbmV4dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChuZXh0LCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICdVc2VyLUFnZW50JzogVUEsXG4gICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGAke3RoaXMuYWNjZXNzVG9rZW4udHlwZX0gJHt0aGlzLmFjY2Vzc1Rva2VuLnRva2VufWAsXG4gICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoIXJlcy5vaykgYnJlYWs7XG4gICAgICAgICAgY29uc3QgbmV4dFBhZ2U6IHtpdGVtczogU3BvdGlmeVRyYWNrW107bmV4dD86IHN0cmluZzt9ID0gYXdhaXQgcmVzLmpzb24oKTtcblxuICAgICAgICAgIHQucHVzaCguLi5uZXh0UGFnZS5pdGVtcyk7XG4gICAgICAgICAgbmV4dCA9IG5leHRQYWdlLm5leHQ7XG5cbiAgICAgICAgICBpZiAoIW5leHQpIGJyZWFrO1xuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCB0cmFja3MgPSB0Lm1hcCgobSkgPT4gKHtcbiAgICAgICAgdGl0bGU6IG0ubmFtZSxcbiAgICAgICAgZHVyYXRpb246IG0uZHVyYXRpb25fbXMsXG4gICAgICAgIGFydGlzdDogbS5hcnRpc3RzLm1hcCgobSkgPT4gbS5uYW1lKS5qb2luKCcsICcpLFxuICAgICAgICB1cmw6IG0uZXh0ZXJuYWxfdXJscz8uc3BvdGlmeSB8fCBgaHR0cHM6Ly9vcGVuLnNwb3RpZnkuY29tL3RyYWNrLyR7bS5pZH1gLFxuICAgICAgICB0aHVtYm5haWw6IGRhdGEuaW1hZ2VzPy5bMF0/LnVybCB8fCBudWxsXG4gICAgICB9KSk7XG5cbiAgICAgIGlmICghdHJhY2tzLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgIGF1dGhvcjogZGF0YS5hcnRpc3RzLm1hcCgobSkgPT4gbS5uYW1lKS5qb2luKCcsICcpLFxuICAgICAgICB0aHVtYm5haWw6IGRhdGEuaW1hZ2VzPy5bMF0/LnVybCB8fCBudWxsLFxuICAgICAgICBpZDogZGF0YS5pZCxcbiAgICAgICAgdXJsOiBkYXRhLmV4dGVybmFsX3VybHMuc3BvdGlmeSB8fCBgaHR0cHM6Ly9vcGVuLnNwb3RpZnkuY29tL2FsYnVtLyR7aWR9YCxcbiAgICAgICAgdHJhY2tzXG4gICAgICB9O1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3BvdGlmeVRyYWNrIHtcbiAgYWxidW06IHtcbiAgICBpbWFnZXM6IHtcbiAgICAgIGhlaWdodDogbnVtYmVyO1xuICAgICAgdXJsOiBzdHJpbmc7XG4gICAgICB3aWR0aDogbnVtYmVyO1xuICAgIH1bXTtcbiAgfTtcbiAgYXJ0aXN0czoge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICB9W107XG4gIGR1cmF0aW9uX21zOiBudW1iZXI7XG4gIGV4cGxpY2l0OiBib29sZWFuO1xuICBleHRlcm5hbF91cmxzOiB7c3BvdGlmeTogc3RyaW5nO307XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbn0iLCAiaW1wb3J0IHtcbiAgQmFzZUV4dHJhY3RvcixcbiAgRXh0cmFjdG9ySW5mbyxcbiAgRXh0cmFjdG9yU2VhcmNoQ29udGV4dCxcbiAgRXh0cmFjdG9yU3RyZWFtYWJsZSxcbiAgUGxheWxpc3QsXG4gIFF1ZXJ5VHlwZSxcbiAgU2VhcmNoUXVlcnlUeXBlLFxuICBUcmFjayxcbiAgVXRpbCB9IGZyb21cbidkaXNjb3JkLXBsYXllcic7XG5pbXBvcnQgdHlwZSB7IFJlYWRhYmxlIH0gZnJvbSAnc3RyZWFtJztcbmltcG9ydCB7IGZldGNoIH0gZnJvbSAnLi4vaW50ZXJuYWwvaGVscGVyJztcbmltcG9ydCBzcG90aWZ5LCB7IFNwb3RpZnksIFNwb3RpZnlBbGJ1bSwgU3BvdGlmeVBsYXlsaXN0LCBTcG90aWZ5U29uZyB9IGZyb20gJ3Nwb3RpZnktdXJsLWluZm8nO1xuaW1wb3J0IHsgU3BvdGlmeUFQSSB9IGZyb20gJy4uL2ludGVybmFsJztcbmltcG9ydCB7IFN0cmVhbUZOIH0gZnJvbSAnLi4vdHlwZXMvY29tbW9uJztcblxuY29uc3QgcmUgPVxuL14oPzpodHRwczpcXC9cXC9vcGVuXFwuc3BvdGlmeVxcLmNvbVxcLyhpbnRsLShbYS16XXxbQS1aXSl7MCwzfVxcLyk/KD86dXNlclxcL1tBLVphLXowLTldK1xcLyk/fHNwb3RpZnk6KShhbGJ1bXxwbGF5bGlzdHx0cmFjaykoPzpbLzpdKShbQS1aYS16MC05XSspLiokLztcblxuZXhwb3J0IGludGVyZmFjZSBTcG90aWZ5RXh0cmFjdG9ySW5pdCB7XG4gIGNsaWVudElkPzogc3RyaW5nIHwgbnVsbDtcbiAgY2xpZW50U2VjcmV0Pzogc3RyaW5nIHwgbnVsbDtcbiAgY3JlYXRlU3RyZWFtPzogKGV4dDogU3BvdGlmeUV4dHJhY3RvciwgdXJsOiBzdHJpbmcpID0+IFByb21pc2U8UmVhZGFibGUgfCBzdHJpbmc+O1xufVxuXG5leHBvcnQgY2xhc3MgU3BvdGlmeUV4dHJhY3RvciBleHRlbmRzIEJhc2VFeHRyYWN0b3I8U3BvdGlmeUV4dHJhY3RvckluaXQ+IHtcbiAgcHVibGljIHN0YXRpYyBpZGVudGlmaWVyID0gJ2NvbS5kaXNjb3JkLXBsYXllci5zcG90aWZ5ZXh0cmFjdG9yJyBhcyBjb25zdDtcbiAgcHJpdmF0ZSBfc3RyZWFtITogU3RyZWFtRk47XG4gIHByaXZhdGUgX2xpYiE6IFNwb3RpZnk7XG4gIHByaXZhdGUgX2NyZWRlbnRpYWxzID0ge1xuICAgIGNsaWVudElkOiB0aGlzLm9wdGlvbnMuY2xpZW50SWQgfHwgcHJvY2Vzcy5lbnYuRFBfU1BPVElGWV9DTElFTlRfSUQgfHwgbnVsbCxcbiAgICBjbGllbnRTZWNyZXQ6IHRoaXMub3B0aW9ucy5jbGllbnRTZWNyZXQgfHwgcHJvY2Vzcy5lbnYuRFBfU1BPVElGWV9DTElFTlRfU0VDUkVUIHx8IG51bGxcbiAgfTtcbiAgcHVibGljIGludGVybmFsID0gbmV3IFNwb3RpZnlBUEkodGhpcy5fY3JlZGVudGlhbHMpO1xuXG4gIHB1YmxpYyBhc3luYyBhY3RpdmF0ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLnByb3RvY29scyA9IFsnc3BzZWFyY2gnLCAnc3BvdGlmeSddO1xuICAgIHRoaXMuX2xpYiA9IHNwb3RpZnkoZmV0Y2gpO1xuICAgIGlmICh0aGlzLmludGVybmFsLmlzVG9rZW5FeHBpcmVkKCkpIGF3YWl0IHRoaXMuaW50ZXJuYWwucmVxdWVzdFRva2VuKCk7XG5cbiAgICBjb25zdCBmbiA9IHRoaXMub3B0aW9ucy5jcmVhdGVTdHJlYW07XG4gICAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5fc3RyZWFtID0gKHE6IHN0cmluZykgPT4ge1xuICAgICAgICByZXR1cm4gZm4odGhpcywgcSk7XG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBkZWFjdGl2YXRlKCkge1xuICAgIHRoaXMuX3N0cmVhbSA9IHVuZGVmaW5lZCBhcyB1bmtub3duIGFzIFN0cmVhbUZOO1xuICAgIHRoaXMuX2xpYiA9IHVuZGVmaW5lZCBhcyB1bmtub3duIGFzIFNwb3RpZnk7XG4gICAgdGhpcy5wcm90b2NvbHMgPSBbXTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyB2YWxpZGF0ZShxdWVyeTogc3RyaW5nLCB0eXBlPzogU2VhcmNoUXVlcnlUeXBlIHwgbnVsbCB8IHVuZGVmaW5lZCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIC8vIHByZXR0aWVyLWlnbm9yZVxuICAgIHJldHVybiAoPFNlYXJjaFF1ZXJ5VHlwZVtdPiBbXG4gICAgUXVlcnlUeXBlLlNQT1RJRllfQUxCVU0sXG4gICAgUXVlcnlUeXBlLlNQT1RJRllfUExBWUxJU1QsXG4gICAgUXVlcnlUeXBlLlNQT1RJRllfU09ORyxcbiAgICBRdWVyeVR5cGUuU1BPVElGWV9TRUFSQ0gsXG4gICAgUXVlcnlUeXBlLkFVVE8sXG4gICAgUXVlcnlUeXBlLkFVVE9fU0VBUkNIXSkuXG4gICAgc29tZSgodCkgPT4gdCA9PT0gdHlwZSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0UmVsYXRlZFRyYWNrcyh0cmFjazogVHJhY2spIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5oYW5kbGUodHJhY2suYXV0aG9yIHx8IHRyYWNrLnRpdGxlLCB7XG4gICAgICB0eXBlOiBRdWVyeVR5cGUuU1BPVElGWV9TRUFSQ0gsXG4gICAgICByZXF1ZXN0ZWRCeTogdHJhY2sucmVxdWVzdGVkQnlcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBoYW5kbGUocXVlcnk6IHN0cmluZywgY29udGV4dDogRXh0cmFjdG9yU2VhcmNoQ29udGV4dCk6IFByb21pc2U8RXh0cmFjdG9ySW5mbz4ge1xuICAgIGlmIChjb250ZXh0LnByb3RvY29sID09PSAnc3BzZWFyY2gnKSBjb250ZXh0LnR5cGUgPSBRdWVyeVR5cGUuU1BPVElGWV9TRUFSQ0g7XG4gICAgc3dpdGNoIChjb250ZXh0LnR5cGUpIHtcbiAgICAgIGNhc2UgUXVlcnlUeXBlLkFVVE86XG4gICAgICBjYXNlIFF1ZXJ5VHlwZS5BVVRPX1NFQVJDSDpcbiAgICAgIGNhc2UgUXVlcnlUeXBlLlNQT1RJRllfU0VBUkNIOntcbiAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5pbnRlcm5hbC5zZWFyY2gocXVlcnkpO1xuICAgICAgICAgIGlmICghZGF0YSkgcmV0dXJuIHRoaXMuY3JlYXRlUmVzcG9uc2UoKTtcblxuICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVJlc3BvbnNlKFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIGRhdGEubWFwKChzcG90aWZ5RGF0YSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCB0cmFjazogVHJhY2sgPSBuZXcgVHJhY2sodGhpcy5jb250ZXh0LnBsYXllciwge1xuICAgICAgICAgICAgICAgIHRpdGxlOiBzcG90aWZ5RGF0YS50aXRsZSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYCR7c3BvdGlmeURhdGEudGl0bGV9IGJ5ICR7c3BvdGlmeURhdGEuYXJ0aXN0fWAsXG4gICAgICAgICAgICAgICAgYXV0aG9yOiBzcG90aWZ5RGF0YS5hcnRpc3QgPz8gJ1Vua25vd24gQXJ0aXN0JyxcbiAgICAgICAgICAgICAgICB1cmw6IHNwb3RpZnlEYXRhLnVybCxcbiAgICAgICAgICAgICAgICB0aHVtYm5haWw6IHNwb3RpZnlEYXRhLnRodW1ibmFpbCB8fCAnaHR0cHM6Ly93d3cuc2Nkbi5jby9pL19nbG9iYWwvdHdpdHRlcl9jYXJkLWRlZmF1bHQuanBnJyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogVXRpbC5idWlsZFRpbWVDb2RlKFV0aWwucGFyc2VNUyhzcG90aWZ5RGF0YS5kdXJhdGlvbiA/PyAwKSksXG4gICAgICAgICAgICAgICAgdmlld3M6IDAsXG4gICAgICAgICAgICAgICAgcmVxdWVzdGVkQnk6IGNvbnRleHQucmVxdWVzdGVkQnksXG4gICAgICAgICAgICAgICAgc291cmNlOiAnc3BvdGlmeScsXG4gICAgICAgICAgICAgICAgcXVlcnlUeXBlOiBRdWVyeVR5cGUuU1BPVElGWV9TT05HLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICBzb3VyY2U6IHNwb3RpZnlEYXRhLFxuICAgICAgICAgICAgICAgICAgYnJpZGdlOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1ZXN0TWV0YWRhdGE6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogc3BvdGlmeURhdGEsXG4gICAgICAgICAgICAgICAgICAgIGJyaWRnZTogbnVsbFxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIHRyYWNrLmV4dHJhY3RvciA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgcmV0dXJuIHRyYWNrO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICBjYXNlIFF1ZXJ5VHlwZS5TUE9USUZZX1NPTkc6e1xuICAgICAgICAgIGNvbnN0IHNwb3RpZnlEYXRhOiBTcG90aWZ5U29uZyB8IHZvaWQgPSBhd2FpdCB0aGlzLl9saWIuXG4gICAgICAgICAgZ2V0RGF0YShxdWVyeSwgY29udGV4dC5yZXF1ZXN0T3B0aW9ucyBhcyB1bmtub3duIGFzIFJlcXVlc3RJbml0KS5cbiAgICAgICAgICBjYXRjaChVdGlsLm5vb3ApO1xuICAgICAgICAgIGlmICghc3BvdGlmeURhdGEpIHJldHVybiB7IHBsYXlsaXN0OiBudWxsLCB0cmFja3M6IFtdIH07XG4gICAgICAgICAgY29uc3Qgc3BvdGlmeVRyYWNrOiBUcmFjayA9IG5ldyBUcmFjayh0aGlzLmNvbnRleHQucGxheWVyLCB7XG4gICAgICAgICAgICB0aXRsZTogc3BvdGlmeURhdGEudGl0bGUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogYCR7c3BvdGlmeURhdGEubmFtZX0gYnkgJHtzcG90aWZ5RGF0YS5hcnRpc3RzLm1hcCgobSkgPT4gbS5uYW1lKS5qb2luKCcsICcpfWAsXG4gICAgICAgICAgICBhdXRob3I6IHNwb3RpZnlEYXRhLmFydGlzdHNbMF0/Lm5hbWUgPz8gJ1Vua25vd24gQXJ0aXN0JyxcbiAgICAgICAgICAgIHVybDogc3BvdGlmeURhdGEuaWQgPyBgaHR0cHM6Ly9vcGVuLnNwb3RpZnkuY29tL3RyYWNrLyR7c3BvdGlmeURhdGEuaWR9YCA6IHF1ZXJ5LFxuICAgICAgICAgICAgdGh1bWJuYWlsOlxuICAgICAgICAgICAgc3BvdGlmeURhdGEuY292ZXJBcnQ/LnNvdXJjZXM/LlswXT8udXJsIHx8ICdodHRwczovL3d3dy5zY2RuLmNvL2kvX2dsb2JhbC90d2l0dGVyX2NhcmQtZGVmYXVsdC5qcGcnLFxuICAgICAgICAgICAgZHVyYXRpb246IFV0aWwuYnVpbGRUaW1lQ29kZShVdGlsLnBhcnNlTVMoc3BvdGlmeURhdGEuZHVyYXRpb24gPz8gc3BvdGlmeURhdGEubWF4RHVyYXRpb24gPz8gMCkpLFxuICAgICAgICAgICAgdmlld3M6IDAsXG4gICAgICAgICAgICByZXF1ZXN0ZWRCeTogY29udGV4dC5yZXF1ZXN0ZWRCeSxcbiAgICAgICAgICAgIHNvdXJjZTogJ3Nwb3RpZnknLFxuICAgICAgICAgICAgcXVlcnlUeXBlOiBjb250ZXh0LnR5cGUsXG4gICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICBzb3VyY2U6IHNwb3RpZnlEYXRhLFxuICAgICAgICAgICAgICBicmlkZ2U6IG51bGxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZXF1ZXN0TWV0YWRhdGE6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzb3VyY2U6IHNwb3RpZnlEYXRhLFxuICAgICAgICAgICAgICAgIGJyaWRnZTogbnVsbFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgc3BvdGlmeVRyYWNrLmV4dHJhY3RvciA9IHRoaXM7XG5cbiAgICAgICAgICByZXR1cm4geyBwbGF5bGlzdDogbnVsbCwgdHJhY2tzOiBbc3BvdGlmeVRyYWNrXSB9O1xuICAgICAgICB9XG4gICAgICBjYXNlIFF1ZXJ5VHlwZS5TUE9USUZZX1BMQVlMSVNUOntcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgeyBxdWVyeVR5cGUsIGlkIH0gPSB0aGlzLnBhcnNlKHF1ZXJ5KTtcbiAgICAgICAgICAgIGlmIChxdWVyeVR5cGUgIT09ICdwbGF5bGlzdCcpIHRocm93ICdlcnInO1xuXG4gICAgICAgICAgICBjb25zdCBzcG90aWZ5UGxheWxpc3QgPSBhd2FpdCB0aGlzLmludGVybmFsLmdldFBsYXlsaXN0KGlkKTtcbiAgICAgICAgICAgIGlmICghc3BvdGlmeVBsYXlsaXN0KSB0aHJvdyAnZXJyJztcblxuICAgICAgICAgICAgY29uc3QgcGxheWxpc3QgPSBuZXcgUGxheWxpc3QodGhpcy5jb250ZXh0LnBsYXllciwge1xuICAgICAgICAgICAgICB0aXRsZTogc3BvdGlmeVBsYXlsaXN0Lm5hbWUsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBzcG90aWZ5UGxheWxpc3QubmFtZSA/PyAnJyxcbiAgICAgICAgICAgICAgdGh1bWJuYWlsOiBzcG90aWZ5UGxheWxpc3QudGh1bWJuYWlsID8/ICdodHRwczovL3d3dy5zY2RuLmNvL2kvX2dsb2JhbC90d2l0dGVyX2NhcmQtZGVmYXVsdC5qcGcnLFxuICAgICAgICAgICAgICB0eXBlOiAncGxheWxpc3QnLFxuICAgICAgICAgICAgICBzb3VyY2U6ICdzcG90aWZ5JyxcbiAgICAgICAgICAgICAgYXV0aG9yOiB7XG4gICAgICAgICAgICAgICAgbmFtZTogc3BvdGlmeVBsYXlsaXN0LmF1dGhvciA/PyAnVW5rbm93biBBcnRpc3QnLFxuICAgICAgICAgICAgICAgIHVybDogbnVsbCBhcyB1bmtub3duIGFzIHN0cmluZ1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB0cmFja3M6IFtdLFxuICAgICAgICAgICAgICBpZDogc3BvdGlmeVBsYXlsaXN0LmlkLFxuICAgICAgICAgICAgICB1cmw6IHNwb3RpZnlQbGF5bGlzdC51cmwgfHwgcXVlcnksXG4gICAgICAgICAgICAgIHJhd1BsYXlsaXN0OiBzcG90aWZ5UGxheWxpc3RcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBwbGF5bGlzdC50cmFja3MgPSBzcG90aWZ5UGxheWxpc3QudHJhY2tzLm1hcCgoc3BvdGlmeURhdGEpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZGF0YTogVHJhY2sgPSBuZXcgVHJhY2sodGhpcy5jb250ZXh0LnBsYXllciwge1xuICAgICAgICAgICAgICAgIHRpdGxlOiBzcG90aWZ5RGF0YS50aXRsZSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYCR7c3BvdGlmeURhdGEudGl0bGV9IGJ5ICR7c3BvdGlmeURhdGEuYXJ0aXN0fWAsXG4gICAgICAgICAgICAgICAgYXV0aG9yOiBzcG90aWZ5RGF0YS5hcnRpc3QgPz8gJ1Vua25vd24gQXJ0aXN0JyxcbiAgICAgICAgICAgICAgICB1cmw6IHNwb3RpZnlEYXRhLnVybCxcbiAgICAgICAgICAgICAgICB0aHVtYm5haWw6IHNwb3RpZnlEYXRhLnRodW1ibmFpbCB8fCAnaHR0cHM6Ly93d3cuc2Nkbi5jby9pL19nbG9iYWwvdHdpdHRlcl9jYXJkLWRlZmF1bHQuanBnJyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogVXRpbC5idWlsZFRpbWVDb2RlKFV0aWwucGFyc2VNUyhzcG90aWZ5RGF0YS5kdXJhdGlvbiA/PyAwKSksXG4gICAgICAgICAgICAgICAgdmlld3M6IDAsXG4gICAgICAgICAgICAgICAgcmVxdWVzdGVkQnk6IGNvbnRleHQucmVxdWVzdGVkQnksXG4gICAgICAgICAgICAgICAgc291cmNlOiAnc3BvdGlmeScsXG4gICAgICAgICAgICAgICAgcXVlcnlUeXBlOiBRdWVyeVR5cGUuU1BPVElGWV9TT05HLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICBzb3VyY2U6IHNwb3RpZnlEYXRhLFxuICAgICAgICAgICAgICAgICAgYnJpZGdlOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1ZXN0TWV0YWRhdGE6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogc3BvdGlmeURhdGEsXG4gICAgICAgICAgICAgICAgICAgIGJyaWRnZTogbnVsbFxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBkYXRhLmV4dHJhY3RvciA9IHRoaXM7XG4gICAgICAgICAgICAgIGRhdGEucGxheWxpc3QgPSBwbGF5bGlzdDtcbiAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgICB9KSBhcyBUcmFja1tdO1xuXG4gICAgICAgICAgICByZXR1cm4geyBwbGF5bGlzdCwgdHJhY2tzOiBwbGF5bGlzdC50cmFja3MgfTtcbiAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIGNvbnN0IHNwb3RpZnlQbGF5bGlzdDogU3BvdGlmeVBsYXlsaXN0IHwgdm9pZCA9IGF3YWl0IHRoaXMuX2xpYi5cbiAgICAgICAgICAgIGdldERhdGEocXVlcnksIGNvbnRleHQucmVxdWVzdE9wdGlvbnMgYXMgdW5rbm93biBhcyBSZXF1ZXN0SW5pdCkuXG4gICAgICAgICAgICBjYXRjaChVdGlsLm5vb3ApO1xuICAgICAgICAgICAgaWYgKCFzcG90aWZ5UGxheWxpc3QpIHJldHVybiB7IHBsYXlsaXN0OiBudWxsLCB0cmFja3M6IFtdIH07XG5cbiAgICAgICAgICAgIGNvbnN0IHBsYXlsaXN0ID0gbmV3IFBsYXlsaXN0KHRoaXMuY29udGV4dC5wbGF5ZXIsIHtcbiAgICAgICAgICAgICAgdGl0bGU6IHNwb3RpZnlQbGF5bGlzdC5uYW1lID8/IHNwb3RpZnlQbGF5bGlzdC50aXRsZSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHNwb3RpZnlQbGF5bGlzdC50aXRsZSA/PyAnJyxcbiAgICAgICAgICAgICAgdGh1bWJuYWlsOlxuICAgICAgICAgICAgICBzcG90aWZ5UGxheWxpc3QuY292ZXJBcnQ/LnNvdXJjZXM/LlswXT8udXJsID8/ICdodHRwczovL3d3dy5zY2RuLmNvL2kvX2dsb2JhbC90d2l0dGVyX2NhcmQtZGVmYXVsdC5qcGcnLFxuICAgICAgICAgICAgICB0eXBlOiBzcG90aWZ5UGxheWxpc3QudHlwZSxcbiAgICAgICAgICAgICAgc291cmNlOiAnc3BvdGlmeScsXG4gICAgICAgICAgICAgIGF1dGhvcjoge1xuICAgICAgICAgICAgICAgIG5hbWU6IHNwb3RpZnlQbGF5bGlzdC5zdWJ0aXRsZSA/PyAnVW5rbm93biBBcnRpc3QnLFxuICAgICAgICAgICAgICAgIHVybDogbnVsbCBhcyB1bmtub3duIGFzIHN0cmluZ1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB0cmFja3M6IFtdLFxuICAgICAgICAgICAgICBpZDogc3BvdGlmeVBsYXlsaXN0LmlkLFxuICAgICAgICAgICAgICB1cmw6IHNwb3RpZnlQbGF5bGlzdC5pZCA/IGBodHRwczovL29wZW4uc3BvdGlmeS5jb20vcGxheWxpc3QvJHtzcG90aWZ5UGxheWxpc3QuaWR9YCA6IHF1ZXJ5LFxuICAgICAgICAgICAgICByYXdQbGF5bGlzdDogc3BvdGlmeVBsYXlsaXN0XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcGxheWxpc3QudHJhY2tzID0gc3BvdGlmeVBsYXlsaXN0LnRyYWNrTGlzdC5tYXAoKG0pID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZGF0YTogVHJhY2sgPSBuZXcgVHJhY2sodGhpcy5jb250ZXh0LnBsYXllciwge1xuICAgICAgICAgICAgICAgIHRpdGxlOiBtLnRpdGxlID8/ICcnLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBtLnRpdGxlID8/ICcnLFxuICAgICAgICAgICAgICAgIGF1dGhvcjogbS5zdWJ0aXRsZSA/PyAnVW5rbm93biBBcnRpc3QnLFxuICAgICAgICAgICAgICAgIHVybDogbS51aWQgPyBgaHR0cHM6Ly9vcGVuLnNwb3RpZnkuY29tL3RyYWNrcy8ke20udWlkfWAgOiBxdWVyeSxcbiAgICAgICAgICAgICAgICB0aHVtYm5haWw6ICdodHRwczovL3d3dy5zY2RuLmNvL2kvX2dsb2JhbC90d2l0dGVyX2NhcmQtZGVmYXVsdC5qcGcnLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBVdGlsLmJ1aWxkVGltZUNvZGUoVXRpbC5wYXJzZU1TKG0uZHVyYXRpb24pKSxcbiAgICAgICAgICAgICAgICB2aWV3czogMCxcbiAgICAgICAgICAgICAgICByZXF1ZXN0ZWRCeTogY29udGV4dC5yZXF1ZXN0ZWRCeSxcbiAgICAgICAgICAgICAgICBwbGF5bGlzdCxcbiAgICAgICAgICAgICAgICBzb3VyY2U6ICdzcG90aWZ5JyxcbiAgICAgICAgICAgICAgICBxdWVyeVR5cGU6ICdzcG90aWZ5U29uZycsXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgIHNvdXJjZTogbSxcbiAgICAgICAgICAgICAgICAgIGJyaWRnZTogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWVzdE1ldGFkYXRhOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IG0sXG4gICAgICAgICAgICAgICAgICAgIGJyaWRnZTogbnVsbFxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBkYXRhLmV4dHJhY3RvciA9IHRoaXM7XG4gICAgICAgICAgICAgIGRhdGEucGxheWxpc3QgPSBwbGF5bGlzdDtcbiAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgICB9KSBhcyBUcmFja1tdO1xuXG4gICAgICAgICAgICByZXR1cm4geyBwbGF5bGlzdCwgdHJhY2tzOiBwbGF5bGlzdC50cmFja3MgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIGNhc2UgUXVlcnlUeXBlLlNQT1RJRllfQUxCVU06e1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IHF1ZXJ5VHlwZSwgaWQgfSA9IHRoaXMucGFyc2UocXVlcnkpO1xuICAgICAgICAgICAgaWYgKHF1ZXJ5VHlwZSAhPT0gJ2FsYnVtJykgdGhyb3cgJ2Vycic7XG5cbiAgICAgICAgICAgIGNvbnN0IHNwb3RpZnlBbGJ1bSA9IGF3YWl0IHRoaXMuaW50ZXJuYWwuZ2V0QWxidW0oaWQpO1xuICAgICAgICAgICAgaWYgKCFzcG90aWZ5QWxidW0pIHRocm93ICdlcnInO1xuXG4gICAgICAgICAgICBjb25zdCBwbGF5bGlzdCA9IG5ldyBQbGF5bGlzdCh0aGlzLmNvbnRleHQucGxheWVyLCB7XG4gICAgICAgICAgICAgIHRpdGxlOiBzcG90aWZ5QWxidW0ubmFtZSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHNwb3RpZnlBbGJ1bS5uYW1lID8/ICcnLFxuICAgICAgICAgICAgICB0aHVtYm5haWw6IHNwb3RpZnlBbGJ1bS50aHVtYm5haWwgPz8gJ2h0dHBzOi8vd3d3LnNjZG4uY28vaS9fZ2xvYmFsL3R3aXR0ZXJfY2FyZC1kZWZhdWx0LmpwZycsXG4gICAgICAgICAgICAgIHR5cGU6ICdhbGJ1bScsXG4gICAgICAgICAgICAgIHNvdXJjZTogJ3Nwb3RpZnknLFxuICAgICAgICAgICAgICBhdXRob3I6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBzcG90aWZ5QWxidW0uYXV0aG9yID8/ICdVbmtub3duIEFydGlzdCcsXG4gICAgICAgICAgICAgICAgdXJsOiBudWxsIGFzIHVua25vd24gYXMgc3RyaW5nXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHRyYWNrczogW10sXG4gICAgICAgICAgICAgIGlkOiBzcG90aWZ5QWxidW0uaWQsXG4gICAgICAgICAgICAgIHVybDogc3BvdGlmeUFsYnVtLnVybCB8fCBxdWVyeSxcbiAgICAgICAgICAgICAgcmF3UGxheWxpc3Q6IHNwb3RpZnlBbGJ1bVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHBsYXlsaXN0LnRyYWNrcyA9IHNwb3RpZnlBbGJ1bS50cmFja3MubWFwKChzcG90aWZ5RGF0YSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBkYXRhOiBUcmFjayA9IG5ldyBUcmFjayh0aGlzLmNvbnRleHQucGxheWVyLCB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IHNwb3RpZnlEYXRhLnRpdGxlLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgJHtzcG90aWZ5RGF0YS50aXRsZX0gYnkgJHtzcG90aWZ5RGF0YS5hcnRpc3R9YCxcbiAgICAgICAgICAgICAgICBhdXRob3I6IHNwb3RpZnlEYXRhLmFydGlzdCA/PyAnVW5rbm93biBBcnRpc3QnLFxuICAgICAgICAgICAgICAgIHVybDogc3BvdGlmeURhdGEudXJsLFxuICAgICAgICAgICAgICAgIHRodW1ibmFpbDogc3BvdGlmeURhdGEudGh1bWJuYWlsIHx8ICdodHRwczovL3d3dy5zY2RuLmNvL2kvX2dsb2JhbC90d2l0dGVyX2NhcmQtZGVmYXVsdC5qcGcnLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBVdGlsLmJ1aWxkVGltZUNvZGUoVXRpbC5wYXJzZU1TKHNwb3RpZnlEYXRhLmR1cmF0aW9uID8/IDApKSxcbiAgICAgICAgICAgICAgICB2aWV3czogMCxcbiAgICAgICAgICAgICAgICByZXF1ZXN0ZWRCeTogY29udGV4dC5yZXF1ZXN0ZWRCeSxcbiAgICAgICAgICAgICAgICBzb3VyY2U6ICdzcG90aWZ5JyxcbiAgICAgICAgICAgICAgICBxdWVyeVR5cGU6IFF1ZXJ5VHlwZS5TUE9USUZZX1NPTkcsXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgIHNvdXJjZTogc3BvdGlmeURhdGEsXG4gICAgICAgICAgICAgICAgICBicmlkZ2U6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVlc3RNZXRhZGF0YTogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBzcG90aWZ5RGF0YSxcbiAgICAgICAgICAgICAgICAgICAgYnJpZGdlOiBudWxsXG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGRhdGEuZXh0cmFjdG9yID0gdGhpcztcbiAgICAgICAgICAgICAgZGF0YS5wbGF5bGlzdCA9IHBsYXlsaXN0O1xuICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgICAgIH0pIGFzIFRyYWNrW107XG5cbiAgICAgICAgICAgIHJldHVybiB7IHBsYXlsaXN0LCB0cmFja3M6IHBsYXlsaXN0LnRyYWNrcyB9O1xuICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgY29uc3QgYWxidW06IFNwb3RpZnlBbGJ1bSB8IHZvaWQgPSBhd2FpdCB0aGlzLl9saWIuXG4gICAgICAgICAgICBnZXREYXRhKHF1ZXJ5LCBjb250ZXh0LnJlcXVlc3RPcHRpb25zIGFzIHVua25vd24gYXMgUmVxdWVzdEluaXQpLlxuICAgICAgICAgICAgY2F0Y2goVXRpbC5ub29wKTtcbiAgICAgICAgICAgIGlmICghYWxidW0pIHJldHVybiB7IHBsYXlsaXN0OiBudWxsLCB0cmFja3M6IFtdIH07XG5cbiAgICAgICAgICAgIGNvbnN0IHBsYXlsaXN0ID0gbmV3IFBsYXlsaXN0KHRoaXMuY29udGV4dC5wbGF5ZXIsIHtcbiAgICAgICAgICAgICAgdGl0bGU6IGFsYnVtLm5hbWUgPz8gYWxidW0udGl0bGUsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBhbGJ1bS50aXRsZSA/PyAnJyxcbiAgICAgICAgICAgICAgdGh1bWJuYWlsOiBhbGJ1bS5jb3ZlckFydD8uc291cmNlcz8uWzBdPy51cmwgPz8gJ2h0dHBzOi8vd3d3LnNjZG4uY28vaS9fZ2xvYmFsL3R3aXR0ZXJfY2FyZC1kZWZhdWx0LmpwZycsXG4gICAgICAgICAgICAgIHR5cGU6IGFsYnVtLnR5cGUsXG4gICAgICAgICAgICAgIHNvdXJjZTogJ3Nwb3RpZnknLFxuICAgICAgICAgICAgICBhdXRob3I6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBhbGJ1bS5zdWJ0aXRsZSA/PyAnVW5rbm93biBBcnRpc3QnLFxuICAgICAgICAgICAgICAgIHVybDogbnVsbCBhcyB1bmtub3duIGFzIHN0cmluZ1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB0cmFja3M6IFtdLFxuICAgICAgICAgICAgICBpZDogYWxidW0uaWQsXG4gICAgICAgICAgICAgIHVybDogYWxidW0uaWQgPyBgaHR0cHM6Ly9vcGVuLnNwb3RpZnkuY29tL3BsYXlsaXN0LyR7YWxidW0uaWR9YCA6IHF1ZXJ5LFxuICAgICAgICAgICAgICByYXdQbGF5bGlzdDogYWxidW1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBwbGF5bGlzdC50cmFja3MgPSBhbGJ1bS50cmFja0xpc3QubWFwKChtKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGRhdGE6IFRyYWNrID0gbmV3IFRyYWNrKHRoaXMuY29udGV4dC5wbGF5ZXIsIHtcbiAgICAgICAgICAgICAgICB0aXRsZTogbS50aXRsZSA/PyAnJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbS50aXRsZSA/PyAnJyxcbiAgICAgICAgICAgICAgICBhdXRob3I6IG0uc3VidGl0bGUgPz8gJ1Vua25vd24gQXJ0aXN0JyxcbiAgICAgICAgICAgICAgICB1cmw6IG0udWlkID8gYGh0dHBzOi8vb3Blbi5zcG90aWZ5LmNvbS90cmFja3MvJHttLnVpZH1gIDogcXVlcnksXG4gICAgICAgICAgICAgICAgdGh1bWJuYWlsOiAnaHR0cHM6Ly93d3cuc2Nkbi5jby9pL19nbG9iYWwvdHdpdHRlcl9jYXJkLWRlZmF1bHQuanBnJyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogVXRpbC5idWlsZFRpbWVDb2RlKFV0aWwucGFyc2VNUyhtLmR1cmF0aW9uKSksXG4gICAgICAgICAgICAgICAgdmlld3M6IDAsXG4gICAgICAgICAgICAgICAgcmVxdWVzdGVkQnk6IGNvbnRleHQucmVxdWVzdGVkQnksXG4gICAgICAgICAgICAgICAgcGxheWxpc3QsXG4gICAgICAgICAgICAgICAgc291cmNlOiAnc3BvdGlmeScsXG4gICAgICAgICAgICAgICAgcXVlcnlUeXBlOiAnc3BvdGlmeVNvbmcnLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICBzb3VyY2U6IG0sXG4gICAgICAgICAgICAgICAgICBicmlkZ2U6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVlc3RNZXRhZGF0YTogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBtLFxuICAgICAgICAgICAgICAgICAgICBicmlkZ2U6IG51bGxcbiAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgZGF0YS5leHRyYWN0b3IgPSB0aGlzO1xuICAgICAgICAgICAgICBkYXRhLnBsYXlsaXN0ID0gcGxheWxpc3Q7XG4gICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICAgICAgfSkgYXMgVHJhY2tbXTtcblxuICAgICAgICAgICAgcmV0dXJuIHsgcGxheWxpc3QsIHRyYWNrczogcGxheWxpc3QudHJhY2tzIH07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4geyBwbGF5bGlzdDogbnVsbCwgdHJhY2tzOiBbXSB9O1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBzdHJlYW0oaW5mbzogVHJhY2spOiBQcm9taXNlPEV4dHJhY3RvclN0cmVhbWFibGU+IHtcbiAgICBpZiAodGhpcy5fc3RyZWFtKSB7XG4gICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCB0aGlzLl9zdHJlYW0oaW5mby51cmwsIGluZm8pO1xuICAgICAgaWYgKHR5cGVvZiBzdHJlYW0gPT09ICdzdHJpbmcnKSByZXR1cm4gc3RyZWFtO1xuICAgICAgcmV0dXJuIHN0cmVhbTtcbiAgICB9XG5cbiAgICAvLyBuZXcgYXBpXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5jb250ZXh0LnJlcXVlc3RCcmlkZ2UoaW5mbywgdGhpcyk7XG5cbiAgICBpZiAoIXJlc3VsdD8ucmVzdWx0KSB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBicmlkZ2UgdGhpcyB0cmFjaycpO1xuXG4gICAgcmV0dXJuIHJlc3VsdC5yZXN1bHQ7XG4gIH1cblxuICBwdWJsaWMgcGFyc2UocTogc3RyaW5nKSB7XG4gICAgY29uc3QgWywsLCBxdWVyeVR5cGUsIGlkXSA9IHJlLmV4ZWMocSkgfHwgW107XG5cbiAgICByZXR1cm4geyBxdWVyeVR5cGUsIGlkIH07XG4gIH1cbn0iLCAiXG5cblxuXG5cblxuZXhwb3J0IGNvbnN0IHZlcnNpb24gPSAvKiBAX19NQUNST19fIGdldFZlcnNpb24gKi9cIjcuMC4wXCI7IiwgImltcG9ydCB7XG4gIEFwcGxlTXVzaWNFeHRyYWN0b3IsXG4gIEF0dGFjaG1lbnRFeHRyYWN0b3IsXG4gIFJldmVyYm5hdGlvbkV4dHJhY3RvcixcbiAgU291bmRDbG91ZEV4dHJhY3RvcixcbiAgU3BvdGlmeUV4dHJhY3RvcixcbiAgVmltZW9FeHRyYWN0b3IgfSBmcm9tXG4nLi9leHRyYWN0b3JzJztcblxuZXhwb3J0IGNvbnN0IERlZmF1bHRFeHRyYWN0b3JzID0gW1xuU291bmRDbG91ZEV4dHJhY3RvcixcbkF0dGFjaG1lbnRFeHRyYWN0b3IsXG5WaW1lb0V4dHJhY3RvcixcblJldmVyYm5hdGlvbkV4dHJhY3RvcixcbkFwcGxlTXVzaWNFeHRyYWN0b3IsXG5TcG90aWZ5RXh0cmFjdG9yXTtcblxuXG5leHBvcnQgKiBmcm9tICcuL2V4dHJhY3RvcnMnO1xuZXhwb3J0ICogYXMgSW50ZXJuYWwgZnJvbSAnLi9pbnRlcm5hbCc7XG5cbmV4cG9ydCB7IHZlcnNpb24gfSBmcm9tICcuL3ZlcnNpb24nOyJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQTtBQUFBLEVBQ0U7QUFBQSxFQUtBO0FBQUEsRUFDQTtBQUFBLEVBRUE7QUFBQSxFQUNBO0FBQUEsT0FDRjtBQUNBLFlBQVksZ0JBQWdCOzs7QUNYNUIsT0FBTyxhQUFhO0FBR2IsSUFBTSxLQUNiO0FBQ08sSUFBTSxRQUFRO0FBaUNkLFNBQVMseUJBQXlCLFFBQXdFO0FBQy9HLFFB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QUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBZ0I7IiwKICAibmFtZXMiOiBbIkJhc2VFeHRyYWN0b3IiLCAiUXVlcnlUeXBlIiwgIlRyYWNrIiwgIlV0aWwiLCAiQmFzZUV4dHJhY3RvciIsICJRdWVyeVR5cGUiLCAiVXRpbCIsICJUcmFjayIsICJCYXNlRXh0cmFjdG9yIiwgIlF1ZXJ5VHlwZSIsICJUcmFjayIsICJVdGlsIiwgIkJhc2VFeHRyYWN0b3IiLCAiUXVlcnlUeXBlIiwgIlV0aWwiLCAiVHJhY2siLCAiQmFzZUV4dHJhY3RvciIsICJRdWVyeVR5cGUiLCAiVHJhY2siLCAiVXRpbCIsICJodHRwIiwgImh0dHBzIiwgImh0dHAiLCAiaHR0cHMiLCAiQmFzZUV4dHJhY3RvciIsICJRdWVyeVR5cGUiLCAiVHJhY2siLCAiVXRpbCIsICJQbGF5bGlzdCIsICJRdWVyeVR5cGUiLCAiVHJhY2siLCAiVXRpbCIsICJCYXNlRXh0cmFjdG9yIiwgInIiLCAibSIsICJyZXMiLCAiQmFzZUV4dHJhY3RvciIsICJRdWVyeVR5cGUiLCAiVHJhY2siLCAiVXRpbCIsICJQbGF5bGlzdCIsICJCYXNlRXh0cmFjdG9yIiwgIlBsYXlsaXN0IiwgIlF1ZXJ5VHlwZSIsICJUcmFjayIsICJVdGlsIiwgIkJhc2VFeHRyYWN0b3IiLCAiUXVlcnlUeXBlIiwgIlRyYWNrIiwgIlV0aWwiLCAiUGxheWxpc3QiXQp9Cg==